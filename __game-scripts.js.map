{"version":3,"sources":["scripts/utils/utils.js","scripts/utils/audio-analyser.js","scripts/utils/render-layer.js","scripts/shapes/shape-world.js","scripts/shapes/shape.js","scripts/objects/button.js","scripts/objects/controller-trigger.js","scripts/objects/door-handle.js","scripts/objects/grabbable.js","scripts/objects/hifi.js","scripts/objects/interacts-with.js","scripts/objects/locator-rings.js","scripts/look-camera.js","scripts/objects/speaker-cone.js","scripts/objects/statue-button.js","scripts/objects/statue.js","scripts/objects/vinyl.js","scripts/xr.js","scripts/controllers.js","scripts/controller.js","scripts/locator.js","scripts/teleport-camera.js","models/earth/rotate earth.js","models/earth/shader-chunk.js","scripts/load-scene-helper.js","scripts/change-scene-on-click.js","Third Person/CameraMovement.js","Third Person/PlayerMovement.js","Third Person/PlayerAnimationHandler.js","scripts/bloom.js","Video Tecture/rotate.js","Video Tecture/iframe-plane.js","Video Tecture/camera/orbit-camera.js","Video Tecture/camera/keyboard-input.js","Video Tecture/camera/html-handler.js","Video Tecture/camera/mouse-input.js","Video Tecture/camera/css-handler.js","Video Tecture/camera/touch-input.js","Video Tecture/keyboard-input.js","Video Tecture/orbit-camera.js","Video Tecture/mouse-input.js","Video Tecture/touch-input.js","Coche/ui-speed.js","Coche/follow-camera.js","Coche/vehicle.js","Coche/exhaust.js","Coche/action-vr.js","Coche/action-physics-reset.js","Coche/events-button.js","Coche/action-set-property.js","Coche/vehicle-graphics.js","scripts/posteffect-lut.js","scripts/unload-assets-on-click.js","scripts/load-scene-with-assets.js","Shader/custom_shader.js","models/Escaneo estudio/wireframe.js"],"names":[],"mappings":"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","sourcesContent":["// utils.js\npc.DEFAULT_HUMAN_HEIGHT = 1.67;\n\n(function(){\n    pc.util = {};\n    \n    pc.util.DEBUG = false;\n    pc.util.DEFAULT_VEC3_0 = new pc.Vec3(0, 0, 0);\n    pc.util.DEFAULT_VEC3_1 = new pc.Vec3(1, 1, 1);\n    pc.util.DEFAULT_QUAT = new pc.Quat(0, 0, 0, 1);\n    \n    pc.util.HIGHLIGHT_ENTITY_GREEN = new pc.Color(0.25, 0.5, 0.25);\n    pc.util.HIGHLIGHT_ENTITY_RED = new pc.Color(0.5/2, 0.25/2, 0.25/2);\n    pc.util.HIGHLIGHT_ENTITY_DEFAULT = new pc.Color(0,0,0);\n    \n    pc.util.setEntityAlpha = function(entity, alpha) {\n        var a = pc.math.clamp(alpha, 0, 1);\n        var meshInstances = pc.util.getMeshInstances(entity);\n        for(var i = 0; i < meshInstances.length; ++i) {\n            // WARNING: setParameter() is still a beta feature and may change in the future      \n            // This is where we set how transparent we want the object to be on a value between 0 and 1\n            // 0 = fully transparent\n            // 1 = fully opaque\n\n            // Note: The materials on the model MUST have alpha set on opacity -> blend type and be slight less than 1\n            meshInstances[i].setParameter(\"material_opacity\", a);\n        }  \n    };\n    \n    \n    pc.util.setEntityEmissive = function(entity, color) {\n        var meshInstances = pc.util.getMeshInstances(entity);\n        for(var i = 0; i < meshInstances.length; ++i) {\n            // WARNING: setParameter() is still a beta feature and may change in the future\n            meshInstances[i].setParameter(\"material_emissive\", color.data3);\n        }\n    };\n    \n    \n    pc.util.isMobile = function() {\n        return /Android/i.test(navigator.userAgent) ||\n            /iPhone|iPad|iPod/i.test(navigator.userAgent);\n    };\n    \n    \n    pc.util.canPlayOgg = function () {\n        var str = navigator.userAgent.toLowerCase();\n        if (str.search('safari') >= 0 && str.search('chrome') < 0) {\n            return false;\n        }\n        \n        return true;\n    };\n    \n    \n    pc.util.unitCurve = function(x, curve) { \n        if (1 == curve ) {\n            return x;\n        } else {\n            var out = x;\n            var d = curve - curve * out + out;\n            if (0 !== d)\n            {\n                out = out / d;\n            }\n            return out;\n        }\n    };\n    \n    \n    pc.util.sCurve = function (x) {\n        return x * x * (3 - 2 * x);\n    };\n    \n    \n    pc.util.playSoundSlot = function (entity, slotName, volume) {\n        if (entity.sound) {\n            var soundSlot = entity.sound.slots[slotName];\n            if (soundSlot) {\n                if (volume) {\n                    soundSlot.volume = volume;\n                }\n                \n                soundSlot.play();\n            }\n            return soundSlot;\n        }\n        return null;\n    };\n    \n    \n    pc.util.stopSoundSlot = function (entity, slotName) {\n        if (entity.sound) {\n            var soundSlot = entity.sound.slots[slotName];\n            if (soundSlot) {\n                soundSlot.stop();\n            }\n            return soundSlot;\n        }\n        return null;\n    };\n    \n    \n    pc.util.pauseSoundSlot = function (entity, slotName) {\n        if (entity.sound) {\n            var soundSlot = entity.sound.slots[slotName];\n            if (soundSlot) {\n                soundSlot.pause();\n            }\n            return soundSlot;\n        }\n        return null;\n    };\n    \n    \n    pc.util.isPlayingSoundSlot = function (entity, slotName) {\n        if (entity.sound) {\n            var soundSlot = entity.sound.slots[slotName];\n            if (soundSlot) {\n                return soundSlot.isPlaying;\n            }\n        }\n        return false;\n    };    \n    \n    \n    pc.util.initSoundSlotAssets = function (app, entity) {\n        // Check if we can play OGG or MP3 and load the right assets for the platform\n        var fileExt = pc.util.canPlayOgg() ? '.ogg' : '.mp3';\n        var soundSlots = entity.sound ? entity.sound.slots : null;\n        var count = 0;\n        \n        if (soundSlots) {\n            for (var key in soundSlots) {\n                if (soundSlots.hasOwnProperty(key)) {\n                    var asset = app.assets.find(key + fileExt, 'audio');\n                    if (asset) {\n                        soundSlots[key].asset = asset.id;\n                        count += 1;\n                    }\n                }\n            }\n        }\n        \n        return count;\n    };    \n    \n    \n    var _transformedForward = new pc.Vec3();\n    pc.util.getYaw = function (quat) {\n        var transformedForward = _transformedForward;\n        quat.transformVector(pc.Vec3.FORWARD, transformedForward);\n\n        return Math.atan2(-transformedForward.x, -transformedForward.z) * pc.math.RAD_TO_DEG;    \n    };\n    \n    \n    var _inverseQuat = new pc.Quat();\n    var _resultQuat = new pc.Quat();\n    pc.util.angleBetweenQuats = function (quat1, quat2) {\n        var inverseQuat = _inverseQuat.copy(quat1).invert();\n        var resultQuat = _resultQuat.mul2(quat2, inverseQuat);\n        var result = Math.acos(pc.math.clamp(resultQuat.w, -1, 1)) * 2 * pc.math.RAD_TO_DEG;\n                \n        if (result > 180) {\n            result = 360 - result;\n        }\n        \n        return result;\n    };\n    \n    \n    pc.util.clampQuatToYAxis = function(quat) {\n        quat.x = 0; quat.z = 0;\n        var mag = Math.sqrt(quat.w * quat.w + quat.y * quat.y);\n        quat.w /= mag;\n        quat.y /= mag;    \n    };\n    \n    pc.util.getMeshInstances = function (rootEntity) {\n        if (rootEntity.model) {\n            return rootEntity.model.meshInstances;\n        }\n\n        var allMeshInstances = [];\n        if (rootEntity instanceof pc.Entity) {\n            var renders = rootEntity.findComponents('render');\n\n            for (var i = 0; i < renders.length; ++i) {\n                var meshInstances = renders[i].meshInstances;\n                for (var j = 0; j < meshInstances.length; j++) {\n                    allMeshInstances.push(meshInstances[j]);\n                }\n            }  \n        }\n        return allMeshInstances;\n    };\n})();\n\npc.extend(pc, function () {\n    var OrientatedBox = function OrientatedBox(halfExtents, worldTransform) {\n        this.halfExtents = halfExtents || new pc.Vec3(0.5, 0.5, 0.5);\n        \n        this._worldTransform = worldTransform || new pc.Mat4();\n        this._modelTransform = this._worldTransform.clone().invert();\n        this._aabb = new pc.BoundingBox(new pc.Vec3(), this.halfExtents);\n    };\n    \n    var transformedRay = new pc.Ray();\n    var transformedPoint = new pc.Vec3();\n    var transformedBoundingSphere = new pc.BoundingSphere();\n\n    OrientatedBox.prototype = {\n        intersectsRay: function (ray, point) {            \n            this._modelTransform.transformPoint(ray.origin, transformedRay.origin);\n            this._modelTransform.transformVector(ray.direction, transformedRay.direction);\n            \n            if (point) {\n                var result = this._aabb._intersectsRay(transformedRay, point);\n                this._worldTransform.transformPoint(point, point);\n                return result;\n            } else {\n                return modelBox._fastIntersectsRay(this._transformedRay);\n            }\n        },\n        \n        containsPoint: function (point) {\n            this._modelTransform.transformPoint(point, transformedPoint);\n            return this._aabb.containsPoint(transformedPoint);\n        },        \n\n        intersectsBoundingSphere: function (sphere) {\n            this._modelTransform.transformPoint(sphere.center, transformedBoundingSphere.center);\n            transformedBoundingSphere.radius = sphere.radius;\n\n            if (this._aabb.intersectsBoundingSphere(transformedBoundingSphere)) { \n                return true;\n            }\n\n            return false;\n        }\n    };\n    \n    Object.defineProperty(OrientatedBox.prototype, 'worldTransform', {\n        get: function () {\n            return this._worldTransform;\n        },\n        set: function (value) {\n            this._worldTransform = value;\n            this._modelTransform.copy(this._worldTransform).invert();\n        }\n    });\n    \n    return {\n        OrientatedBox: OrientatedBox\n    };\n}());\n\n\npc.BoundingSphere.diffBetweenPoints = new pc.Vec3();\n\npc.BoundingSphere.prototype.intersectsBoundingSphere = function (sphere) {\n    var diff = pc.BoundingSphere.diffBetweenPoints;\n    diff.sub2(sphere.center, this.center);\n    var totalRadius = sphere.radius + this.radius;\n    if (diff.lengthSq() <= totalRadius * totalRadius) {\n        return true;\n    }\n    \n    return false;\n};\n\npc.BoundingBox.prototype._distanceToBoundingSphereSq = function (sphere) {\n    var boxMin = this.getMin();\n    var boxMax = this.getMax();\n    \n    var sq = 0;\n    \n    for (var i = 0; i < 3; ++i) {\n        var out = 0;\n        var pn = sphere.center.data[i];\n        var bMin = boxMin.data[i];\n        var bMax = boxMax.data[i];\n        var val = 0;\n        \n        if (pn < bMin) {\n            val = (bMin - pn);\n            out += val * val;\n        }\n        \n        if (pn > bMax) { \n            val = (pn - bMax);\n            out += val * val;\n        }\n        \n        sq += out;\n    }\n    \n    return sq;\n};\n\npc.BoundingBox.prototype.intersectsBoundingSphere = function (sphere) {\n    var sq = this._distanceToBoundingSphereSq(sphere);\n    if (sq <= sphere.radius * sphere.radius) {\n        return true;\n    }\n    \n    return false;    \n};\n\n\n","// audio-analyser.js\nvar AudioAnalyser = pc.createScript('audioAnalyser');\n\nAudioAnalyser.attributes.add('fftsize', {\n    type: 'number'\n});\n\nAudioAnalyser.prototype.assignSoundSlot = function (soundSlot) {\n    if (soundSlot) {\n        soundSlot.setExternalNodes(this.analyser);\n\n        var minDb = this.analyser.minDecibels;\n        var maxDb = this.analyser.maxDecibels;\n\n        this.freqScale = 1 / (maxDb - minDb);\n        this.freqOffset = minDb;\n        \n        this.soundSlot = soundSlot;\n    }\n};\n\n// initialize code called once per entity\nAudioAnalyser.prototype.initialize = function() {\n    var context = this.app.systems.sound.context;\n    \n    // create analyser node and set up\n    this.analyser = context.createAnalyser();\n    this.analyser.smoothingTimeConstant = 0.6;\n    this.analyser.fftSize = this.fftsize;\n\n    this.freqData = new Float32Array(this.fftsize/2);\n    \n    this.freqScale = 0; \n    this.freqOffset = 0;\n\n    this.soundSlot = null;\n};\n\n\n// update code called every frame\nAudioAnalyser.prototype.update = function(dt) {\n    this.analyser.getFloatFrequencyData(this.freqData);\n};\n\n\n\n\n","// render-layer.js\nvar RenderLayer = pc.createScript('renderLayer');\n\nRenderLayer.attributes.add('layer', {\n    type: 'number', \n    default: 14, \n    title: 'Layer', \n    description: 'Has to be between a value of 3 and 14. 3 being the highest priority'\n});\n\n// initialize code called once per entity\nRenderLayer.prototype.initialize = function() {      \n    this.on('attr:layer', function (value, prev) {\n        this._setLayer(value);\n    });\n    \n    this._setLayer(this.layer);\n};\n\n\nRenderLayer.prototype._setLayer = function(layer) {\n    layer = pc.math.clamp(layer, 0, 15);\n    var i = 0;\n    \n    var instances = pc.util.getMeshInstances(this.entity);\n        if (instances) {\n            for (i = 0; i < instances.length; ++i) {\n                instances[i].layer = layer;\n            }\n        }\n    \n    var particleSystem = this.entity.particlesystem;\n    if (particleSystem && particleSystem.emitter.meshInstance) {\n        particleSystem.emitter.meshInstance.layer = layer;\n    }\n    \n    var element = this.entity.element;\n    if (element) {\n        if (element._text && element._text._meshInstance) {\n            element._text._meshInstance.layer = layer;\n        }\n        \n        if (element._image) {\n            instances = element._image._model.meshInstances;\n            if (instances) {\n                for (i = 0; i < instances.length; ++i) {\n                    instances[i].layer = layer;\n                }\n            }        \n        }  \n    }\n};\n\n\n","// shape-world.js\nvar ShapeWorld = pc.createScript('shapeWorld');\n\n// initialize code called once per entity\nShapeWorld.prototype.initialize = function() {\n    // Keep an array of all the entities we can pick at\n    this._pickableEntities = [];\n    this._pickableShapes = [];\n    \n    // Register events for when pickable entities are created\n    this.app.on(\"shapeworld:add\", this.addItem, this);\n    this.app.on(\"shapeworld:remove\", this.removeItem, this);\n    \n    // Create a global \n    this.app.shapeWorld = this;\n};\n\n\nShapeWorld.hitPoint = new pc.Vec3();\nShapeWorld.vecBetween = new pc.Vec3();\n\nShapeWorld.prototype.raycast = function (ray, filterFunc, intersectPosition, length) {    \n    //console.log(\"== Start Shape Raycast ==\");\n       \n    var hitPoint = ShapeWorld.hitPoint;\n    var vecBetween = ShapeWorld.vecBetween;\n    \n    var closestDistance = length || Infinity;\n    var hitEntity = null;\n    \n    // Test the ray against all the objects registered to this picker\n    for (var i = 0; i < this._pickableShapes.length; ++i) {\n        var pickableShape = this._pickableShapes[i];\n        var entity = this._pickableEntities[i];\n        \n        if (!filterFunc || filterFunc(entity) && entity.enabled) {\n            if (pickableShape.intersectsRay(ray, hitPoint)) {\n                var distance = ray.origin.distance(hitPoint);\n                \n                if (distance < closestDistance) {\n                    closestDistance = distance;\n                    hitEntity = entity;\n                    \n                    if (intersectPosition) {\n                        intersectPosition.copy(hitPoint);\n                    }\n                }\n\n                //console.log(this._pickableEntities[i].name + \" \" + distanceSq.toString());\n            }\n        }\n    }  \n\n    return hitEntity;\n};\n\n\nShapeWorld.prototype.containsPoint = function (point, filterFunc) {  \n    //console.log(\"== Start Contains Point ==\");\n\n    var hitEntity = null;\n    for (var i = 0; i < this._pickableShapes.length; ++i) {\n        var pickableShape = this._pickableShapes[i];\n        var entity = this._pickableEntities[i];\n        \n        if (!filterFunc || filterFunc(entity) && entity.enabled) {\n            if (pickableShape.containsPoint(point)) {\n                hitEntity = entity;\n                break;\n            }\n\n            //console.log(this._pickableEntities[i].name);\n        }\n    }\n    \n    return hitEntity;\n};\n\n\nShapeWorld.prototype.intersectsSphere = function (sphere, filterFunc) {  \n    //console.log(\"== Start Intersects Sphere ==\");\n\n    var hitEntity = null;\n    for (var i = 0; i < this._pickableShapes.length; ++i) {\n        var pickableShape = this._pickableShapes[i];\n        var entity = this._pickableEntities[i];\n        \n        if (!filterFunc || filterFunc(entity) && entity.enabled) {\n            if (pickableShape.intersectsBoundingSphere(sphere)) {\n                hitEntity = entity;\n                break;\n            }\n\n            //console.log(this._pickableEntities[i].name);\n        }\n    }\n    \n    return hitEntity;\n};\n\n\nShapeWorld.prototype.addItem = function (entity, shape) {\n    if (entity) {\n        this._pickableEntities.push(entity);\n        this._pickableShapes.push(shape);\n    }\n};\n\n        \nShapeWorld.prototype.removeItem = function (entity) {\n    var i = this._items.indexOf(entity);\n    if (i >= 0) {\n        this._pickableEntities.splice(i, 1);\n        this._pickableShapes.splice(i, 1);\n    }\n};\n\n","// shape.js\n// More information here: http://developer.playcanvas.com/en/api/pc.aabbShape.html\nvar Shape = pc.createScript('shape');\n\nShape.attributes.add('type', { type: 'string', enum: [{ 'Sphere': 'sphere' }, { 'AABB': 'aabb' }, { 'OBB': 'obb' }], default: 'sphere', title: 'Type'});\n\nShape.attributes.add('childOfActualEntity', {\n    type: 'boolean', \n    default: false, \n    title: 'Child Of Actual Entity', \n    description: 'Tick if the shape is a child of the actual entity object'\n});\n\nShape.attributes.add('keepUpdating', {\n    type: 'boolean', \n    default: false, \n    title: 'Keep Updating', \n    description: 'Update the shape data every frame (only toggle if the entity moves as can be expensive)'\n});\n\nShape.attributes.add('addToObject', { type: 'string', enum: [{'Global': 'app'}, {'Actual Entity': 'actualEntity'}], title: 'Add to Object', default: 'app'});\n\n\n// initialize code called once per entity\nShape.prototype.initialize = function() {\n    this._halfExtents = this.entity.getLocalScale().clone().scale(0.5);\n\n    switch (this.type) {\n        case 'sphere': \n            // Create the sphere and use the largest scale dimension for the radius\n            this._shape = new pc.BoundingSphere(this.entity.getPosition().clone(), Math.max(this._halfExtents.x, Math.max(this._halfExtents.y, this._halfExtents.z)));\n            break;\n            \n        case 'aabb':\n            this._shape = new pc.BoundingBox(this.entity.getPosition().clone(), this._halfExtents);\n            break;\n            \n        case 'obb': \n            this._worldTransform = new pc.Mat4().setTRS(this.entity.getPosition(), this.entity.getRotation(), pc.util.DEFAULT_VEC3_1);\n            this._shape = new pc.OrientatedBox(this._halfExtents, this._worldTransform);\n            break;\n    }\n    \n//     // Hide the model as it's just there to aid placement in the editor\n//     if (this.entity.model) {\n//         var instances = this.entity.model.meshInstances;\n//         if (instances) {\n//             for (var i = 0; i < instances.length; ++i) {\n//                 instances[i].visible = false;\n//             }\n//         }\n//     }\n};\n\n\nShape.prototype.postInitialize = function() {\n    this._getAddToObject().fire(\"shapeworld:add\", this._getActualEntity(), this._shape);\n    this.on('state', this._onStateChanged, this);\n};\n\n\nShape.prototype.update = function(dt) {  \n    if (this.keepUpdating) {\n        switch (this.type) {\n            case 'sphere': \n                this._shape.center.copy(this.entity.getPosition());\n                break;\n\n            case 'aabb':\n                this._shape.center.copy(this.entity.getPosition());\n                break;\n\n            case 'obb': \n                this._worldTransform.setTRS(this.entity.getPosition(), this.entity.getRotation(), pc.util.DEFAULT_VEC3_1);\n                this._shape.worldTransform = this._worldTransform;\n                break;\n        }\n    }\n};\n\n\nShape.prototype._onStateChanged = function (enabled) {\n    var addToObject = this._getAddToObject();\n    if (enabled) {\n        addToObject.fire(\"shapeworld:add\", this._getActualEntity(), this._shape);    \n    } else {\n        addToObject.fire(\"shapeworld:remove\", this._getActualEntity(), this._shape);    \n    }\n};\n\n\nShape.prototype._getAddToObject = function () {\n    switch(this.addToObject) {\n        case 'app':\n            return this.app;\n            \n        case 'actualEntity':\n            return this._getActualEntity();\n            \n        default:\n            return null;\n    }\n};\n\n\nShape.prototype._getActualEntity = function () {\n    return this.childOfActualEntity ? this.entity.parent : this.entity;\n};\n\n","// button.js\nvar Button = pc.createScript('button');\n\nButton.attributes.add('coolDownTime', {type: 'number', default: 1, title: 'Cool Down Time (secs)'});\n\nButton.STATE_IDLE = 'IDLE';\nButton.STATE_ACTIVATED = 'ACTIVATED';\n\n// initialize code called once per entity\nButton.prototype.initialize = function() {\n    this.entity.on('object:interact', this._onInteract, this);\n    this.entity.on('object:onhover', this._onHover, this);\n    this.entity.on('object:offhover', this._offHover, this);\n    \n    this._state = Button.STATE_IDLE;\n    \n    this._secsSinceActivation = 0;\n};\n\n\n// update code called every frame\nButton.prototype.update = function(dt) {\n    switch (this._state) {\n        case Button.STATE_IDLE:\n            break;\n            \n        case Button.STATE_ACTIVATED:\n            this._secsSinceActivation += dt;\n            if (this._secsSinceActivation >= this.coolDownTime) {\n                this.entity.fire('button:reseted');\n                this._state = Button.STATE_IDLE;\n            }\n            break;\n    }\n};\n\n\nButton.controllerMovementDirection = new pc.Vec2();\nButton.DOT_THRESHOLD = -0.3;\n\nButton.prototype._onInteract = function (controller) {\n    if (this._isIdle()) {\n        // Check direction of movement the button should only work in \n        // a direction range to the button\n \n        // Add fallback for controllers that don't have physical presence in the world\n        var controllerMovementDirection = Button.controllerMovementDirection.copy(this.entity.up);\n        controllerMovementDirection.scale(-1);\n        if (controller.getMovementDirection) {\n            controllerMovementDirection.copy(controller.getMovementDirection());\n            loadScene(\"Main 2\", { hierarchy: true, settings: true });  \n        }\n        \n        var dot = controllerMovementDirection.dot(this.entity.up);\n        if (dot <= Button.DOT_THRESHOLD) {       \n            this.entity.fire('button:activated');\n            this._secsSinceActivation = 0;\n            this._state = Button.STATE_ACTIVATED;\n\n            this._removeHighlight(this.entity);\n        }\n    }\n};\n\n\nButton.prototype._onHover = function () {\n    if (this._isIdle()) {\n        this._addHighlight(this.entity);\n    }\n};\n\n\nButton.prototype._offHover = function () {\n    if (this._isIdle()) {\n        this._removeHighlight(this.entity);\n    }\n};\n\n\nButton.prototype._isIdle = function () {\n    return this._state == Button.STATE_IDLE;    \n};\n\n\nButton.prototype._addHighlight = function (entity) {\n    pc.util.setEntityEmissive(entity, pc.util.HIGHLIGHT_ENTITY_GREEN); \n    \n    var children = entity.children;\n    for (var i = 0; i < children.length; ++i) {\n        this._addHighlight(children[i]);\n    }\n};\n\n\nButton.prototype._removeHighlight = function (entity) {\n    pc.util.setEntityEmissive(entity, pc.util.HIGHLIGHT_ENTITY_DEFAULT);    \n    \n    var children = entity.children;\n    for (var i = 0; i < children.length; ++i) {\n        this._removeHighlight(children[i]);\n    }\n};\n\n","// controller-trigger.js\nvar ControllerTrigger = pc.createScript('controllerTrigger');\n\nControllerTrigger.attributes.add('coolDownTime', {type: 'number', default: 1, title: 'Cool Down Time (secs)'});\n\nControllerTrigger.STATE_IDLE = 'IDLE';\nControllerTrigger.STATE_ACTIVATED = 'ACTIVATED';\n\n// initialize code called once per entity\nControllerTrigger.prototype.initialize = function() {\n    this.entity.on('object:interact', this._onInteract, this);\n    this.entity.on('object:onhover', this._onHover, this);\n    this.entity.on('object:offhover', this._offHover, this);\n    \n    this._state = ControllerTrigger.STATE_IDLE;\n    \n    this._secsSinceActivation = 0;\n};\n\n\n// update code called every frame\nControllerTrigger.prototype.update = function(dt) {\n    switch (this._state) {\n        case ControllerTrigger.STATE_IDLE:\n            break;\n            \n        case ControllerTrigger.STATE_ACTIVATED:\n            this._secsSinceActivation += dt;\n            if (this._secsSinceActivation >= this.coolDownTime) {\n                this.entity.fire('controllertrigger:reseted');\n                this._state = ControllerTrigger.STATE_IDLE;\n            }\n            break;\n    }\n};\n\n\nControllerTrigger.controllerMovementDirection = new pc.Vec2();\nControllerTrigger.DOT_THRESHOLD = -0.3;\n\nControllerTrigger.prototype._onInteract = function (controller) {\n    if (this._isIdle()) {     \n        this.entity.fire('controllertrigger:activated');\n        this._secsSinceActivation = 0;\n        this._state = ControllerTrigger.STATE_ACTIVATED;\n\n        this._removeHighlight(this.entity);\n    }\n};\n\n\nControllerTrigger.prototype._onHover = function () {\n    if (this._isIdle()) {\n        this._addHighlight(this.entity);\n    }\n};\n\n\nControllerTrigger.prototype._offHover = function () {\n    if (this._isIdle()) {\n        this._removeHighlight(this.entity);\n    }\n};\n\n\nControllerTrigger.prototype._isIdle = function () {\n    return this._state == ControllerTrigger.STATE_IDLE;    \n};\n\n\nControllerTrigger.prototype._addHighlight = function (entity) {\n    pc.util.setEntityEmissive(entity, pc.util.HIGHLIGHT_ENTITY_GREEN); \n    \n    var children = entity.children;\n    for (var i = 0; i < children.length; ++i) {\n        this._addHighlight(children[i]);\n    }\n};\n\n\nControllerTrigger.prototype._removeHighlight = function (entity) {\n    pc.util.setEntityEmissive(entity, pc.util.HIGHLIGHT_ENTITY_DEFAULT);    \n    \n    var children = entity.children;\n    for (var i = 0; i < children.length; ++i) {\n        this._removeHighlight(children[i]);\n    }\n};\n\n","// door-handle.js\nvar DoorHandle = pc.createScript('doorHandle');\n\nDoorHandle.attributes.add('side', { type: 'string', enum: [{ 'left': 'left' }, { 'right': 'right' }], default: 'left', title: 'Side'});\nDoorHandle.attributes.add('numberShakes', {type: 'number', default: 1, title: 'Number of Shakes'});\nDoorHandle.attributes.add('animLength', {type: 'number', default: 1, title: 'Animation Length (secs)'});\nDoorHandle.attributes.add('rotateRange', {type: 'number', default: 0, title: '', description: 'Rotate Range (degress)'});\n\n// initialize code called once per entity\nDoorHandle.prototype.initialize = function() {\n    pc.util.initSoundSlotAssets(this.app, this.entity);\n    \n    this.secsSinceActivation = 0;\n    \n    this.entity.on('controllertrigger:activated', this._onActivated, this);\n};\n\n\nDoorHandle.SIN_SCALE = 1.3;\n\n// update code called every frame\nDoorHandle.prototype.update = function(dt) {\n    var t = Math.min(this.secsSinceActivation/this.animLength, 1);\n    var sin = pc.math.clamp(Math.sin(t * (Math.PI * this.numberShakes)) * DoorHandle.SIN_SCALE, -1, 1);\n    var angle = sin * this.rotateRange;\n    \n    if (this.side == 'right') {\n        angle *= -1;\n    }\n    \n    this.entity.setLocalEulerAngles(0, 0, angle);\n    \n    this.secsSinceActivation += dt;\n};\n\n\nDoorHandle.prototype._onActivated = function () {\n    this.secsSinceActivation = 0;\n    pc.util.playSoundSlot(this.entity, 'locked-room-doors');\n};\n\n","// grabbable.js\nvar Grabbable = pc.createScript('grabbable');\n\nGrabbable.STATE_IDLE = 'IDLE';\nGrabbable.STATE_RESET_TELEPORT_OUT = 'RESET_TELEPORT_OUT';\nGrabbable.STATE_RESET_TELEPORT_IN = 'RESET_TELEPORT_IN';\nGrabbable.STATE_IN_USE_WITH = 'IN_USE_WITH';\n\n// initialize code called once per entity\nGrabbable.prototype.initialize = function() {\n    this.entity.on('object:onhover', this._onHover, this);\n    this.entity.on('object:offhover', this._offHover, this);\n    \n    this.entity.on('object:hold', this._onHold, this);\n    this.entity.on('object:release', this._onRelease, this);\n\n    this._controller = null;     \n    this._grabRotationOffset = new pc.Quat();\n    \n    this._wasGrabbed = false;\n    this._secsSinceReleased = 0;\n    this._yPositionWhenStopped = 0;\n    \n    this._startLocalTransform = this.entity.getLocalTransform().clone();\n    \n    this._state = Grabbable.STATE_IDLE;\n    this._secsSinceStateChange = 0;\n    \n    this._prevPosition = new pc.Vec3().copy(this.entity.getPosition());\n    this._releasedVelocity = new pc.Vec3();\n    \n    // For the 'real' position of the grabbable with out the bob offset so we can \n    // apply velocity etc without the offset affecting the position\n    this._positionWithoutBob = new pc.Vec3().copy(this.entity.getPosition());\n};\n\n\nGrabbable.RESET_TIMEOUT = 10;\nGrabbable.BOB_HEIGHT = 0.1;\nGrabbable.BOB_ANIM_LENGTH = 4;\n\n// update code called every frame\nGrabbable.prototype.postUpdate = function(dt) {\n    this._secsSinceStateChange += dt;\n    \n    switch(this._state) {\n        case Grabbable.STATE_IDLE:\n            this._updateStateIdle(dt);\n            break;\n            \n        case Grabbable.STATE_RESET_TELEPORT_OUT:\n            this._updateStateResetTeleportOut(dt);\n            break;\n            \n        case Grabbable.STATE_RESET_TELEPORT_IN:\n            this._updateStateResetTeleportIn(dt);\n            break;\n    }\n};\n\n\nGrabbable.prototype._changeState = function (state) {\n    this._secsSinceStateChange = 0;\n    this._state = state;\n};\n\n\nGrabbable.DECELERATION_TIME = 1;\nGrabbable.DECELERATION_CURVE = 0.9;\nGrabbable.DELAY_BEFORE_BOB = 0.3;\n\nGrabbable.velocity = new pc.Vec3();\nGrabbable.newPosition = new pc.Vec3();\nGrabbable.updatedRotation = new pc.Quat();\n\nGrabbable.prototype._updateStateIdle = function (dt) {\n    var newRotation = Grabbable.updatedRotation;    \n    var velocity = Grabbable.velocity;\n    var position = Grabbable.newPosition;\n    \n    this._prevPosition.copy(this.entity.getPosition());\n    \n    if (this._controller) {\n        // TODO Have I got this backwards? Should the controller do this on the update?\n        this._controller.updateAttachment(this.entity, this._grabRotationOffset);\n    } else {\n        if (this._wasGrabbed) {                        \n            this._secsSinceReleased += dt;       \n                        \n            var t = Math.min(this._secsSinceReleased / Grabbable.DECELERATION_TIME, 1);\n            velocity.lerp(this._releasedVelocity, pc.util.DEFAULT_VEC3_0, pc.util.unitCurve(t, Grabbable.DECELERATION_CURVE));\n            velocity.scale(dt);\n                        \n            // Change the 'real' position with the velocity\n            if (this._secsSinceReleased <= Grabbable.DECELERATION_TIME) {\n                this._positionWithoutBob.add(velocity);\n            }\n            \n            position.copy(this._positionWithoutBob);\n            \n            // Apply the bob offset\n            if (this._secsSinceReleased >= Grabbable.DELAY_BEFORE_BOB) {\n                var k = (((this._secsSinceReleased - Grabbable.DELAY_BEFORE_BOB) % Grabbable.BOB_ANIM_LENGTH) / Grabbable.BOB_ANIM_LENGTH) * (2 * Math.PI);\n                var yOffset = Math.sin(k) * Grabbable.BOB_HEIGHT;     \n                position.y += yOffset;\n            }\n            \n            this.entity.setPosition(position);\n            \n            if (this._secsSinceReleased >= Grabbable.RESET_TIMEOUT) {\n                this._removeHighlight(this.entity);\n                this._changeState(Grabbable.STATE_RESET_TELEPORT_OUT);\n            }            \n        }\n    }\n};\n\n\nGrabbable.TELEPORT_ANIM_LENGTH = 0.2;\nGrabbable.SMALLEST_SCALE = new pc.Vec3(0.001, 0.001, 0.001);\nGrabbable.updatedScale = new pc.Vec3();\n\nGrabbable.prototype._updateStateResetTeleportOut = function (dt) {\n    var t = Math.min(this._secsSinceStateChange / Grabbable.TELEPORT_ANIM_LENGTH, 1);\n    var scale = Grabbable.updatedScale;\n    scale.lerp(this._startLocalTransform.getScale(), Grabbable.SMALLEST_SCALE, t);\n    this.entity.setLocalScale(scale);\n    \n    if (this._secsSinceStateChange >= Grabbable.TELEPORT_ANIM_LENGTH) {\n        this.entity.setLocalPosition(this._startLocalTransform.getTranslation());\n        this.entity.setLocalEulerAngles(this._startLocalTransform.getEulerAngles());\n        \n        this._changeState(Grabbable.STATE_RESET_TELEPORT_IN);\n    }\n};\n\n\nGrabbable.prototype._updateStateResetTeleportIn = function (dt) {\n    var t = Math.min(this._secsSinceStateChange / Grabbable.TELEPORT_ANIM_LENGTH, 1);\n    var scale = Grabbable.updatedScale;\n    scale.lerp(Grabbable.SMALLEST_SCALE, this._startLocalTransform.getScale(), t);\n    this.entity.setLocalScale(scale);\n    \n    if (this._secsSinceStateChange >= Grabbable.TELEPORT_ANIM_LENGTH) {\n        this._secsSinceReleased = 0;\n        this._wasGrabbed = false;\n        \n        this._changeState(Grabbable.STATE_IDLE);\n    }            \n};\n\nGrabbable.prototype._onHover = function () {\n    if (this._isIdle()) {\n        this._addHighlight(this.entity);\n    }\n};\n\n\nGrabbable.prototype._offHover = function () {\n    if (this._isIdle()) {\n        this._removeHighlight(this.entity);\n    }\n};\n\n\nGrabbable.prototype._onHold = function (controller) {\n    if (this._isIdle()) {\n        // This is so we can pass the object from one hand to another\n        if (this._controller) {\n            this._controller.detach(this.entity);\n        }\n\n        this._controller = controller;\n        this._grabRotationOffset.copy(controller.getAttachRotation()).invert().mul(this.entity.getRotation());\n\n        controller.attach(this.entity);\n        this._removeHighlight(this.entity);\n    }\n};\n\n\nGrabbable.RELEASE_VELOCITY_FACTOR = 10;\nGrabbable.MAX_RELEASE_VELOCITY = 2.5;\n\nGrabbable.prototype._onRelease = function (controller) {\n    if (this._isIdle()) {\n        if (this._controller == controller) {\n            this._controller.detach(this.entity);\n            this._controller = null;\n\n            this._secsSinceReleased = 0;\n            this._wasGrabbed = true; \n            \n            // Give a little bit of momentum based on last frame position\n            this._releasedVelocity.sub2(this.entity.getPosition(), this._prevPosition).scale(Grabbable.RELEASE_VELOCITY_FACTOR); \n            var l = this._releasedVelocity.length();\n            if (l > Grabbable.MAX_RELEASE_VELOCITY) {\n                this._releasedVelocity.normalize().scale(Grabbable.MAX_RELEASE_VELOCITY);\n            }\n            \n            this._positionWithoutBob.copy(this.entity.getPosition());\n        } \n    }\n};\n    \n   \nGrabbable.prototype._hasMoved = function() {\n    return this._wasGrabbed;\n};\n\n\nGrabbable.prototype._isIdle = function () {\n    return this._state == Grabbable.STATE_IDLE;    \n};\n\n\nGrabbable.prototype._addHighlight = function (entity) {\n    pc.util.setEntityEmissive(entity, pc.util.HIGHLIGHT_ENTITY_GREEN); \n    \n    var children = entity.children;\n    for (var i = 0; i < children.length; ++i) {\n        this._addHighlight(children[i]);\n    }\n};\n\n\nGrabbable.prototype._removeHighlight = function (entity) {\n    pc.util.setEntityEmissive(entity, pc.util.HIGHLIGHT_ENTITY_DEFAULT);    \n    \n    var children = entity.children;\n    for (var i = 0; i < children.length; ++i) {\n        this._removeHighlight(children[i]);\n    }\n};\n\n","// hifi.js\nvar Hifi = pc.createScript('hifi');\n\nHifi.attributes.add('rotateSpeed', {type: 'number', default: 10, title: 'Rotate Speed'});\nHifi.attributes.add('leftSpeakerEntity', {type: 'entity', title: 'Left Speaker Entity'});\nHifi.attributes.add('rightSpeakerEntity', {type: 'entity', title: 'Right Speaker Entity'});\nHifi.attributes.add('idleNeedleRotation', {type: 'number', default: 0, title: 'Idle Needle Rotation'});\nHifi.attributes.add('startNeedleRotation', {type: 'number', default: 0, title: 'Start Needle Rotation'});\nHifi.attributes.add('endNeedleRotation', {type: 'number', default: 0, title: 'End Needle Rotation'});\n\n// initialize code called once per entity\nHifi.prototype.initialize = function() {    \n    pc.util.initSoundSlotAssets(this.app, this.entity);\n        \n    this.entity.on('interactswith:attachobject', this._onAttachObject, this);\n    this.entity.on('interactswith:detachobject', this._onDetachObject, this);\n        \n    this._attachPointEntity = this.entity.findByName('Attach Point');\n    this._interactsWith = this.entity.script.interactsWith;\n    \n    this._currentNeedleRotation = this.idleNeedleRotation;\n    this._rangeNeedleRotation = this.endNeedleRotation - this.startNeedleRotation;\n    \n    this._soundSlot = null;\n    \n    this._speakerCones = [];    \n    \n    var i = 0;\n    var child = null;\n    var children = this.leftSpeakerEntity.children;\n    for (i = 0; i < children.length; ++i) {\n        childScript = children[i].script;\n        if (childScript && childScript.speakerCone) {\n            this._speakerCones.push(childScript.speakerCone);\n        }\n    }\n    \n    children = this.rightSpeakerEntity.children;\n    for (i = 0; i < children.length; ++i) {\n        childScript = children[i].script;\n        if (childScript && childScript.speakerCone) {\n            this._speakerCones.push(childScript.speakerCone);\n        }\n    }\n    \n    this._needleModel = this.entity.findByName('Needle Model');\n};\n\n\nHifi.VOLUME_CAP = 55;\nHifi.NEEDLE_LERP_FACTOR = 12;\nHifi.conePosition = new pc.Vec3();\n\n// update code called every frame\nHifi.prototype.update = function(dt) {\n    this._attachPointEntity.rotateLocal(0, this.rotateSpeed * dt, 0);\n    \n    var targetNeedleRotation = this.idleNeedleRotation;\n    \n    if (this._soundSlot !== null) {\n        var i = 0; \n        \n        var analyser = this.entity.script.audioAnalyser;\n        var data = analyser.freqData;\n        var totalVolume = 0;\n        \n        for (i = 0; i < data.length; ++i) {\n            var value = (data[i] - analyser.freqOffset) * analyser.freqScale;\n            totalVolume += value > 0 ? value : 0;\n        }\n        \n        var v = Math.min(totalVolume, Hifi.VOLUME_CAP) / Hifi.VOLUME_CAP; \n        for (i = 0; i < this._speakerCones.length; ++i) {\n            this._speakerCones[i].applyVolume(v);\n        }\n        \n        // Move the needle head\n        if (this._soundSlot.instances && this._soundSlot.instances[0]) {\n            // There should only be one slot playing so just grab the first sound slot\n            var currentTime = this._soundSlot.instances[0].currentTime;\n            var duration = this._soundSlot.instances[0].duration;\n            \n            if (duration > 0) {\n                var t = currentTime / duration;            \n                targetNeedleRotation = (this._rangeNeedleRotation * t) + this.startNeedleRotation;\n            }\n        }\n    }\n    \n    this._currentNeedleRotation = pc.math.lerp(this._currentNeedleRotation, targetNeedleRotation, Math.min(Hifi.NEEDLE_LERP_FACTOR * dt, 1));\n    this._needleModel.setLocalEulerAngles(0, this._currentNeedleRotation, 0);\n};\n\n\nHifi.prototype._onAttachObject = function (interactswith) {\n    var entity = interactswith.getHeldEntity();\n    var vinyl = entity.script ? entity.script.vinyl : null;\n    var analyser = this.entity.script.audioAnalyser;\n\n    if (vinyl) {\n        this._soundSlot = pc.util.playSoundSlot(this.entity, vinyl.soundSlotName);\n        if (this._soundSlot) {\n            analyser.assignSoundSlot(this._soundSlot);\n        }\n    }\n};\n\n\nHifi.prototype._onDetachObject = function (interactswith) {\n    if (this._soundSlot) {\n        pc.util.stopSoundSlot(this.entity, this._soundSlot.name);\n        this._soundSlot = null; \n    }\n    \n    for (var i = 0; i < this._speakerCones.length; ++i) {\n        this._speakerCones[i].applyVolume(0);\n    }\n};\n\n","// interacts-with.js\nvar InteractsWith = pc.createScript('interactsWith');\n\nInteractsWith.attributes.add('presetEntity', {\n    type: 'entity', \n    title: 'Preset Entity', \n    description: 'Entity to be attached to this on start'\n});\n\nInteractsWith.attributes.add('compatibleTag', {\n    type: 'string', \n    default: '', \n    title: 'Compatible Tag', \n    description: 'Tag that this object can interact with'\n});\n\nInteractsWith.STATE_IDLE = 'IDLE';\nInteractsWith.STATE_IN_USE = 'IN_USE';\n\n\nInteractsWith.prototype.attach = function (entity) {\n    this._heldEntity = entity;\n    this.entity.fire('interactswith:attachobject', this);\n    this._state = InteractsWith.STATE_IN_USE;\n};\n\n\nInteractsWith.prototype.detach = function (entity) {\n    this.entity.fire('interactswith:detachobject', this);\n    this._heldEntity = null;\n    this._state = InteractsWith.STATE_IDLE;\n};\n\n\nInteractsWith.prototype.getAttachPosition = function () {\n    return this._attachPointEntity.getPosition();\n};\n\n\nInteractsWith.prototype.getAttachRotation = function () {\n    return this._attachPointEntity.getRotation();\n};\n\n\nInteractsWith.prototype.updateAttachment = function (entity, rotationOffset) {\n    entity.setPosition(this._attachPointEntity.getPosition());\n    entity.setRotation(this._attachPointEntity.getRotation());    \n};\n\n\nInteractsWith.prototype.getHeldEntity = function () {\n    return this._heldEntity;    \n};\n\n\n// initialize code called once per entity\nInteractsWith.prototype.initialize = function() {\n    this._heldEntity = null;\n    this._state = InteractsWith.STATE_IDLE;\n    \n    this.entity.on('object:onhover', this._onHover, this);\n    this.entity.on('object:offhover', this._offHover, this);\n    \n    this.entity.on('object:attemptuse', this._onAttemptUse, this);\n    \n    this._attachPointEntity = this.entity.findByName('Attach Point');\n};\n\n\nInteractsWith.prototype.postInitialize = function() {\n    if (this.presetEntity) {\n        if (this._isCompatible(this.presetEntity)) {\n            this.presetEntity.fire('object:hold', this);\n        }\n    }    \n};\n\n\n// update code called every frame\nInteractsWith.prototype.update = function(dt) {\n    switch(this._state) {\n        case InteractsWith.STATE_IDLE: \n            this._updateStateIdle(dt);\n            break;\n            \n        case InteractsWith.STATE_IN_USE:\n            this._updateStateInUse(dt);\n            break;\n    }\n};\n\n\nInteractsWith.prototype._updateStateIdle = function (dt) {\n    \n};\n\n\nInteractsWith.prototype._updateStateInUse = function (dt) {\n    \n};\n\n\nInteractsWith.prototype._onHover = function (controller) {\n    if (this._isIdle()) {\n        var otherEntity = controller.getHeldEntity();\n        if (otherEntity) {\n            if (this._isCompatible(otherEntity)) {\n                this._addHighlight(this.entity, true);\n            } else {\n                this._addHighlight(this.entity, false);\n            }\n        } else {\n            this._removeHighlight(this.entity);           \n        }\n    }\n};\n\n\nInteractsWith.prototype._offHover = function (controller) {\n    if (this._isIdle()) {\n        this._removeHighlight(this.entity);\n    }\n};\n\n\nInteractsWith.prototype._onAttemptUse = function (controller) {\n    if (this._isIdle()) {\n        var otherEntity = controller.getHeldEntity();\n        if (this._isCompatible(otherEntity)) {\n            otherEntity.fire('object:hold', this);\n        } else {\n            // We have responsibility for the held entity in this case\n            otherEntity.fire('object:release', controller);\n        }\n        this._removeHighlight(this.entity);\n    }\n};\n\n\nInteractsWith.prototype._isIdle = function () {\n    return this._state == InteractsWith.STATE_IDLE;    \n};\n\n\nInteractsWith.prototype._isCompatible = function (entity) {\n    if (entity && entity.tags.has(this.compatibleTag)) {\n        return true;\n    }\n    \n     return false;\n};\n\n\nInteractsWith.prototype._addHighlight = function (entity, compatible) {\n    if (compatible) {\n        pc.util.setEntityEmissive(entity, pc.util.HIGHLIGHT_ENTITY_GREEN); \n    } else {\n        pc.util.setEntityEmissive(entity, pc.util.HIGHLIGHT_ENTITY_RED);\n    }\n    \n    var children = entity.children;\n    for (var i = 0; i < children.length; ++i) {\n        this._addHighlight(children[i], compatible);\n    }\n};\n\n\nInteractsWith.prototype._removeHighlight = function (entity) {\n    pc.util.setEntityEmissive(entity, pc.util.HIGHLIGHT_ENTITY_DEFAULT);    \n    \n    var children = entity.children;\n    for (var i = 0; i < children.length; ++i) {\n        this._removeHighlight(children[i]);\n    }\n};\n\n","// locator-rings.js\nvar LocatorRings = pc.createScript('locatorRings');\n\nLocatorRings.attributes.add('animLength', {type: 'number', default: 1, title: 'Anim Length (secs)'});\nLocatorRings.attributes.add('loopGap', {type: 'number', default: 1, title: 'Loop Gap (secs)'});\nLocatorRings.attributes.add('yOffsetCurve', {type: 'curve', title: 'Y Offset Curve'});\nLocatorRings.attributes.add('scaleOffsetCurve', {type: 'curve', title: 'Scale Offset Curve'});\nLocatorRings.attributes.add('alphaCurve', {type: 'curve', title: 'Alpha Curve'});\n\n// initialize code called once per entity\nLocatorRings.prototype.initialize = function() {\n    this._rings = this.entity.findByTag('locator-ring');\n    this._ringCount = this._rings.length;\n    this._time = 0;\n    \n    this._targetScaleY = 1;\n    this._setScaleY(0.001);\n    \n    this.on('state', this._onStateChanged, this);\n};\n\nLocatorRings.ringPosition = new pc.Vec3();\nLocatorRings.SCALE_LERP_FACTOR = 8;\n\n// update code called every frame\nLocatorRings.prototype.update = function(dt) {\n    var t = this._time / this.animLength;\n    var ringPosition = LocatorRings.ringPosition;\n    var ringScale = LocatorRings.ringScale;\n    \n    if (t <= 1) {\n        for (var i = 0; i < this._ringCount; ++i) {\n            var lerpOffset = (1 / this._ringCount) * i;\n            var lerp = (t + lerpOffset) % 1;\n            var ring = this._rings[i];\n\n            ringPosition.copy(ring.getLocalPosition());\n            ringPosition.y = this.yOffsetCurve.value(lerp);\n            ring.setLocalPosition(ringPosition);\n\n            var scale = this.scaleOffsetCurve.value(lerp);\n            ring.setLocalScale(scale, scale, scale);\n\n            pc.util.setEntityAlpha(ring, this.alphaCurve.value(lerp));\n        }\n    }\n    \n    this._time = (this._time + dt) % (this.animLength + this.loopGap);\n    \n    var entityScale = this.entity.getLocalScale();\n    this._setScaleY(pc.math.lerp(entityScale.y, this._targetScaleY, Math.min(LocatorRings.SCALE_LERP_FACTOR * dt, 1)));\n};\n\n\nLocatorRings.prototype._onStateChanged = function (enabled) {\n    if (enabled) {\n        this._setScaleY(0.001);\n        this._targetScaleY = 1;\n    } \n};\n\n\nLocatorRings.prototype._setScaleY = function (value) {\n    var entityScale = this.entity.getLocalScale();\n    entityScale.y = value;\n    this.entity.setLocalScale(entityScale);    \n};\n\n\n","// look-camera.js\nvar LookCamera = pc.createScript('lookCamera');\n\nLookCamera.attributes.add('mouseSensivity', {\n    title: 'Mouse Sensivity',\n    type: 'number',\n    default: 0.3\n});\n\nLookCamera.attributes.add('controllerTemplate', {\n    title: 'Controller Template',\n    type: 'asset',\n    assetType: 'template'\n});\n\nLookCamera.prototype.initialize = function () {\n    this._offsetParent = this.entity.parent;\n    \n    // Camera euler angle rotation around x and y axes\n    var rotation = this.entity.getRotation();\n    this.yaw = pc.util.getYaw(rotation);\n    this.pitch = this._getPitch(rotation, this.yaw);\n    \n    this.movedMouse = 0;\n    this.movedStart = 0;\n    this.touchCoords = new pc.Vec2();\n\n    this.app.mouse.on(pc.EVENT_MOUSEDOWN, this._onMouseDown, this);\n    this.app.mouse.on(pc.EVENT_MOUSEUP, this._onMouseUp, this);\n    this.app.mouse.on(pc.EVENT_MOUSEMOVE, this._onMouseMove, this);\n    \n    this.app.mouse.disableContextMenu();\n    \n    if (this.app.touch) {\n        this.app.touch.on(pc.EVENT_TOUCHSTART, this._onTouchStart, this);\n        this.app.touch.on(pc.EVENT_TOUCHEND, this._onTouchEndCancel, this);\n        this.app.touch.on(pc.EVENT_TOUCHCANCEL, this._onTouchStartEndCancel, this);\n        this.app.touch.on(pc.EVENT_TOUCHMOVE, this._onTouchMove, this);\n    }\n    \n    this.app.mainCamera = this.entity;\n    \n    this.gazeController = null;\n    if (! this.app.xr.active) {\n        this.gazeController = this.controllerTemplate.resource.instantiate();\n        this.gazeController.reparent(this.app.root);\n        this.gazeController.enabled = true;\n    }\n    \n    this.app.xr.on('start', function() {\n        if (! this.gazeController) return;\n        this.gazeController.destroy();\n        this.gazeController = null;\n    }, this);\n    \n    this.app.xr.on('end', function() {\n        if (! this.gazeController) {\n            this.gazeController = this.controllerTemplate.resource.instantiate();\n            this.gazeController.reparent(this.app.root);\n            this.gazeController.enabled = true;\n        }\n    }, this);\n};\n\nLookCamera.prototype._onMouseDown = function (event) {\n    if (this.app.xr.active)\n        return;\n    \n    // Attempt to lock the pointer\n    if (! pc.Mouse.isPointerLocked()) {\n        if (event.event.target.id && event.event.target.id == 'application-canvas') {\n            this.app.mouse.enablePointerLock();\n        }\n    }\n    \n    if (event.button !== pc.MOUSEBUTTON_LEFT)\n        return;\n    \n    this.movedStart = Date.now();\n    this.movedMouse = 0;\n    \n    if (this.gazeController)\n        this.gazeController.script.controller.onSelectStart();\n};\n\nLookCamera.prototype._onTouchStart = function (event) {\n    if (this.app.xr.active) return;\n    \n    event.event.preventDefault();\n    \n    if (event.touches.length !== 1) return;\n    \n    this.movedStart = Date.now();\n    this.movedMouse = 0;\n    \n    this.touchCoords.set(event.touches[0].x, event.touches[0].y);\n    \n    if (this.gazeController) {\n        this.gazeController.script.controller.active = true;\n        this.gazeController.script.controller.mouseCoords.set(event.touches[0].x, event.touches[0].y);\n        this.gazeController.script.controller.onSelectStart();\n    }\n};\n\nLookCamera.prototype._onMouseUp = function (event) {\n    if (this.app.xr.active)\n        return;\n    \n    if (event.button !== pc.MOUSEBUTTON_LEFT)\n        return;\n    \n    if (this.gazeController) {\n        if (! pc.Mouse.isPointerLocked() && (this.movedMouse > 30 || (Date.now() - this.movedStart) > 300))\n            this.gazeController.script.controller.teleportable = false;\n        \n        this.gazeController.script.controller.onSelectEnd();\n        this.gazeController.script.controller.teleportable = true;\n    }\n};\n\nLookCamera.prototype._onTouchEndCancel = function (event) {\n    if (this.app.xr.active) return;\n    if (event.touches.length !== 0) return;\n    \n    if (this.gazeController) {\n        if (this.movedMouse > 30 || (Date.now() - this.movedStart) > 300)\n            this.gazeController.script.controller.teleportable = false;\n        \n        this.gazeController.script.controller.onSelectEnd();\n        this.gazeController.script.controller.teleportable = true;\n        this.gazeController.script.controller.active = false;\n    }\n};\n\nLookCamera.prototype._onMouseMove = function (event) {\n    if (this.app.xr.active)\n        return;\n    \n    if (this.gazeController) {\n        this.gazeController.script.controller.mouseCoords.set(event.x, event.y);\n        this.gazeController.script.controller.active = true;\n    }\n    \n    if (pc.Mouse.isPointerLocked() || (this.app.mouse.isPressed(pc.MOUSEBUTTON_LEFT) && (! this.gazeController || ! this.gazeController.script.controller.getHeldEntity()))) {\n        this.pitch = Math.max(-90, Math.min(90, this.pitch - (event.dy * this.mouseSensivity)));\n        this.yaw -= event.dx * this.mouseSensivity;\n        \n        this.movedMouse += Math.abs(event.dy) + Math.abs(event.dx);\n    }\n};\n\nLookCamera.prototype._onTouchMove = function (event) {\n    if (this.app.xr.active) return;\n    if (event.touches.length !== 1) return;\n    \n    if (this.gazeController)\n        this.gazeController.script.controller.mouseCoords.set(event.touches[0].x, event.touches[0].y);\n    \n    if (! this.gazeController || ! this.gazeController.script.controller.getHeldEntity()) {\n        var dx = event.touches[0].x - this.touchCoords.x;\n        var dy = event.touches[0].y - this.touchCoords.y;\n        this.touchCoords.set(event.touches[0].x, event.touches[0].y);\n        \n        this.pitch = Math.max(-90, Math.min(90, this.pitch - (dy * this.mouseSensivity)));\n        this.yaw -= dx * this.mouseSensivity;\n        \n        this.movedMouse += Math.abs(dy) + Math.abs(dx);\n    }\n};\n\nLookCamera.prototype.update = function (dt) {\n    this._offsetParent.setLocalEulerAngles(0, this.yaw, 0);\n    \n    if (! this.app.xr.active) {\n        this.entity.setLocalEulerAngles(this.pitch, 0, 0);\n    }\n};\n\nLookCamera.quatWithoutYaw = new pc.Quat();\nLookCamera.yawOffset = new pc.Quat();\n\nLookCamera.prototype._getPitch = function(quat, yaw) {\n    var quatWithoutYaw = LookCamera.quatWithoutYaw;\n    var yawOffset = LookCamera.yawOffset;\n    \n    yawOffset.setFromEulerAngles(0, -yaw, 0);\n    quatWithoutYaw.mul2(yawOffset, quat);\n    \n    var transformedForward = new pc.Vec3();\n    \n    quatWithoutYaw.transformVector(pc.Vec3.FORWARD, transformedForward);\n    \n    return Math.atan2(transformedForward.y, -transformedForward.z) * pc.math.RAD_TO_DEG;\n};\n\n","// speaker-cone.js\nvar SpeakerCone = pc.createScript('speakerCone');\n\nSpeakerCone.MAX_DISPLACEMENT = 0.02;\nSpeakerCone.MAX_SCALE_RANGE = 0.1;\n\nSpeakerCone.volumeDisplacement = new pc.Vec3();\nSpeakerCone.volumeScale = new pc.Vec3();\n\n// Volume should be between 0-1\nSpeakerCone.prototype.applyVolume = function (volume) {\n    var displacement = SpeakerCone.volumeDisplacement;\n    displacement.copy(this.entity.forward).scale(volume * SpeakerCone.MAX_DISPLACEMENT);\n    displacement.add(this._startLocalPosition);\n   \n    var scale = SpeakerCone.volumeScale;\n    var s = SpeakerCone.MAX_SCALE_RANGE * volume;\n    \n    // Add some random scale for 'vibrations'\n    s += pc.math.random(-SpeakerCone.MAX_DISPLACEMENT / 5, SpeakerCone.MAX_DISPLACEMENT / 5);\n    \n    scale.set(s, s, s);\n    scale.add(this._startLocalScale);\n    \n    this.entity.setLocalPosition(displacement);\n    this.entity.setLocalScale(scale);\n};\n\n// initialize code called once per entity\nSpeakerCone.prototype.initialize = function() {\n    this._startLocalPosition = this.entity.getLocalPosition().clone();\n    this._startLocalScale = this.entity.getLocalScale().clone();\n};\n\n\n\n\n","// statue-button.js\nvar StatueButton = pc.createScript('statueButton');\n\nStatueButton.attributes.add('startPosition', {type: 'vec3', default: [0, 0, 0], title: 'Start Position'});\nStatueButton.attributes.add('pressedPosition', {type: 'vec3', default: [0, 0, 0], title: 'Pressed Position'});\nStatueButton.attributes.add('statueEntity', {type: 'entity', title: 'Statue Entity'});\n\n// initialize code called once per entity\nStatueButton.prototype.initialize = function() {\n    this.entity.on('button:activated', this._onButtonActivated, this);\n    this.entity.on('button:reseted', this._onButtonReseted, this);\n    \n    this._model = this.entity.findByName('Model');\n    this._activated = false;\n};\n\n\nStatueButton.LERP_FACTOR = 18;\n\n// update code called every frame\nStatueButton.prototype.update = function(dt) {\n    var position = this._model.getLocalPosition();\n    if (this._activated) {\n        position.lerp(position, this.pressedPosition, Math.min(StatueButton.LERP_FACTOR * dt, 1));\n    } else {\n        position.lerp(position, this.startPosition, Math.min(StatueButton.LERP_FACTOR * dt, 1));\n    }\n    \n    this._model.setLocalPosition(position);\n};\n\n\nStatueButton.prototype._onButtonActivated = function () {\n    this.statueEntity.fire('statue:activate');    \n    this._activated = true;\n};\n\n\nStatueButton.prototype._onButtonReseted = function () {\n    this._activated = false;\n};\n\n","// statue.js\nvar Statue = pc.createScript('statue');\n\nStatue.attributes.add('soundSlotName', {type: 'string', default: '', title: 'Sound Slot Name'});\n\n// initialize code called once per entity\nStatue.prototype.initialize = function() {\n    this._audioEntity = this.entity.findByName('Sound');\n    pc.util.initSoundSlotAssets(this.app, this._audioEntity);\n    \n    this._particles = this.entity.findByName('Particle System');\n    this.entity.on('statue:activate', this._onActivate, this);\n};\n\n\nStatue.prototype._onActivate = function () {\n    pc.util.playSoundSlot(this._audioEntity, this.soundSlotName); \n    \n    this._secsSinceActivation = 0;    \n    this._playParticleEffect(this._particles);\n};\n\n\nStatue.prototype._playParticleEffect = function (parent) {\n    var children = parent.children;\n    for (var i = 0; i < children.length; i++) {\n        children[i].particlesystem.reset();\n        children[i].particlesystem.play();        \n    }        \n};\n\n\n","// vinyl.js\nvar Vinyl = pc.createScript('vinyl');\n\nVinyl.attributes.add('soundSlotName', {type: 'string', default: '', title: 'Sound Slot Name', description: 'Name of slot to play on Hifi'});\n\n","// xr.js\nvar Vr = pc.createScript('vr');\n\nVr.attributes.add('buttonVr', {\n    type: 'entity',\n    title: 'VR Button'\n});\n\nVr.attributes.add('elementUnsupported', {\n    type: 'entity',\n    title: 'Unsupported Message'\n});\n\nVr.attributes.add('elementUnavailable', {\n    type: 'entity',\n    title: 'Unavailable Message'\n});\n\nVr.attributes.add('elementHttpsRequired', {\n    type: 'entity',\n    title: 'HTTPS Required Message'\n});\n\nVr.attributes.add('cameraEntity', {\n    type: 'entity',\n    title: 'Camera'\n});\n\nVr.prototype.initialize = function() {\n    this.app.xr.on('available:' + pc.XRTYPE_VR, this.checkButton, this);\n    this.app.xr.on('start', this.checkButton, this);\n    this.app.xr.on('end', this.checkButton, this);\n    \n    this.buttonVr.element.on('click', function() {\n        this.sessionStart();\n    }, this);\n    \n    // esc - end session\n    this.app.keyboard.on('keydown', function (evt) {\n        if (evt.key === pc.KEY_ESCAPE && this.app.xr.active) {\n            this.app.xr.end();\n        }\n    }, this);\n    \n    this.checkButton();\n};\n\nVr.prototype.checkButton = function() {\n    if (this.app.xr.supported) {\n        this.elementHttpsRequired.enabled = false;\n        this.elementUnsupported.enabled = false;\n        this.elementUnavailable.enabled = false;\n        \n        if (this.app.xr.active) {\n            // hide button in XR session\n            this.buttonVr.enabled = false;\n        } else {\n            // check if session type is available\n            var available = this.app.xr && ! this.app.xr.active && this.app.xr.isAvailable(pc.XRTYPE_VR);\n            \n            // show/hide button outside of XR session\n            this.buttonVr.enabled = available;\n            \n            if (! available)\n                this.elementUnavailable.enabled = true;\n        }\n    } else {\n        // WebXR is not supported\n        this.buttonVr.enabled = false;\n        this.elementUnavailable.enabled = false;\n        \n        // Check if we are on HTTPS\n        if (window.location.protocol == \"https:\") {\n            this.elementUnsupported.enabled = true;\n            this.elementHttpsRequired.enabled = false;\n        } else {\n            this.elementUnsupported.enabled = false;\n            this.elementHttpsRequired.enabled = true;\n        }\n    }\n};\n\nVr.prototype.sessionStart = function() {\n    if (! this.app.xr.supported) {\n        // WebXR is not supported\n        return;\n    }\n    \n    if (this.app.xr.active) {\n        // session already active\n        return;\n    }\n    \n    if (! this.app.xr.isAvailable(pc.XRTYPE_VR)) {\n        // this session type is not available\n        return;\n    }\n    \n    // ask for motion permissions if we can\n    if (window.DeviceOrientationEvent && window.DeviceOrientationEvent.requestPermission) {\n        DeviceOrientationEvent.requestPermission().then(function(response) {\n            if (response !== 'granted')\n                return;\n            \n            window.addEventListener('deviceorientation', function (e) {\n                // start session\n                this.cameraEntity.camera.startXr(pc.XRTYPE_VR, pc.XRSPACE_LOCALFLOOR);\n            }.bind(this));\n        }.bind(this)).catch(console.error);\n    } else {\n        // start session\n        this.cameraEntity.camera.startXr(pc.XRTYPE_VR, pc.XRSPACE_LOCALFLOOR);\n    }\n};\n\n","// controllers.js\nvar Controllers = pc.createScript('controllers');\n\nControllers.attributes.add('controllerTemplate', {\n    type: 'asset',\n    assetType: 'template',\n    title: 'Controller Template'\n});\n\nControllers.prototype.initialize = function() {\n    this.controllerAssets = this.app.assets.findByTag('controller');\n    this.controllerAssetsIndex = { };\n    \n    for(var i = 0; i < this.controllerAssets.length; i++) {\n        var name = this.controllerAssets[i].name.replace(/\\.[a-z]+$/i, '');\n        this.controllerAssetsIndex[name] = this.controllerAssets[i];\n    }\n    \n    // when controller is added\n    this.app.xr.input.on('add', function (inputSource) {\n        // clone controller entity template\n        var entity = this.controllerTemplate.resource.instantiate();\n        \n        // find related model asset\n        var asset = null;\n        for(var i = 0; i < inputSource.profiles.length; i++) {\n            var name = inputSource.profiles[i] + '-' + inputSource.handedness;\n            asset = this.controllerAssetsIndex[name];\n            if (asset) break;\n        }\n        \n        // default to generic-trigger\n        if (! asset) asset = this.controllerAssetsIndex['generic-trigger-' + (inputSource.handedness || 'none')];\n        entity.reparent(this.app.root);\n        entity.script.controller.setInputSource(inputSource, asset);\n        entity.enabled = true;\n    }, this);\n};\n\n\n","// controller.js\nvar Controller = pc.createScript('controller');\n\nController.attributes.add('maxGrabDistance', {\n    type: 'number',\n    title: 'Max Grab Distance',\n    default: 0.1\n});\n\nController.prototype.initialize = function() {\n    this.ray = new pc.Ray();\n    this.vecA = new pc.Vec3();\n    this.vecB = new pc.Vec3();\n    this.quat = new pc.Quat();\n    this.color = new pc.Color(1, 1, 1);\n    this.holdingEntity = null;\n    this.teleportableEntity = null;\n    this.hoverEntity = null;\n    this.hoverPoint = new pc.Vec3();\n    this.teleportable = true;\n    this.active = true;\n    this.mouseCoords = new pc.Vec2();\n    this.holdingDistance = 0;\n    this.holdingOffset = new pc.Vec3();\n    this.holdingNoOffset = true;\n    \n    this.modelEntity = this.entity.findByName('Model');\n    this.grabAnchor = new pc.Entity();\n    this.grabAnchor.reparent(this.entity);\n};\n\nController.prototype.setInputSource = function(inputSource, asset) {\n    var self = this;\n    \n    this.inputSource = inputSource;\n    this.inputSource.once('remove', this.onRemove, this);\n    \n    this.on('hover', this.onHover, this);\n    this.on('blur', this.onBlur, this);\n    \n    this.inputSource.on('selectstart', this.onSelectStart, this);\n    this.inputSource.on('selectend', this.onSelectEnd, this);\n    \n    if (inputSource.hand) {\n        this.joints = [ ];\n        var material = new pc.StandardMaterial();\n        \n        // create boxes for each joint\n        for(var i = 0; i < inputSource.hand.joints.length; i++) {\n            var joint = inputSource.hand.joints[i];\n            var entity = new pc.Entity();\n            entity.addComponent('model', {\n                type: 'box'\n            });\n            entity.joint = joint;\n            entity.model.material = material;\n            \n            this.joints.push(entity);\n            this.entity.addChild(entity);\n        }\n        // paint red when tracking lost\n        inputSource.hand.on('trackinglost', function() {\n            this.joints[0].model.material.diffuse.set(1, 0, 0);\n            this.joints[0].model.material.update();\n        }, this);\n        // paint white when tracking restored\n        inputSource.hand.on('tracking', function() {\n            this.joints[0].model.material.diffuse.set(1, 1, 1);\n            this.joints[0].model.material.update();\n        }, this);\n        \n    } else if (asset) {\n        // if model provided for a controller\n        asset.ready(function() {\n            if (! this.entity.parent)\n                return;\n            \n            var glb = asset.resource;\n            var blob = new Blob([ glb ]);\n    \n            // load from glb\n            this.app.assets.loadFromUrlAndFilename(URL.createObjectURL(blob), 'container.glb', \"container\", function (err, containerAsset) {\n                if (! self.entity.parent) {\n                    containerAsset.unload();\n                    self.app.assets.remove(containerAsset);\n                    return;\n                }\n                \n                if (err) {\n                    console.error(err);    \n                } else {\n                    // update model\n                    self.modelEntity.setLocalScale(1, 1, 1);\n                    self.modelEntity.model.type = 'asset';\n                    self.modelEntity.model.asset = containerAsset.resource.model;\n                    self.modelEntity.containerAsset = containerAsset;\n                }\n            });\n        }, this);\n        // load model\n        this.app.assets.load(asset);\n    }\n};\n\nController.prototype.onRemove = function() {\n    if (this.modelEntity.containerAsset) {\n        console.log(this.modelEntity.containerAsset);\n        this.modelEntity.containerAsset.unload();\n        this.app.assets.remove(this.modelEntity.containerAsset);\n        this.modelEntity.containerAsset = null;\n    }\n    \n    this.entity.destroy();\n};\n\nController.prototype.onSelectStart = function() {\n    this.pick();\n    \n    if (this.teleportableEntity) {\n        // teleport\n        if (this.app.xr.active) {\n            this.app.fire('teleport:to', this.hoverPoint);\n        }\n    } else if (this.hoverEntity && ! this.holdingEntity) {\n        this.hoverEntity.fire('object:interact', this);\n        this.hoverEntity.fire('object:hold', this);\n    }\n};\n\nController.prototype.onSelectEnd = function() {\n    if (this.teleportableEntity) {\n        if (! this.app.xr.active && this.teleportable) {\n            this.app.fire('teleport:to', this.hoverPoint);\n        }\n    }\n    \n    if (this.hoverEntity) {\n        this.hoverEntity.fire('object:attemptuse', this);\n    }\n    \n    if (this.holdingEntity) {\n        this.holdingEntity.fire('object:release', this);\n    }\n};\n\nController.prototype.getAttachPosition = function () {\n    return this.grabAnchor.getPosition();\n};\n\nController.prototype.getAttachRotation = function () {\n    return this.grabAnchor.getRotation();\n};\n\nController.prototype.attach = function (entity) {\n    if (this.holdingEntity) return;\n    \n    this.holdingEntity = entity;\n    this.grabAnchor.setPosition(entity.getPosition());\n    \n    this.holdingDistance = entity.getPosition().distance(this.app.mainCamera.getPosition());\n};\n\nController.prototype.detach = function (entity) {\n    if (! this.holdingEntity) return;\n    \n    this.holdingEntity = null;\n};\n\nController.prototype.getHeldEntity = function () {\n    return this.holdingEntity;\n};\n\nController.prototype.updateAttachment = function (entity, rotationOffset) {\n    entity.setPosition(this.getAttachPosition());\n    this.quat.mul2(this.getAttachRotation(), rotationOffset);\n    entity.setRotation(this.quat);    \n};\n\nController.prototype.filterPicker = function(entity) {\n    if (this.holdingEntity === entity)\n        return false;\n    \n    return true;\n};\n\nController.prototype.pick = function() {\n    if (this.inputSource) {\n        this.ray.set(this.inputSource.getOrigin(), this.inputSource.getDirection());\n    } else if (! pc.Mouse.isPointerLocked()) {\n        this.app.mainCamera.camera.screenToWorld(this.mouseCoords.x, this.mouseCoords.y, this.app.mainCamera.camera.nearClip, this.vecA);\n        this.app.mainCamera.camera.screenToWorld(this.mouseCoords.x, this.mouseCoords.y, this.app.mainCamera.camera.farClip, this.vecB);\n        this.vecB.sub(this.vecA).normalize();\n        this.ray.set(this.vecA, this.vecB);\n        \n        if (this.holdingEntity) {\n            this.vecB.scale(this.holdingDistance);\n            this.vecB.add(this.vecA);\n            \n            if (this.holdingNoOffset) {\n                this.holdingNoOffset = false;\n                this.holdingOffset.copy(this.grabAnchor.getPosition()).sub(this.vecB);\n            }\n            \n            this.vecB.add(this.holdingOffset);\n            this.grabAnchor.setPosition(this.vecB);\n        } else {\n            this.holdingNoOffset = true;\n        }\n    } else {\n        this.ray.set(this.app.mainCamera.getPosition(), this.app.mainCamera.forward);\n    }\n    \n    var hoverEntity = this.app.shapeWorld.raycast(this.ray, this.filterPicker.bind(this), this.hoverPoint);\n    var validTeleport = false;\n    \n    if (! this.active) hoverEntity = null;\n    \n    if (this.hoverEntity !== hoverEntity) {\n        if (this.hoverEntity)\n            this.hoverEntity.fire('object:offhover', this);\n        \n        if (hoverEntity)\n            hoverEntity.fire('object:onhover', this);\n        \n        this.hoverEntity = hoverEntity;\n    }\n    \n    if (this.hoverEntity) {\n        if (! this.holdingEntity) {\n            // check teleportable\n            if (this.hoverEntity.tags.has('floor')) {\n                var dot = this.hoverEntity.up.dot(this.ray.direction);\n                if (dot <= 0) validTeleport = true;\n            }\n        }\n    }\n    \n    if (validTeleport) {\n        this.teleportableEntity = this.hoverEntity;\n    } else {\n        this.teleportableEntity = null;\n    }\n};\n\nController.prototype.update = function(dt) {\n    if (this.inputSource && this.inputSource.targetRayMode !== 'gaze') {\n        // render ray line\n        this.vecA.copy(this.inputSource.getOrigin());\n        this.vecB.copy(this.inputSource.getDirection());\n        this.vecB.scale(1000).add(this.vecA);\n        if (this.inputSource.selecting) {\n            this.color.set(0, 1, 0);\n        } else {\n            this.color.set(1, 1, 1);\n        }\n        this.app.renderLine(this.vecA, this.vecB, this.color);\n    }\n    \n    // it is a hand\n    if (this.inputSource && this.inputSource.hand) {\n        // update physical joints\n        for(var i = 0; i < this.joints.length; i++) {\n            var joint = this.joints[i].joint;\n            var r = joint.radius * 2;\n            this.joints[i].setLocalScale(r, r, r);\n            this.joints[i].setPosition(joint.getPosition());\n            this.joints[i].setRotation(joint.getRotation());\n        }\n    } else if (this.inputSource && this.inputSource.grip) {\n        // is can be gripped, enable model and transform it accordingly\n        this.modelEntity.enabled = true;\n        this.entity.setPosition(this.inputSource.getPosition());\n        this.entity.setRotation(this.inputSource.getRotation());\n    } else {\n        this.modelEntity.enabled = false;\n        \n        if (! this.inputSource || this.inputSource.targetRayMode === 'gaze') {\n            this.entity.setPosition(this.app.mainCamera.getPosition());\n            this.entity.setRotation(this.app.mainCamera.getRotation());\n        }\n    }\n    \n    this.pick();\n    \n    if (this.teleportableEntity) {\n        this.vecB.copy(this.hoverEntity.up).scale(0.01);\n        this.vecA.copy(this.hoverPoint).add(this.vecB);\n        this.app.fire('teleport:transform', this.vecA, this.hoverEntity.getRotation());\n        this.app.fire('teleport:show');\n    } else {\n        this.app.fire('teleport:hide');\n    }\n};\n\n\n","// locator.js\nvar Teleport = pc.createScript('teleport');\n\nTeleport.prototype.initialize = function() {\n    this.app.on('teleport:show', function() {\n        this.entity.enabled = true;\n    }, this);\n    \n    this.app.on('teleport:hide', function() {\n        this.entity.enabled = false;\n    }, this);\n    \n    this.app.on('teleport:transform', function(position, rotation) {\n        this.entity.setPosition(position);\n        this.entity.setRotation(rotation);\n    }, this);\n};\n\n","// teleport-camera.js\nvar TeleportCamera = pc.createScript('teleportCamera');\n\nTeleportCamera.prototype.initialize = function() {\n    this.app.on('teleport:to', function(position) {\n        this.entity.setPosition(position);\n    }, this);\n};\n\n\n","// rotate earth.js\nvar Rotate = pc.createScript('rotate earth');\n\nRotate.attributes.add('speed', { type: 'number', default: 1 });\n\n// initialize code called once per entity\nRotate.prototype.initialize = function() {\n    \n};\n\n// update code called every frame\nRotate.prototype.update = function(dt) {\n    this.entity.rotateLocal(0, dt * this.speed, 0);\n};\n\n// swap method called for script hot-reloading\n// inherit your script state here\nRotate.prototype.swap = function(old) {\n    \n};\n\n// to learn more about script anatomy, please read:\n// http://developer.playcanvas.com/en/\n\n","// shader-chunk.js\nvar ShaderChunk = pc.createScript('shaderChunk');\n\nShaderChunk.attributes.add('chunkName', { type: 'string' });\nShaderChunk.attributes.add('shader', { type: 'asset', assetType: 'shader' });\n\nShaderChunk.prototype.initialize = function() {\n    var material = this.entity.model.meshInstances[0].material;\n\n    if (this.shader)\n        material.chunks[this.chunkName + 'PS'] = this.shader.resource;\n\n    this.shader.on('load', function() {\n        material.chunks[this.chunkName + 'PS'] = this.resource;\n        material.update();\n    });\n\n    material.update();\n};\n\n","// load-scene-helper.js\n    /**\n     * @name loadScene\n     * @function\n     * @description Loads a scene hierarchy and settings depending on the options.\n     * @param {string} sceneName - Name of the scene to load.\n     * @param {Object} [options] - Optional. Extra options to do extra processing on the GLB.\n     * @param {boolean} [options.hierarchy] - Optional. Set to true if you want to load the scene hierarchy.\n     * @param {boolean} [options.settings] - Optional. Set to true if you want to load the scene settings.\n     * @param {pc.callbacks.LoadHierarchy} [callback] - Optional. This is called if there is an error or if the scene is loaded successfully.\n     * @param {Object} [scope] - The object scope to call the callback with.\n     */\n\nfunction loadScene(sceneName, options, callback, scope) {\n    var app = pc.Application.getApplication();\n    var scene = app.scenes.find(sceneName);\n\n    if (scene) {\n        // Check if the scene data is already loaded, if it is we should assume\n        // that it stay cached after we loaded the scene and added the \n        // entities to the scene graph\n        var wasSceneLoaded = scene.loaded;\n\n        app.scenes.loadSceneData(scene, function(err, scene) {\n            if (err) {\n                if (callback) {\n                    callback.call(scope, err);\n                }\n            } else {\n                var sceneParent = null;\n\n                // Destroy all the entities on the app.root to completely remove \n                // the existing scenes\n                var rootChildren = app.root.children;\n                while(rootChildren.length > 0) {\n                    rootChildren[0].destroy();\n                }\n\n                // As we've already loaded the scene data, the callbacks for these\n                // functions will be called immediately\n                if (options.settings) {\n                    app.scenes.loadSceneSettings(scene, function (err) {\n                        if (err && callback) {\n                            callback.call(scope, err);\n                        }\n                    });\n                }\n\n                if (options.hierarchy) {\n                    app.scenes.loadSceneHierarchy(scene, function (err, parent) {\n                        if (err) {\n                            if (callback) {\n                                callback(err);\n                            }\n                        } else {\n                            sceneParent = parent;\n                        }\n                    });\n                }\n\n                if (!wasSceneLoaded) {\n                    app.scenes.unloadSceneData(scene);\n                }\n\n                if (callback) {\n                    callback.call(scope, null, sceneParent);\n                }\n            }\n        });\n    } else {\n        if (callback) {\n            callback.call(scope, \"Scene not found: \" + sceneName);\n        }\n    }\n}\n\n","// change-scene-on-click.js\nvar ChangeSceneOnClick = pc.createScript('changeSceneOnClick');\nChangeSceneOnClick.attributes.add('sceneName', {type: 'string'});\n\n// initialize code called once per entity\nChangeSceneOnClick.prototype.initialize = function() {\n    this.entity.button.once('click', function() {\n        loadScene(this.sceneName, { hierarchy: true, settings: false });\n    }, this);\n};\n\n\n// swap method called for script hot-reloading\n// inherit your script state here\n// ChangeSceneOnClick.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n","// CameraMovement.js\nvar CameraMovement = pc.createScript('cameraMovement');\n\nCameraMovement.attributes.add('mouseSpeed', { type: 'number', default: 1.4, description: 'Mouse Sensitivity' });\nCameraMovement.attributes.add('touchSensitivity', { type: 'number', default: 5, description: 'Touch Sensitivity' });\n\n// Called once after all resources are loaded and before the first update\nCameraMovement.prototype.initialize = function () {\n    this.eulers = new pc.Vec3();\n    this.touchCoords = new pc.Vec2();\n    \n    var app = this.app;\n    app.mouse.on(\"mousemove\", this.onMouseMove, this);\n\n    app.mouse.on(\"mousedown\", function () {\n        app.mouse.enablePointerLock();\n    }, this);\n    \n    this.lastLTouchPoint = new pc.Vec2();\n    this.LTouchStartPoint = new pc.Vec2();\n    this.LTouch = null;\n    this.Rid = -1;\n    this.Lid = -1;\n    this.velZ = 0;\n    this.velX = 0;\n            \n    this.rayEnd = app.root.findByName('RaycastEndPoint');\n    \n    if (app.touch){\n        app.touch.on(pc.EVENT_TOUCHSTART, this.onTouchStart, this);\n        app.touch.on(pc.EVENT_TOUCHEND, this.onTouchEnd, this);\n        app.touch.on(pc.EVENT_TOUCHCANCEL, this.onTouchEnd, this);\n        app.touch.on(pc.EVENT_TOUCHMOVE, this.onTouchMove, this);\n    }\n};\n\nCameraMovement.prototype.update = function (dt) {\n    this.velZ = this.Lid != -1 ? this.lastLTouchPoint.y - this.LTouchStartPoint.y : 0;\n    this.velX = this.Lid != -1 ? this.lastLTouchPoint.x - this.LTouchStartPoint.x : 0;\n};\n\nCameraMovement.prototype.postUpdate = function (dt) {\n    var originEntity = this.entity.parent;\n    \n    var targetY = this.eulers.x + 180;\n    var targetX = this.eulers.y;\n\n    var targetAng = new pc.Vec3(-targetX, targetY, 0);\n        \n    originEntity.setEulerAngles(targetAng);\n                   \n    this.entity.setPosition(this.getWorldPoint());\n    \n    this.entity.lookAt(originEntity.getPosition());\n};\n\nCameraMovement.prototype.onMouseMove = function (e) {\n    if (pc.Mouse.isPointerLocked()) {\n        this.eulers.x -=((this.mouseSpeed * e.dx) / 60) % 360;\n        this.eulers.y = Math.max(Math.min(this.eulers.y + ((this.mouseSpeed * e.dy) / 60) % 360, 89.99), -89.99);\n    }\n};\n\nCameraMovement.prototype.onTouchStart = function (e) {\n    e.changedTouches.forEach(function(touch) {\n        var device = this.app.graphicsDevice;\n        if (touch.x > device.width * 0.5 / window.devicePixelRatio && this.Rid == -1) {\n            this.Rid = touch.id;\n            this.touchCoords.set(touch.x, touch.y);\n        }\n        if (touch.x <= device.width * 0.5 / window.devicePixelRatio && this.Lid == -1){\n            this.Lid = touch.id;\n            this.LTouchStartPoint.set(touch.x, touch.y);\n            this.lastLTouchPoint.set(touch.x, touch.y);\n        }\n    }, this);\n};\n\nCameraMovement.prototype.onTouchEnd = function (e) {\n    e.changedTouches.forEach(function(touch) {\n        if (this.Rid == touch.id) {\n            this.Rid = -1;\n        }\n        if (this.Lid == touch.id) {\n            this.Lid = -1;\n        }\n    }, this);\n};\n\nCameraMovement.prototype.onTouchMove = function (e) {\n    this.RTouch = e.getTouchById(this.Rid, e.touches);\n    this.LTouch = e.getTouchById(this.Lid, e.touches);\n    \n    if (this.RTouch) {\n\n        var dx = (this.RTouch.x - this.touchCoords.x) * this.touchSensitivity;\n        var dy = (this.RTouch.y - this.touchCoords.y) * this.touchSensitivity;\n        \n        this.eulers.x -= ((this.touchSensitivity * dx) / 60) % 360;\n        this.eulers.y += ((this.touchSensitivity * dy) / 60) % 360;\n\n        if (this.eulers.x < 0) this.eulers.x += 360;\n        if (this.eulers.y < 0) this.eulers.y += 360;\n\n        this.touchCoords.set(this.RTouch.x, this.RTouch.y);\n    }\n    if (this.LTouch) {\n        this.lastLTouchPoint.set(this.LTouch.x, this.LTouch.y);\n    }\n};\n\nCameraMovement.prototype.getWorldPoint = function () {\n    var from = this.entity.parent.getPosition(); \n    var to = this.rayEnd.getPosition();\n\n    var hitPoint = to;\n\n    var app = this.app;\n    var hit = app.systems.rigidbody.raycastFirst(from, to);\n    \n    return hit ? hit.point : to;\n};\n\n","// PlayerMovement.js\nvar PlayerMovement = pc.createScript('playerMovement');\n\nPlayerMovement.attributes.add('speed', { type: 'number', default: 0.09 });\n\nPlayerMovement.prototype.initialize = function () {\n    var app = this.app;\n    var camera = app.root.findByName('Camera');\n    this.cameraScript = camera.script.cameraMovement;\n    \n    this.force = new pc.Vec3();\n    this.forceX = new pc.Vec3();\n    this.forceZ = new pc.Vec3();\n};\n\nPlayerMovement.prototype.update = function (dt) {\n    var app = this.app;\n    \n    this.force = pc.Vec3.ZERO.clone();\n    \n    var forward = this.entity.forward;\n    var right = this.entity.right;\n\n    if (app.keyboard.isPressed(pc.KEY_A)) {\n        this.force.x -= right.x;\n        this.force.z -= right.z;\n    }\n\n    if (app.keyboard.isPressed(pc.KEY_D)) {\n        this.force.x += right.x;\n        this.force.z += right.z;\n    }\n\n    if (app.keyboard.isPressed(pc.KEY_W)) {\n        this.force.x += forward.x;\n        this.force.z += forward.z;\n    }\n\n    if (app.keyboard.isPressed(pc.KEY_S)) {\n        this.force.x -= forward.x;\n        this.force.z -= forward.z;\n    }\n    \n    this.forceX.copy(this.entity.right).scale(this.cameraScript.velX * this.speed);\n    this.forceZ.copy(this.entity.forward).scale(-this.cameraScript.velZ * this.speed);\n    if (this.cameraScript.LTouch){\n        this.force = this.forceX.add(this.forceZ).normalize().scale(80);\n    }\n        \n    if (this.force.x !== 0 || this.force.z !== 0) {\n        var pos = new pc.Vec3(this.force.x * dt, 0, this.force.z * dt);\n        pos.normalize().scale(this.speed);\n        pos.add(this.entity.getPosition());\n\n        var targetY = this.cameraScript.eulers.x + 180;\n        var rot = new pc.Vec3(0, targetY, 0);\n\n        this.entity.rigidbody.teleport(pos, rot);\n    }\n};\n\n\n","// PlayerAnimationHandler.js\nvar PlayerAnimationHandler = pc.createScript('playerAnimationHandler');\n\nPlayerAnimationHandler.attributes.add('blendTime', { type: 'number', default: 0.2 });\nPlayerAnimationHandler.attributes.add('velMin', { type: 'number', default: 10});\nPlayerAnimationHandler.attributes.add('velMax', { type: 'number', default: 50});\n\nPlayerAnimationHandler.prototype.initialize = function () {\n    var app = this.app;\n    var camera = app.root.findByName('Camera');\n    this.cameraScript = camera.script.cameraMovement;\n        \n    app.keyboard.on(pc.EVENT_KEYDOWN, this.keyChange, this);\n    app.keyboard.on(pc.EVENT_KEYUP, this.keyChange, this);\n    \n    this.direction = 'Idle';\n    this.setDirection('Idle');\n};\n\nPlayerAnimationHandler.prototype.update = function (dt) {\n    if (this.cameraScript.LTouch){\n        var tempDirection = this.direction;\n\n        this.checkTouch();\n\n        if (tempDirection !== this.direction) {\n            this.setDirection(this.direction);\n        }\n    }\n};\n\nPlayerAnimationHandler.prototype.checkButtons = function () {\n    var app = this.app;\n    \n    var w = app.keyboard.isPressed(pc.KEY_W);\n    var a = app.keyboard.isPressed(pc.KEY_A);\n    var s = app.keyboard.isPressed(pc.KEY_S);\n    var d = app.keyboard.isPressed(pc.KEY_D);\n\n    if (w && !s) {\n        if (a && !d) {\n            this.direction = 'Run Forward Left';\n        } else if (d && !a) {\n            this.direction = 'Run Forward Right';\n        } else {\n            this.direction = 'Run Forward';\n        }\n    } else if (s && !w) {\n        if (a && !d) {\n            this.direction = 'Run Backward Left';\n        } else if (d && !a) {\n            this.direction = 'Run Backward Right';\n        } else {\n            this.direction = 'Run Backward';\n        }\n    } else if (a && !d) {\n        this.direction = 'Run Left';\n    } else if (d && !a) {\n        this.direction = 'Run Right';\n    } else {\n        this.direction = 'Idle';\n    }\n};\n\nPlayerAnimationHandler.prototype.checkTouch = function() {\n    var app = this.app;\n    \n    if (this.cameraScript.velZ < -this.velMax && this.cameraScript.velX < -this.velMax) {this.direction = 'Run Forward Left';}\n    else if (this.cameraScript.velZ < -this.velMax && this.cameraScript.velX > this.velMax) {this.direction = 'Run Forward Right';}\n    else if (this.cameraScript.velZ < 0 && this.cameraScript.velX < this.velMax && this.cameraScript.velX > -this.velMax) {this.direction = 'Run Forward';}\n    else if (this.cameraScript.velZ > this.velMax && this.cameraScript.velX < -this.velMax) {this.direction = 'Run Backward Left';}\n    else if (this.cameraScript.velZ > this.velMax && this.cameraScript.velX > this.velMax) {this.direction = 'Run Backward Right';}\n    else if (this.cameraScript.velZ > 0 && this.cameraScript.velX < this.velMax && this.cameraScript.velX > -this.velMax) {this.direction = 'Run Backward';}\n    else if (this.cameraScript.velZ < this.velMax && this.cameraScript.velZ > -this.velMax && this.cameraScript.velX < -this.velMin) {this.direction = 'Run Left';}\n    else if (this.cameraScript.velZ < this.velMax && this.cameraScript.velZ > -this.velMax && this.cameraScript.velX > this.velMin) {this.direction = 'Run Right';}\n    else {this.direction = 'Idle';}\n};\n\nPlayerAnimationHandler.prototype.keyChange = function (e) {\n    var tempDirection = this.direction;\n\n    this.checkButtons();\n\n    if (tempDirection !== this.direction) {\n        this.setDirection(this.direction);\n    }\n};\n\nPlayerAnimationHandler.prototype.setDirection = function (direction) {\n    this.direction = direction;\n    this.entity.animation.play(direction, this.blendTime);\n};\n\n","// bloom.js\n// --------------- POST EFFECT DEFINITION --------------- //\nvar SAMPLE_COUNT = 15;\n\nfunction computeGaussian(n, theta) {\n    return ((1.0 / Math.sqrt(2 * Math.PI * theta)) * Math.exp(-(n * n) / (2 * theta * theta)));\n}\n\nfunction calculateBlurValues(sampleWeights, sampleOffsets, dx, dy, blurAmount) {\n    // Look up how many samples our gaussian blur effect supports.\n\n    // Create temporary arrays for computing our filter settings.\n    // The first sample always has a zero offset.\n    sampleWeights[0] = computeGaussian(0, blurAmount);\n    sampleOffsets[0] = 0;\n    sampleOffsets[1] = 0;\n\n    // Maintain a sum of all the weighting values.\n    var totalWeights = sampleWeights[0];\n\n    // Add pairs of additional sample taps, positioned\n    // along a line in both directions from the center.\n    var i, len;\n    for (i = 0, len = Math.floor(SAMPLE_COUNT / 2); i < len; i++) {\n        // Store weights for the positive and negative taps.\n        var weight = computeGaussian(i + 1, blurAmount);\n        sampleWeights[i * 2] = weight;\n        sampleWeights[i * 2 + 1] = weight;\n        totalWeights += weight * 2;\n\n        // To get the maximum amount of blurring from a limited number of\n        // pixel shader samples, we take advantage of the bilinear filtering\n        // hardware inside the texture fetch unit. If we position our texture\n        // coordinates exactly halfway between two texels, the filtering unit\n        // will average them for us, giving two samples for the price of one.\n        // This allows us to step in units of two texels per sample, rather\n        // than just one at a time. The 1.5 offset kicks things off by\n        // positioning us nicely in between two texels.\n        var sampleOffset = i * 2 + 1.5;\n\n        // Store texture coordinate offsets for the positive and negative taps.\n        sampleOffsets[i * 4] = dx * sampleOffset;\n        sampleOffsets[i * 4 + 1] = dy * sampleOffset;\n        sampleOffsets[i * 4 + 2] = -dx * sampleOffset;\n        sampleOffsets[i * 4 + 3] = -dy * sampleOffset;\n    }\n\n    // Normalize the list of sample weightings, so they will always sum to one.\n    for (i = 0, len = sampleWeights.length; i < len; i++) {\n        sampleWeights[i] /= totalWeights;\n    }\n}\n\n/**\n * @class\n * @name BloomEffect\n * @classdesc Implements the BloomEffect post processing effect.\n * @description Creates new instance of the post effect.\n * @augments PostEffect\n * @param {GraphicsDevice} graphicsDevice - The graphics device of the application.\n * @property {number} bloomThreshold Only pixels brighter then this threshold will be processed. Ranges from 0 to 1.\n * @property {number} blurAmount Controls the amount of blurring.\n * @property {number} bloomIntensity The intensity of the effect.\n */\nfunction BloomEffect(graphicsDevice) {\n    pc.PostEffect.call(this, graphicsDevice);\n\n    // Shaders\n    var attributes = {\n        aPosition: pc.SEMANTIC_POSITION\n    };\n\n    var passThroughVert = [\n        \"attribute vec2 aPosition;\",\n        \"\",\n        \"varying vec2 vUv0;\",\n        \"\",\n        \"void main(void)\",\n        \"{\",\n        \"    gl_Position = vec4(aPosition, 0.0, 1.0);\",\n        \"    vUv0 = (aPosition + 1.0) * 0.5;\",\n        \"}\"\n    ].join(\"\\n\");\n\n    // Pixel shader extracts the brighter areas of an image.\n    // This is the first step in applying a bloom postprocess.\n    var bloomExtractFrag = [\n        \"precision \" + graphicsDevice.precision + \" float;\",\n        \"\",\n        \"varying vec2 vUv0;\",\n        \"\",\n        \"uniform sampler2D uBaseTexture;\",\n        \"uniform float uBloomThreshold;\",\n        \"\",\n        \"void main(void)\",\n        \"{\",\n                // Look up the original image color.\n        \"    vec4 color = texture2D(uBaseTexture, vUv0);\",\n        \"\",\n                // Adjust it to keep only values brighter than the specified threshold.\n        \"    gl_FragColor = clamp((color - uBloomThreshold) / (1.0 - uBloomThreshold), 0.0, 1.0);\",\n        \"}\"\n    ].join(\"\\n\");\n\n    // Pixel shader applies a one dimensional gaussian blur filter.\n    // This is used twice by the bloom postprocess, first to\n    // blur horizontally, and then again to blur vertically.\n    var gaussianBlurFrag = [\n        \"precision \" + graphicsDevice.precision + \" float;\",\n        \"\",\n        \"#define SAMPLE_COUNT \" + SAMPLE_COUNT,\n        \"\",\n        \"varying vec2 vUv0;\",\n        \"\",\n        \"uniform sampler2D uBloomTexture;\",\n        \"uniform vec2 uBlurOffsets[SAMPLE_COUNT];\",\n        \"uniform float uBlurWeights[SAMPLE_COUNT];\",\n        \"\",\n        \"void main(void)\",\n        \"{\",\n        \"    vec4 color = vec4(0.0);\",\n                // Combine a number of weighted image filter taps.\n        \"    for (int i = 0; i < SAMPLE_COUNT; i++)\",\n        \"    {\",\n        \"        color += texture2D(uBloomTexture, vUv0 + uBlurOffsets[i]) * uBlurWeights[i];\",\n        \"    }\",\n        \"\",\n        \"    gl_FragColor = color;\",\n        \"}\"\n    ].join(\"\\n\");\n\n    // Pixel shader combines the bloom image with the original\n    // scene, using tweakable intensity levels.\n    // This is the final step in applying a bloom postprocess.\n    var bloomCombineFrag = [\n        \"precision \" + graphicsDevice.precision + \" float;\",\n        \"\",\n        \"varying vec2 vUv0;\",\n        \"\",\n        \"uniform float uBloomEffectIntensity;\",\n        \"uniform sampler2D uBaseTexture;\",\n        \"uniform sampler2D uBloomTexture;\",\n        \"\",\n        \"void main(void)\",\n        \"{\",\n                // Look up the bloom and original base image colors.\n        \"    vec4 bloom = texture2D(uBloomTexture, vUv0) * uBloomEffectIntensity;\",\n        \"    vec4 base = texture2D(uBaseTexture, vUv0);\",\n        \"\",\n                // Darken down the base image in areas where there is a lot of bloom,\n                // to prevent things looking excessively burned-out.\n        \"    base *= (1.0 - clamp(bloom, 0.0, 1.0));\",\n        \"\",\n                // Combine the two images.\n        \"    gl_FragColor = base + bloom;\",\n        \"}\"\n    ].join(\"\\n\");\n\n    this.extractShader = new pc.Shader(graphicsDevice, {\n        attributes: attributes,\n        vshader: passThroughVert,\n        fshader: bloomExtractFrag\n    });\n    this.blurShader = new pc.Shader(graphicsDevice, {\n        attributes: attributes,\n        vshader: passThroughVert,\n        fshader: gaussianBlurFrag\n    });\n    this.combineShader = new pc.Shader(graphicsDevice, {\n        attributes: attributes,\n        vshader: passThroughVert,\n        fshader: bloomCombineFrag\n    });\n\n    this.targets = [];\n\n    // Effect defaults\n    this.bloomThreshold = 0.25;\n    this.blurAmount = 4;\n    this.bloomIntensity = 1.25;\n\n    // Uniforms\n    this.sampleWeights = new Float32Array(SAMPLE_COUNT);\n    this.sampleOffsets = new Float32Array(SAMPLE_COUNT * 2);\n}\n\nBloomEffect.prototype = Object.create(pc.PostEffect.prototype);\nBloomEffect.prototype.constructor = BloomEffect;\n\nBloomEffect.prototype._destroy = function () {\n    if (this.targets) {\n        var i;\n        for (i = 0; i < this.targets.length; i++) {\n            this.targets[i].destroyTextureBuffers();\n            this.targets[i].destroy();\n        }\n    }\n    this.targets.length = 0;\n};\n\nBloomEffect.prototype._resize = function (target) {\n\n\n    var width = target.colorBuffer.width;\n    var height = target.colorBuffer.height;\n\n    if (width === this.width && height === this.height)\n        return;\n\n    this.width = width;\n    this.height = height;\n\n    this._destroy();\n\n    // Render targets\n    var i;\n    for (i = 0; i < 2; i++) {\n        var colorBuffer = new pc.Texture(this.device, {\n            name: \"Bloom Texture\" + i,\n            format: pc.PIXELFORMAT_R8_G8_B8_A8,\n            width: width >> 1,\n            height: height >> 1,\n            mipmaps: false\n        });\n        colorBuffer.minFilter = pc.FILTER_LINEAR;\n        colorBuffer.magFilter = pc.FILTER_LINEAR;\n        colorBuffer.addressU = pc.ADDRESS_CLAMP_TO_EDGE;\n        colorBuffer.addressV = pc.ADDRESS_CLAMP_TO_EDGE;\n        colorBuffer.name = 'pe-bloom';\n        var bloomTarget = new pc.RenderTarget({\n            name: \"Bloom Render Target \" + i,\n            colorBuffer: colorBuffer,\n            depth: false\n        });\n\n        this.targets.push(bloomTarget);\n    }\n};\n\nObject.assign(BloomEffect.prototype, {\n    render: function (inputTarget, outputTarget, rect) {\n\n        this._resize(inputTarget);\n\n        var device = this.device;\n        var scope = device.scope;\n\n        // Pass 1: draw the scene into rendertarget 1, using a\n        // shader that extracts only the brightest parts of the image.\n        scope.resolve(\"uBloomThreshold\").setValue(this.bloomThreshold);\n        scope.resolve(\"uBaseTexture\").setValue(inputTarget.colorBuffer);\n        pc.drawFullscreenQuad(device, this.targets[0], this.vertexBuffer, this.extractShader);\n\n        // Pass 2: draw from rendertarget 1 into rendertarget 2,\n        // using a shader to apply a horizontal gaussian blur filter.\n        calculateBlurValues(this.sampleWeights, this.sampleOffsets, 1.0 / this.targets[1].width, 0, this.blurAmount);\n        scope.resolve(\"uBlurWeights[0]\").setValue(this.sampleWeights);\n        scope.resolve(\"uBlurOffsets[0]\").setValue(this.sampleOffsets);\n        scope.resolve(\"uBloomTexture\").setValue(this.targets[0].colorBuffer);\n        pc.drawFullscreenQuad(device, this.targets[1], this.vertexBuffer, this.blurShader);\n\n        // Pass 3: draw from rendertarget 2 back into rendertarget 1,\n        // using a shader to apply a vertical gaussian blur filter.\n        calculateBlurValues(this.sampleWeights, this.sampleOffsets, 0, 1.0 / this.targets[0].height, this.blurAmount);\n        scope.resolve(\"uBlurWeights[0]\").setValue(this.sampleWeights);\n        scope.resolve(\"uBlurOffsets[0]\").setValue(this.sampleOffsets);\n        scope.resolve(\"uBloomTexture\").setValue(this.targets[1].colorBuffer);\n        pc.drawFullscreenQuad(device, this.targets[0], this.vertexBuffer, this.blurShader);\n\n        // Pass 4: draw both rendertarget 1 and the original scene\n        // image back into the main backbuffer, using a shader that\n        // combines them to produce the final bloomed result.\n        scope.resolve(\"uBloomEffectIntensity\").setValue(this.bloomIntensity);\n        scope.resolve(\"uBloomTexture\").setValue(this.targets[0].colorBuffer);\n        scope.resolve(\"uBaseTexture\").setValue(inputTarget.colorBuffer);\n        pc.drawFullscreenQuad(device, outputTarget, this.vertexBuffer, this.combineShader, rect);\n    }\n});\n\n// ----------------- SCRIPT DEFINITION ------------------ //\nvar Bloom = pc.createScript('bloom');\n\nBloom.attributes.add('bloomIntensity', {\n    type: 'number',\n    default: 1,\n    min: 0,\n    title: 'Intensity'\n});\n\nBloom.attributes.add('bloomThreshold', {\n    type: 'number',\n    default: 0.25,\n    min: 0,\n    max: 1,\n    title: 'Threshold'\n});\n\nBloom.attributes.add('blurAmount', {\n    type: 'number',\n    default: 4,\n    min: 1,\n    'title': 'Blur amount'\n});\n\nBloom.prototype.initialize = function () {\n    this.effect = new BloomEffect(this.app.graphicsDevice);\n\n    this.effect.bloomThreshold = this.bloomThreshold;\n    this.effect.blurAmount = this.blurAmount;\n    this.effect.bloomIntensity = this.bloomIntensity;\n\n    var queue = this.entity.camera.postEffects;\n\n    queue.addEffect(this.effect);\n\n    this.on('attr', function (name, value) {\n        this.effect[name] = value;\n    }, this);\n\n    this.on('state', function (enabled) {\n        if (enabled) {\n            queue.addEffect(this.effect);\n        } else {\n            queue.removeEffect(this.effect);\n        }\n    });\n\n    this.on('destroy', function () {\n        queue.removeEffect(this.effect);\n        this._destroy();\n    });\n};\n\n","// rotate.js\nvar Rotate = pc.createScript('rotate');\n\nRotate.attributes.add('rotation',{type:'vec3',default:[0,1,0]});\n\n// initialize code called once per entity\nRotate.prototype.initialize = function() {\n    \n};\n\n// update code called every frame\nRotate.prototype.update = function(dt) {\n\n    this.entity.rotate(this.rotation);\n    \n};\n\n// swap method called for script hot-reloading\n// inherit your script state here\nRotate.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// http://developer.playcanvas.com/en/user-manual/scripting/\n\n","// iframe-plane.js\nvar IframePlane = pc.createScript('iframePlane');\nIframePlane.attributes.add('iframeUrl', {type: 'string'});\nIframePlane.attributes.add('iframePixelsPerUnit', {\n    type: 'number', \n    default: 640, \n    description: 'Number of canvas pixels per unit of world space. The larger the number, the higher the resolution of the iframe.'\n});\n\n\n// initialize code called once per entity\nIframePlane.prototype.initialize = function() {\n    // WARNING: IframePlane does not work with touch events\n\n    this.createScreen(this.iframeUrl);\n\n};\n\nIframePlane.prototype.createScreen = function(url){\n    \n    var del = document.getElementById('video-frame');\n    if (del){\n        del.parentNode.removeChild(del);\n    }\n    // WARNING: IframePlane does not work with touch events\n    var element;\n    \n    if (url) {\n        element = document.createElement(\"iframe\");\n        element.id = 'video-frame';\n        element.src = url;\n        element.style.border = '0px';\n    } else {\n        element = null;\n    }\n\n    this._css3Plane = new pc.Css3Plane(element, this.entity, this.iframePixelsPerUnit);\n    \n    var material = new pc.StandardMaterial();\n    material.depthWrite = true;\n    material.redWrite = false;\n    material.greenWrite = false;\n    material.blueWrite = false;\n    material.alphaWrite = false;\n    material.blendType = pc.BLEND_NONE;\n    material.opacity = 0;\n    material.update();\n\n    this.entity.model.material = material;\n};\n\n// initialize code called once per entity\nIframePlane.prototype.swap = function() {\n    // WARNING: IframePlane does not work with touch events\n    \n    var element;\n    \n    if (this.iframeUrl) {\n        element = document.createElement(\"iframe\");\n        element.src = this.iframeUrl;\n        element.style.border = '0px';\n    } else {\n        element = null;\n    }\n\n    this._css3Plane = new pc.Css3Plane(element, this.entity, this.iframePixelsPerUnit);\n    \n    var material = new pc.StandardMaterial();\n    material.depthWrite = true;\n    material.redWrite = false;\n    material.greenWrite = false;\n    material.blueWrite = false;\n    material.alphaWrite = false;\n    material.blendType = pc.BLEND_NONE;\n    material.opacity = 0;\n    material.update();\n\n    this.entity.model.material = material;\n};\n\npc.extend(pc, function () {\n    'use strict';\n\n    var epsilon = function (value) {\n        return Math.abs(value) < 1e-10 ?0 :value;\n    };\n    \n    var app = pc.Application.getApplication();\n\n    // the Y axis of html is the opposite of gl,so multiply by minus one\n    var getCameraCSSMatrix = function (matrix) {\n        var elements = matrix.data;\n\n        return 'matrix3d(' +\n            epsilon( elements[ 0 ] ) + ',' +\n            epsilon( - elements[ 1 ] ) + ',' +\n            epsilon( elements[ 2 ] ) + ',' +\n            epsilon( elements[ 3 ] ) + ',' +\n            epsilon( elements[ 4 ] ) + ',' +\n            epsilon( - elements[ 5 ] ) + ',' +\n            epsilon( elements[ 6 ] ) + ',' +\n            epsilon( elements[ 7 ] ) + ',' +\n            epsilon( elements[ 8 ] ) + ',' +\n            epsilon( - elements[ 9 ] ) + ',' +\n            epsilon( elements[ 10 ] ) + ',' +\n            epsilon( elements[ 11 ] ) + ',' +\n            epsilon( elements[ 12 ] ) + ',' +\n            epsilon( - elements[ 13 ] ) + ',' +\n            epsilon( elements[ 14 ] ) + ',' +\n            epsilon( elements[ 15 ] ) +\n            ')';\n    };\n\n    // scaleX and scaleY represent how many pixels of div equlas to one unit of model.\n    var getObjectCSSMatrix = function(matrix,scaleX,scaleY) {        \n        var elements = matrix.data;\n\n        var matrix3d = 'matrix3d(' +\n            epsilon( elements[ 0 ] / scaleX) + ',' +\n            epsilon( elements[ 1 ] / scaleX) + ',' +\n            epsilon( elements[ 2 ] / scaleX) + ',' +\n            epsilon( elements[ 3 ] / scaleX) + ',' +\n            epsilon( elements[ 8 ] / scaleY) + ',' +\n            epsilon( elements[ 9 ] / scaleY) + ',' +\n            epsilon( elements[ 10 ] / scaleY) + ',' +\n            epsilon( elements[ 11 ] / scaleY) + ',' +\n            epsilon( elements[ 4 ] ) + ',' +\n            epsilon( elements[ 5 ] ) + ',' +\n            epsilon( elements[ 6 ] ) + ',' +\n            epsilon( elements[ 7 ] ) + ',' +\n            epsilon( elements[ 12 ] ) + ',' +\n            epsilon( elements[ 13 ] ) + ',' +\n            epsilon( elements[ 14 ] ) + ',' +\n            epsilon( elements[ 15 ] ) +\n            ')';\n\n        // Make sure the origin is in the center\n        return 'translate(-50%,-50%)' + matrix3d;\n    };\n\n    var randomCssColor = function() {\n        var r = Math.round(Math.random() * 255);\n        var g = Math.round(Math.random() * 255);\n        var b = Math.round(Math.random() * 255);\n\n        return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\n    };\n\n    // construct a css3 renderer\n    var Css3Renderer = function() {\n        // make sure we only have one css3 renderer\n        if(app.css3Renderer)\n            return app.css3Renderer;\n        app.css3Renderer = this;\n\n        // init data\n        this._stageElement = null;\n        this._cameras = [];\n        this._cameraElements = [];\n        this._defaultCameraElement = null;\n        this._css3Targets = [];\n        // cache\n        this._cameraInvertMat = new pc.Mat4();\n        this._cameraHalfSize = new pc.Vec2();\n\n        // create a div to contain all elements\n        var stageElement = document.createElement(\"div\");\n        stageElement.style.overflow = \"hidden\";\n        stageElement.style.pointerEvents = 'auto';\n        document.body.appendChild(stageElement);\n        \n        // have the touch device detect touches from the stage element instead\n        var touchDevice = app.touch;\n        if (touchDevice) {\n            touchDevice.attach(stageElement);\n        }\n\n        // make sure the div created is behind the canvas since we want to show the div when canvas is transparent\n        var canvas = document.getElementById(\"application-canvas\");\n        canvas.style.pointerEvents = \"none\";\n        document.body.insertBefore(stageElement,canvas);\n\n        this._stageElement = stageElement;\n\n        // add default camera\n        this._defaultCameraElement = this.addCamera(app.root.findComponent(\"camera\"));\n\n        var self = this;\n        function onWindowResize(){\n            self._width = window.innerWidth;\n            self._height = window.innerHeight;\n            self._widthHalf = self._width / 2;\n            self._heightHalf = self._height / 2;\n            self._stageElement.style.width = self._width + 'px';\n            self._stageElement.style.height = self._height + 'px';\n            for(var i = 0;i < self._cameraElements.length;i++) {\n                self._cameraElements[i].style.width = self._width + 'px';\n                self._cameraElements[i].style.height = self._height + 'px';\n            }\n        }\n        onWindowResize();\n\n        window.addEventListener(\"resize\", onWindowResize, false);\n    };\n\n    Css3Renderer.prototype = {\n        // start render every frame\n        render: function () {\n            if(this._isRendering)\n                return;\n\n            this._isRendering = true;\n            app.on(\"update\",this._renderElements,this);  \n        },\n\n        cancelRender: function() {\n            app.off(\"update\",this._renderElements,this);\n            this._isRendering = false;\n\n        },\n\n        // add new camera\n        addCamera: function (camera) {\n            // make sure the camera we added is not duplicate\n            if(!camera)\n                return this._defaultCameraElement;\n            if(this._cameras.indexOf(camera) > -1) {\n                return this._cameraElements[this._cameras.indexOf(camera)];   \n            }\n            // create a div for this camera\n            var cameraElement = document.createElement(\"div\");\n            cameraElement.style.WebkitTransformStyle = 'preserve-3d';\n            cameraElement.style.transformStyle = 'preserve-3d';\n            cameraElement.style.pointerEvents = 'none';\n            // add to html\n            this._stageElement.appendChild(cameraElement);\n            // camera cache\n            this._cameras.push(camera);\n            this._cameraElements.push(cameraElement);\n\n            return cameraElement;\n        },\n\n        // add new render element\n        addTarget: function (target) {\n            if(this._css3Targets.indexOf(target) <= -1) \n                this._css3Targets.push(target);\n        },\n\n        // set whether the div can be interacted\n        blockEvents: function (state) {\n            for(var i = 0;i < this._css3Targets.length;this._css3Targets[i++].blockEvents(state));\n        },\n\n        // render elements every frame\n        _renderElements: function () {\n            for(var i = 0;i < this._cameras.length;i++) {\n                var tx,ty,cameraCSSMatrix,style;\n                var camera = this._cameras[i];\n                var cameraElement = this._cameraElements[i];\n                var fov = camera.projectionMatrix.data[5] * this._heightHalf;\n\n                // update stage div\n                if(camera.projection == pc.PROJECTION_PERSPECTIVE) {\n                    this._stageElement.style.WebkitPerspective = fov + 'px';\n                    this._stageElement.style.perspective = fov + 'px';\n                }\n                else {\n                    this._stageElement.style.WebkitPerspective = '';\n                    this._stageElement.style.perspective = '';\n                }\n\n                // update camera\n                if(camera.projection == pc.PROJECTION_ORTHOGRAPHIC) {\n                    pc.Mat4._getPerspectiveHalfSize(this._cameraHalfSize, camera.fov, camera.aspectRatio, camera.nearClip, camera.horizontalFov);\n                    tx = - (this._cameraHalfSize.x - this._cameraHalfSize.x) / 2;\n                    ty = (this._cameraHalfSize.y - this._cameraHalfSize.y) / 2;\n                }\n                this._cameraInvertMat.copy(camera.entity.getWorldTransform()).invert();\n                cameraCSSMatrix = camera.projection == pc.PROJECTION_ORTHOGRAPHIC ?'scale(' + fov + ')' + 'translate(' + epsilon(tx) + 'px,' + epsilon(ty) + 'px)' + getCameraCSSMatrix(this._cameraInvertMat) \n                :'translateZ(' + fov +'px)' + getCameraCSSMatrix(this._cameraInvertMat);\n                style = cameraCSSMatrix + 'translate(' + this._widthHalf + 'px,' + this._heightHalf + 'px)';\n                cameraElement.style.WebkitTransform = style;\n                cameraElement.style.transform = style;\n            }\n\n            // update all div\n            for(var j = 0;j < this._css3Targets.length;this._css3Targets[j++].updateTransform());\n        }\n    };\n\n    /**\n    * @class\n    * @name pc.Css3Plane\n    * @classdesc merge the div and entity together.\n    * @description merge the div and entity together,update the domElement transform according to the entity every frame so they look the same to the viewer.\n    * @param {object} dom - the dom element to show,create a new one if not exist.\n    * @param {pc.Entity} entity - the entity to attach,create a new one if not exist.\n    * @param {number} pixelsPerWorldUnit - represent how many pixels of div equlas to one unit of model.\n    * @param {pc.CameraComponent} camera - the camera.\n    */\n    var Css3Plane = function (dom, entity, pixelsPerWorldUnit, camera) {        \n        // create a css3 renderer if we don't have one\n        if(!app.css3Renderer) {\n            app.css3Renderer = new pc.Css3Renderer();\n        }\n        // set the renderer\n        this._renderer = app.css3Renderer;\n\n        // create a div if we don't have one\n        if(!dom) {\n            dom = document.createElement('div');\n            dom.innerHTML = \"CSS3 Plane\"; \n            dom.style.backgroundColor = randomCssColor();  \n            dom.style.textAlign = \"center\"; // 文字居中\n        }\n        dom.style.position = 'absolute';\n        dom.style.pointerEvents = 'auto';\n        this.dom = dom;\n\n        // create an entity and add it to scene if we don't have one\n        if(!entity) {\n            entity = new pc.Entity();\n            app.root.addChild(entity);\n        }\n        this.entity = entity;\n\n        // add camera to renderer\n        var cameraElement = this._renderer.addCamera(camera);  \n        // add div to cameraElement\n        cameraElement.appendChild(dom);\n\n        // set the max width and height\n        this._maxWidth = 1920;\n        this._maxHeight = 1080;\n        // scaleFactor represent how many pixels of div equals to one unit of model.\n        pixelsPerWorldUnit = pixelsPerWorldUnit || this._maxWidth;\n        this.pixelsPerWorldUnit = new pc.Vec2(pixelsPerWorldUnit,pixelsPerWorldUnit);\n\n        // start render\n        this._renderer.addTarget(this); \n        this._renderer.render();\n    };\n\n    Css3Plane.prototype = {\n        // update model materix\n        updateTransform: function () {\n            var modelTransform = this.entity.getWorldTransform();\n            var scale = modelTransform.getScale();\n            var width = Math.min(scale.x * this.pixelsPerWorldUnit.x,this._maxWidth);\n            var height = Math.min(scale.z * this.pixelsPerWorldUnit.y,this._maxHeight);\n            var style = getObjectCSSMatrix(modelTransform,width,height);\n            \n            // Safari doesn't like multi decimal numbers for width and height\n            // and misaligns the iframe in the plane\n            \n            this.dom.style.width = Math.round(width) + \"px\";\n            this.dom.style.height = Math.round(height) + \"px\";\n            this.dom.style.lineHeight = this.dom.style.height;\n            this.dom.style.WebkitTransform = style;\n            this.dom.style.transform = style;\n        },\n\n        // set whether the div can be interacted\n        blockEvents: function (state) {\n            this.dom.style.pointerEvents = state ?\"none\" :\"auto\";  \n        },\n\n        // attach other plane in scene\n        attachPlane: function (entity) {\n            this.entity = entity;\n        }\n    };\n\n    return {\n        Css3Renderer: Css3Renderer,\n        Css3Plane: Css3Plane\n    };\n}());\n\n\n","// orbit-camera.js\nvar OrbitCamera = pc.createScript('orbitCamera');\n\nOrbitCamera.attributes.add('distanceMax', {type: 'number', default: 0, title: 'Distance Max', description: 'Setting this at 0 will give an infinite distance limit'});\nOrbitCamera.attributes.add('distanceMin', {type: 'number', default: 0, title: 'Distance Min'});\nOrbitCamera.attributes.add('pitchAngleMax', {type: 'number', default: 90, title: 'Pitch Angle Max (degrees)'});\nOrbitCamera.attributes.add('pitchAngleMin', {type: 'number', default: -90, title: 'Pitch Angle Min (degrees)'});\n\nOrbitCamera.attributes.add('inertiaFactor', {\n    type: 'number',\n    default: 0,\n    title: 'Inertia Factor',\n    description: 'Higher value means that the camera will continue moving after the user has stopped dragging. 0 is fully responsive.'\n});\n\nOrbitCamera.attributes.add('focusEntity', {\n    type: 'entity',\n    title: 'Focus Entity',\n    description: 'Entity for the camera to focus on. If blank, then the camera will use the whole scene'\n});\n\nOrbitCamera.attributes.add('frameOnStart', {\n    type: 'boolean',\n    default: true,\n    title: 'Frame on Start',\n    description: 'Frames the entity or scene at the start of the application.\"'\n});\n\n\n// Property to get and set the distance between the pivot point and camera\n// Clamped between this.distanceMin and this.distanceMax\nObject.defineProperty(OrbitCamera.prototype, \"distance\", {\n    get: function() {\n        return this._targetDistance;\n    },\n\n    set: function(value) {\n        this._targetDistance = this._clampDistance(value);\n    }\n});\n\n\n// Property to get and set the pitch of the camera around the pivot point (degrees)\n// Clamped between this.pitchAngleMin and this.pitchAngleMax\n// When set at 0, the camera angle is flat, looking along the horizon\nObject.defineProperty(OrbitCamera.prototype, \"pitch\", {\n    get: function() {\n        return this._targetPitch;\n    },\n\n    set: function(value) {\n        this._targetPitch = this._clampPitchAngle(value);\n    }\n});\n\n\n// Property to get and set the yaw of the camera around the pivot point (degrees)\nObject.defineProperty(OrbitCamera.prototype, \"yaw\", {\n    get: function() {\n        return this._targetYaw;\n    },\n\n    set: function(value) {\n        this._targetYaw = value;\n\n        // Ensure that the yaw takes the shortest route by making sure that \n        // the difference between the targetYaw and the actual is 180 degrees\n        // in either direction\n        var diff = this._targetYaw - this._yaw;\n        var reminder = diff % 360;\n        if (reminder > 180) {\n            this._targetYaw = this._yaw - (360 - reminder);\n        } else if (reminder < -180) {\n            this._targetYaw = this._yaw + (360 + reminder);\n        } else {\n            this._targetYaw = this._yaw + reminder;\n        }\n    }\n});\n\n\n// Property to get and set the world position of the pivot point that the camera orbits around\nObject.defineProperty(OrbitCamera.prototype, \"pivotPoint\", {\n    get: function() {\n        return this._pivotPoint;\n    },\n\n    set: function(value) {\n        this._pivotPoint.copy(value);\n    }\n});\n\n\n// Moves the camera to look at an entity and all its children so they are all in the view\nOrbitCamera.prototype.focus = function (focusEntity) {\n    // Calculate an bounding box that encompasses all the models to frame in the camera view\n    this._buildAabb(focusEntity, 0);\n\n    var halfExtents = this._modelsAabb.halfExtents;\n\n    var distance = Math.max(halfExtents.x, Math.max(halfExtents.y, halfExtents.z));\n    distance = (distance / Math.tan(0.5 * this.entity.camera.fov * pc.math.DEG_TO_RAD));\n    distance = (distance * 2);\n\n    this.distance = distance;\n\n    this._removeInertia();\n\n    this._pivotPoint.copy(this._modelsAabb.center);\n};\n\n\nOrbitCamera.distanceBetween = new pc.Vec3();\n\n// Set the camera position to a world position and look at a world position\n// Useful if you have multiple viewing angles to swap between in a scene\nOrbitCamera.prototype.resetAndLookAtPoint = function (resetPoint, lookAtPoint) {\n    this.pivotPoint.copy(lookAtPoint);\n    this.entity.setPosition(resetPoint);\n\n    this.entity.lookAt(lookAtPoint);\n\n    var distance = OrbitCamera.distanceBetween;\n    distance.sub2(lookAtPoint, resetPoint);\n    this.distance = distance.length();\n\n    this.pivotPoint.copy(lookAtPoint);\n\n    var cameraQuat = this.entity.getRotation();\n    this.yaw = this._calcYaw(cameraQuat);\n    this.pitch = this._calcPitch(cameraQuat, this.yaw);\n\n    this._removeInertia();\n    this._updatePosition();\n};\n\n\n// Set camera position to a world position and look at an entity in the scene\n// Useful if you have multiple models to swap between in a scene\nOrbitCamera.prototype.resetAndLookAtEntity = function (resetPoint, entity) {\n    this._buildAabb(entity, 0);\n    this.resetAndLookAtPoint(resetPoint, this._modelsAabb.center);\n};\n\n\n// Set the camera at a specific, yaw, pitch and distance without inertia (instant cut)\nOrbitCamera.prototype.reset = function (yaw, pitch, distance) {\n    this.pitch = pitch;\n    this.yaw = yaw;\n    this.distance = distance;\n\n    this._removeInertia();\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////\n// Private methods\n\nOrbitCamera.prototype.initialize = function () {\n    var self = this;\n    var onWindowResize = function () {\n        self._checkAspectRatio();\n    };\n\n    window.addEventListener('resize', onWindowResize, false);\n\n    this._checkAspectRatio();\n\n    // Find all the models in the scene that are under the focused entity\n    this._modelsAabb = new pc.BoundingBox();\n    this._buildAabb(this.focusEntity || this.app.root, 0);\n\n    this.entity.lookAt(this._modelsAabb.center);\n\n    this._pivotPoint = new pc.Vec3();\n    this._pivotPoint.copy(this._modelsAabb.center);\n\n    // Calculate the camera euler angle rotation around x and y axes\n    // This allows us to place the camera at a particular rotation to begin with in the scene\n    var cameraQuat = this.entity.getRotation();\n\n    // Preset the camera\n    this._yaw = this._calcYaw(cameraQuat);\n    this._pitch = this._clampPitchAngle(this._calcPitch(cameraQuat, this._yaw));\n    this.entity.setLocalEulerAngles(this._pitch, this._yaw, 0);\n\n    this._distance = 0;\n\n    this._targetYaw = this._yaw;\n    this._targetPitch = this._pitch;\n\n    // If we have ticked focus on start, then attempt to position the camera where it frames\n    // the focused entity and move the pivot point to entity's position otherwise, set the distance\n    // to be between the camera position in the scene and the pivot point\n    if (this.frameOnStart) {\n        this.focus(this.focusEntity || this.app.root);\n    } else {\n        var distanceBetween = new pc.Vec3();\n        distanceBetween.sub2(this.entity.getPosition(), this._pivotPoint);\n        this._distance = this._clampDistance(distanceBetween.length());\n    }\n\n    this._targetDistance = this._distance;\n\n    // Reapply the clamps if they are changed in the editor\n    this.on('attr:distanceMin', function (value, prev) {\n        this._targetDistance = this._clampDistance(this._distance);\n    });\n\n    this.on('attr:distanceMax', function (value, prev) {\n        this._targetDistance = this._clampDistance(this._distance);\n    });\n\n    this.on('attr:pitchAngleMin', function (value, prev) {\n        this._targetPitch = this._clampPitchAngle(this._pitch);\n    });\n\n    this.on('attr:pitchAngleMax', function (value, prev) {\n        this._targetPitch = this._clampPitchAngle(this._pitch);\n    });\n\n    // Focus on the entity if we change the focus entity\n    this.on('attr:focusEntity', function (value, prev) {\n        if (this.frameOnStart) {\n            this.focus(value || this.app.root);\n        } else {\n            this.resetAndLookAtEntity(this.entity.getPosition(), value || this.app.root);\n        }\n    });\n\n    this.on('attr:frameOnStart', function (value, prev) {\n        if (value) {\n            this.focus(this.focusEntity || this.app.root);\n        }\n    });\n\n    this.on('destroy', function() {\n        window.removeEventListener('resize', onWindowResize, false);\n    });\n\n    this.pause = false;\n    this.app.on(\"disableOrbitCamera\",function(state) {\n        if(this.pause == state)\n            return;\n        if(state) {\n            this.pause = true;\n            this.distanceBac = this._distance;\n            this.yawBac = this._yaw;\n            this.pitchBac = this._pitch;\n        }\n        else {\n            this._targetDistance = this._distance = this.distanceBac;\n            this._targetYaw = this._yaw = this.yawBac;\n            this._targetPitch = this._pitch = this.pitchBac;\n            this.pause = false;\n        }\n    },this);\n};\n\n\nOrbitCamera.prototype.update = function(dt) {\n\n    if(this.pause)\n        return;\n\n    // Add inertia, if any\n    var t = this.inertiaFactor === 0 ? 1 : Math.min(dt / this.inertiaFactor, 1);\n    this._distance = pc.math.lerp(this._distance, this._targetDistance, t);\n    this._yaw = pc.math.lerp(this._yaw, this._targetYaw, t);\n    this._pitch = pc.math.lerp(this._pitch, this._targetPitch, t);\n\n    this._updatePosition();\n};\n\n\nOrbitCamera.prototype._updatePosition = function () {\n    // Work out the camera position based on the pivot point, pitch, yaw and distance\n    this.entity.setLocalPosition(0,0,0);\n    this.entity.setLocalEulerAngles(this._pitch, this._yaw, 0);\n\n    var position = this.entity.getPosition();\n    position.copy(this.entity.forward);\n    position.scale(-this._distance);\n    position.add(this.pivotPoint);\n    this.entity.setPosition(position);\n};\n\n\nOrbitCamera.prototype._removeInertia = function () {\n    this._yaw = this._targetYaw;\n    this._pitch = this._targetPitch;\n    this._distance = this._targetDistance;\n};\n\n\nOrbitCamera.prototype._checkAspectRatio = function () {\n    var height = this.app.graphicsDevice.height;\n    var width = this.app.graphicsDevice.width;\n\n    // Match the axis of FOV to match the aspect ratio of the canvas so\n    // the focused entities is always in frame\n    this.entity.camera.horizontalFov = height > width;\n};\n\n\nOrbitCamera.prototype._buildAabb = function (entity, modelsAdded) {\n    var i = 0;\n\n    if (entity.model) {\n        var mi = entity.model.meshInstances;\n        for (i = 0; i < mi.length; i++) {\n            if (modelsAdded === 0) {\n                this._modelsAabb.copy(mi[i].aabb);\n            } else {\n                this._modelsAabb.add(mi[i].aabb);\n            }\n\n            modelsAdded += 1;\n        }\n    }\n\n    for (i = 0; i < entity.children.length; ++i) {\n        modelsAdded += this._buildAabb(entity.children[i], modelsAdded);\n    }\n\n    return modelsAdded;\n};\n\n\nOrbitCamera.prototype._calcYaw = function (quat) {\n    var transformedForward = new pc.Vec3();\n    quat.transformVector(pc.Vec3.FORWARD, transformedForward);\n\n    return Math.atan2(-transformedForward.x, -transformedForward.z) * pc.math.RAD_TO_DEG;\n};\n\n\nOrbitCamera.prototype._clampDistance = function (distance) {\n    if (this.distanceMax > 0) {\n        return pc.math.clamp(distance, this.distanceMin, this.distanceMax);\n    } else {\n        return Math.max(distance, this.distanceMin);\n    }\n};\n\n\nOrbitCamera.prototype._clampPitchAngle = function (pitch) {\n    // Negative due as the pitch is inversed since the camera is orbiting the entity\n    return pc.math.clamp(pitch, -this.pitchAngleMax, -this.pitchAngleMin);\n};\n\n\nOrbitCamera.quatWithoutYaw = new pc.Quat();\nOrbitCamera.yawOffset = new pc.Quat();\n\nOrbitCamera.prototype._calcPitch = function(quat, yaw) {\n    var quatWithoutYaw = OrbitCamera.quatWithoutYaw;\n    var yawOffset = OrbitCamera.yawOffset;\n\n    yawOffset.setFromEulerAngles(0, -yaw, 0);\n    quatWithoutYaw.mul2(yawOffset, quat);\n\n    var transformedForward = new pc.Vec3();\n\n    quatWithoutYaw.transformVector(pc.Vec3.FORWARD, transformedForward);\n\n    return Math.atan2(transformedForward.y, -transformedForward.z) * pc.math.RAD_TO_DEG;\n};\n\n","// keyboard-input.js\nvar KeyboardInput = pc.createScript('keyboardInput');\n\n// initialize code called once per entity\nKeyboardInput.prototype.initialize = function() {\n    this.orbitCamera = this.entity.script.orbitCamera;\n};\n\n\nKeyboardInput.prototype.postInitialize = function() {\n    if (this.orbitCamera) {\n        this.startDistance = this.orbitCamera.distance;\n        this.startYaw = this.orbitCamera.yaw;\n        this.startPitch = this.orbitCamera.pitch;\n        this.startPivotPosition = this.orbitCamera.pivotPoint.clone();\n    }\n};\n\n// update code called every frame\nKeyboardInput.prototype.update = function(dt) {\n    if (this.orbitCamera) {\n        if (this.app.keyboard.wasPressed(pc.KEY_SPACE)) {\n            this.orbitCamera.reset(this.startYaw, this.startPitch, this.startDistance);\n            this.orbitCamera.pivotPoint = this.startPivotPosition;\n        }\n    }\n};\n\n\n","// html-handler.js\n// this script can reference html asset as an attribute\n// and will live update dom and reattach events to it on html changes\n// so that launcher don't need to be refreshed during development\nvar HtmlHandler = pc.createScript('htmlHandler');\n\nHtmlHandler.attributes.add('html', {type: 'asset', assetType:'html', title: 'HTML Asset'});\n\nHtmlHandler.prototype.initialize = function() {\n    // create DIV element\n    this.element = document.createElement('div');\n    this.element.classList.add('container');\n\n    // append to body\n    // can be appended somewhere else\n    // it is recommended to have some container element\n    // to prevent iOS problems of overfloating elements off the screen\n    document.body.appendChild(this.element);\n\n    // asset\n    this.asset = null;\n    this.assetId = 0;\n\n    this.counter = 0;\n};\n\n\nHtmlHandler.prototype.attachAsset = function(assetId, fn) {\n    // remember current assetId\n    this.assetId = assetId;\n\n    // might be no asset provided\n    if (! this.assetId)\n        return fn.call(this);\n\n    // get asset from registry\n    var asset = this.app.assets.get(this.assetId);\n\n    // store callback of an asset load event\n    var self = this;\n    asset._onLoad = function(asset) {\n        fn.call(self, asset, asset.resource);\n    };\n\n    // subscribe to changes on resource\n    asset.on('load', asset._onLoad);\n    // callback\n    fn.call(this, asset, asset.resource);\n    // load asset if not loaded\n    this.app.assets.load(asset);\n};\n\n\nHtmlHandler.prototype.template = function(asset, html) {\n    // unsubscribe from old asset load event if required\n    if (this.asset && this.asset !== asset)\n        this.asset.off('load', this.asset._onLoad);\n\n    // remember current asset\n    this.asset = asset;\n\n    // template element\n    // you can use templating languages with renderers here\n    // such as hogan, mustache, handlebars or any other\n    this.element.innerHTML = html || '';\n\n    // bind some events to dom of an element\n    // it has to be done on each retemplate\n    if (html)\n        this.bindEvents();\n};\n\n\nHtmlHandler.prototype.bindEvents = function() {\n    var self = this;\n    // example\n    //\n    // get button element by class\n    var button = this.element.querySelector('.button');\n    var inputBox = this.element.querySelector('.inputBox');\n    // if found\n    if (button) {\n        // add event listener on `click`\n        button.addEventListener('click', function() {\n            \n            var screen = self.app.root.findByName('Screen Plane');\n            \n            var url = inputBox.value.toString();\n            \n            screen.script.iframePlane.createScreen('https://player.bilibili.com/player.html?&bvid='+url);\n            console.log(url);\n            \n            console.log('button clicked');\n\n            // try to find object and change its material diffuse color\n            // just for fun purposes\n\n        }, false);\n    }\n\n};\n\nHtmlHandler.prototype.update = function (dt) {\n    // check for swapped asset\n    // if so, then start asset loading and templating\n    if (this.assetId !== this.html.id)\n        this.attachAsset(this.html.id, this.template);\n};\n\n","// mouse-input.js\nvar MouseInput = pc.createScript('mouseInput');\n\nMouseInput.attributes.add('orbitSensitivity', {\n    type: 'number', \n    default: 0.3, \n    title: 'Orbit Sensitivity', \n    description: 'How fast the camera moves around the orbit. Higher is faster'\n});\n\nMouseInput.attributes.add('distanceSensitivity', {\n    type: 'number', \n    default: 0.15, \n    title: 'Distance Sensitivity', \n    description: 'How fast the camera moves in and out. Higher is faster'\n});\n\n// initialize code called once per entity\nMouseInput.prototype.initialize = function() {\n    this.orbitCamera = this.entity.script.orbitCamera;\n\n    if (this.orbitCamera) {\n        var self = this;\n\n        var onMouseOut = function (e) {\n            self.onMouseOut(e);\n        };\n\n        this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n        this.app.mouse.on(pc.EVENT_MOUSEUP, this.onMouseUp, this);\n        this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n        this.app.mouse.on(pc.EVENT_MOUSEWHEEL, this.onMouseWheel, this);\n\n        // Listen to when the mouse travels out of the window\n        window.addEventListener('mouseout', onMouseOut, false);\n\n        // Remove the listeners so if this entity is destroyed\n        this.on('destroy', function() {\n            this.app.mouse.off(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n            this.app.mouse.off(pc.EVENT_MOUSEUP, this.onMouseUp, this);\n            this.app.mouse.off(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n            this.app.mouse.off(pc.EVENT_MOUSEWHEEL, this.onMouseWheel, this);\n\n            window.removeEventListener('mouseout', onMouseOut, false);\n        });\n    }\n\n    // Disabling the context menu stops the browser displaying a menu when\n    // you right-click the page\n    this.app.mouse.disableContextMenu();\n\n    this.lookButtonDown = false;\n    this.panButtonDown = false;\n    this.lastPoint = new pc.Vec2();\n};\n\n\nMouseInput.fromWorldPoint = new pc.Vec3();\nMouseInput.toWorldPoint = new pc.Vec3();\nMouseInput.worldDiff = new pc.Vec3();\n\n\nMouseInput.prototype.pan = function(screenPoint) {\n    var fromWorldPoint = MouseInput.fromWorldPoint;\n    var toWorldPoint = MouseInput.toWorldPoint;\n    var worldDiff = MouseInput.worldDiff;\n\n    // For panning to work at any zoom level, we use screen point to world projection\n    // to work out how far we need to pan the pivotEntity in world space \n    var camera = this.entity.camera;\n    var distance = this.orbitCamera.distance;\n\n    camera.screenToWorld(screenPoint.x, screenPoint.y, distance, fromWorldPoint);\n    camera.screenToWorld(this.lastPoint.x, this.lastPoint.y, distance, toWorldPoint);\n\n    worldDiff.sub2(toWorldPoint, fromWorldPoint);\n\n    this.orbitCamera.pivotPoint.add(worldDiff);    \n};\n\n\nMouseInput.prototype.onMouseDown = function (event) {\n    switch (event.button) {\n        case pc.MOUSEBUTTON_LEFT: {\n            this.lookButtonDown = true;\n            pc.app.css3Renderer.blockEvents(true);\n        } break;\n\n        case pc.MOUSEBUTTON_MIDDLE: \n        case pc.MOUSEBUTTON_RIGHT: {\n            this.panButtonDown = true;\n            pc.app.css3Renderer.blockEvents(true);\n        } break;\n    }\n};\n\n\nMouseInput.prototype.onMouseUp = function (event) {\n    switch (event.button) {\n        case pc.MOUSEBUTTON_LEFT: {\n            this.lookButtonDown = false;\n            pc.app.css3Renderer.blockEvents(false);\n        } break;\n\n        case pc.MOUSEBUTTON_MIDDLE: \n        case pc.MOUSEBUTTON_RIGHT: {\n            this.panButtonDown = false;      \n            pc.app.css3Renderer.blockEvents(false);\n        } break;\n    }\n};\n\n\nMouseInput.prototype.onMouseMove = function (event) {    \n    var mouse = pc.app.mouse;\n    if (this.lookButtonDown) {\n        this.orbitCamera.pitch -= event.dy * this.orbitSensitivity;\n        this.orbitCamera.yaw -= event.dx * this.orbitSensitivity;\n\n    } else if (this.panButtonDown) {\n        this.pan(event);   \n    }\n\n    this.lastPoint.set(event.x, event.y);\n};\n\n\nMouseInput.prototype.onMouseWheel = function (event) {\n    this.orbitCamera.distance -= event.wheel * this.distanceSensitivity * (this.orbitCamera.distance * 0.1);\n    event.event.preventDefault();\n};\n\n\nMouseInput.prototype.onMouseOut = function (event) {\n    this.lookButtonDown = false;\n    this.panButtonDown = false;\n    pc.app.css3Renderer.blockEvents(false);\n};\n\n","// css-handler.js\n// this script can reference html asset as an attribute\n// and will live update dom and reattach events to it on html changes\n// so that launcher don't need to be refreshed during development\nvar CssHandler = pc.createScript('cssHandler');\n\nCssHandler.attributes.add('css', {type: 'asset', assetType:'css', title: 'CSS Asset'});\n\nCssHandler.prototype.initialize = function () {\n    // create STYLE element\n    this.element = document.createElement('style');\n\n    // append to head\n    document.head.appendChild(this.element);\n\n    // asset\n    this.asset = null;\n    this.assetId = 0;\n};\n\n\nCssHandler.prototype.attachAsset = function(assetId, fn) {\n    // remember current assetId\n    this.assetId = assetId;\n\n    // might be no asset provided\n    if (! this.assetId)\n        return fn.call(this);\n\n    // get asset from registry\n    var asset = this.app.assets.get(this.assetId);\n\n    // store callback of an asset load event\n    var self = this;\n    asset._onLoad = function(asset) {\n        fn.call(self, asset, asset.resource);\n    };\n\n    // subscribe to changes on resource\n    asset.on('load', asset._onLoad);\n    // callback\n    fn.call(this, asset, asset.resource);\n    // load asset if not loaded\n    this.app.assets.load(asset);\n};\n\n\nCssHandler.prototype.template = function(asset, css) {\n    // unsubscribe from old asset load event if required\n    if (this.asset && this.asset !== asset)\n        this.asset.off('load', this.asset._onLoad);\n\n    // remember current asset\n    this.asset = asset;\n\n    // template element\n    // you can use templating languages with renderers here\n    // such as hogan, mustache, handlebars or any other\n    this.element.innerHTML = css || '';\n};\n\n\nCssHandler.prototype.update = function (dt) {\n    // check for swapped asset\n    // if so, then start asset loading and templating\n    if (this.assetId !== this.css.id)\n        this.attachAsset(this.css.id, this.template);\n};\n\n\n","// touch-input.js\nvar TouchInput = pc.createScript('touchInput');\n\nTouchInput.attributes.add('orbitSensitivity', {\n    type: 'number', \n    default: 0.4, \n    title: 'Orbit Sensitivity', \n    description: 'How fast the camera moves around the orbit. Higher is faster'\n});\n\nTouchInput.attributes.add('distanceSensitivity', {\n    type: 'number', \n    default: 0.2, \n    title: 'Distance Sensitivity', \n    description: 'How fast the camera moves in and out. Higher is faster'\n});\n\n// initialize code called once per entity\nTouchInput.prototype.initialize = function() {\n    this.orbitCamera = this.entity.script.orbitCamera;\n    \n    // Store the position of the touch so we can calculate the distance moved\n    this.lastTouchPoint = new pc.Vec2();\n    this.lastPinchMidPoint = new pc.Vec2();\n    this.lastPinchDistance = 0;\n    \n    if (this.orbitCamera && this.app.touch) {\n        // Use the same callback for the touchStart, touchEnd and touchCancel events as they \n        // all do the same thing which is to deal the possible multiple touches to the screen\n        this.app.touch.on(pc.EVENT_TOUCHSTART, this.onTouchStartEndCancel, this);\n        this.app.touch.on(pc.EVENT_TOUCHEND, this.onTouchStartEndCancel, this);\n        this.app.touch.on(pc.EVENT_TOUCHCANCEL, this.onTouchStartEndCancel, this);\n        \n        this.app.touch.on(pc.EVENT_TOUCHMOVE, this.onTouchMove, this);\n        \n        this.on('destroy', function() {\n            this.app.touch.off(pc.EVENT_TOUCHSTART, this.onTouchStartEndCancel, this);\n            this.app.touch.off(pc.EVENT_TOUCHEND, this.onTouchStartEndCancel, this);\n            this.app.touch.off(pc.EVENT_TOUCHCANCEL, this.onTouchStartEndCancel, this);\n\n            this.app.touch.off(pc.EVENT_TOUCHMOVE, this.onTouchMove, this);\n        });\n    }\n};\n\n\nTouchInput.prototype.getPinchDistance = function (pointA, pointB) {\n    // Return the distance between the two points\n    var dx = pointA.x - pointB.x;\n    var dy = pointA.y - pointB.y;    \n    \n    return Math.sqrt((dx * dx) + (dy * dy));\n};\n\n\nTouchInput.prototype.calcMidPoint = function (pointA, pointB, result) {\n    result.set(pointB.x - pointA.x, pointB.y - pointA.y);\n    result.scale(0.5);\n    result.x += pointA.x;\n    result.y += pointA.y;\n};\n\n\nTouchInput.prototype.onTouchStartEndCancel = function(event) {\n    // We only care about the first touch for camera rotation. As the user touches the screen, \n    // we stored the current touch position\n    var touches = event.touches;\n    if (touches.length == 1) {\n        this.lastTouchPoint.set(touches[0].x, touches[0].y);\n        pc.app.css3Renderer.blockEvents(true);\n    \n    } else if (touches.length == 2) {\n        // If there are 2 touches on the screen, then set the pinch distance\n        this.lastPinchDistance = this.getPinchDistance(touches[0], touches[1]);\n        this.calcMidPoint(touches[0], touches[1], this.lastPinchMidPoint);\n        pc.app.css3Renderer.blockEvents(true);\n    }\n    else {\n        pc.app.css3Renderer.blockEvents(false);\n    }\n};\n\n\nTouchInput.fromWorldPoint = new pc.Vec3();\nTouchInput.toWorldPoint = new pc.Vec3();\nTouchInput.worldDiff = new pc.Vec3();\n\n\nTouchInput.prototype.pan = function(midPoint) {\n    var fromWorldPoint = TouchInput.fromWorldPoint;\n    var toWorldPoint = TouchInput.toWorldPoint;\n    var worldDiff = TouchInput.worldDiff;\n    \n    // For panning to work at any zoom level, we use screen point to world projection\n    // to work out how far we need to pan the pivotEntity in world space \n    var camera = this.entity.camera;\n    var distance = this.orbitCamera.distance;\n    \n    camera.screenToWorld(midPoint.x, midPoint.y, distance, fromWorldPoint);\n    camera.screenToWorld(this.lastPinchMidPoint.x, this.lastPinchMidPoint.y, distance, toWorldPoint);\n    \n    worldDiff.sub2(toWorldPoint, fromWorldPoint);\n     \n    this.orbitCamera.pivotPoint.add(worldDiff);    \n};\n\n\nTouchInput.pinchMidPoint = new pc.Vec2();\n\nTouchInput.prototype.onTouchMove = function(event) {\n    var pinchMidPoint = TouchInput.pinchMidPoint;\n    \n    // We only care about the first touch for camera rotation. Work out the difference moved since the last event\n    // and use that to update the camera target position \n    var touches = event.touches;\n    if (touches.length == 1) {\n        var touch = touches[0];\n        \n        this.orbitCamera.pitch -= (touch.y - this.lastTouchPoint.y) * this.orbitSensitivity;\n        this.orbitCamera.yaw -= (touch.x - this.lastTouchPoint.x) * this.orbitSensitivity;\n        \n        this.lastTouchPoint.set(touch.x, touch.y);\n    \n    } else if (touches.length == 2) {\n        // Calculate the difference in pinch distance since the last event\n        var currentPinchDistance = this.getPinchDistance(touches[0], touches[1]);\n        var diffInPinchDistance = currentPinchDistance - this.lastPinchDistance;\n        this.lastPinchDistance = currentPinchDistance;\n                \n        this.orbitCamera.distance -= (diffInPinchDistance * this.distanceSensitivity * 0.1) * (this.orbitCamera.distance * 0.1);\n        \n        // Calculate pan difference\n        this.calcMidPoint(touches[0], touches[1], pinchMidPoint);\n        // this.pan(pinchMidPoint);\n        this.lastPinchMidPoint.copy(pinchMidPoint);\n    }\n};\n\n\n","// keyboard-input.js\nvar KeyboardInput = pc.createScript('keyboardInput');\n\n// initialize code called once per entity\nKeyboardInput.prototype.initialize = function() {\n    this.orbitCamera = this.entity.script.orbitCamera;\n};\n\n\nKeyboardInput.prototype.postInitialize = function() {\n    if (this.orbitCamera) {\n        this.startDistance = this.orbitCamera.distance;\n        this.startYaw = this.orbitCamera.yaw;\n        this.startPitch = this.orbitCamera.pitch;\n        this.startPivotPosition = this.orbitCamera.pivotPoint.clone();\n    }\n};\n\n// update code called every frame\nKeyboardInput.prototype.update = function(dt) {\n    if (this.orbitCamera) {\n        if (this.app.keyboard.wasPressed(pc.KEY_SPACE)) {\n            this.orbitCamera.reset(this.startYaw, this.startPitch, this.startDistance);\n            this.orbitCamera.pivotPoint = this.startPivotPosition;\n        }\n    }\n};\n\n\n","// orbit-camera.js\nvar OrbitCamera = pc.createScript('orbitCamera');\n\nOrbitCamera.attributes.add('distanceMax', {type: 'number', default: 0, title: 'Distance Max', description: 'Setting this at 0 will give an infinite distance limit'});\nOrbitCamera.attributes.add('distanceMin', {type: 'number', default: 0, title: 'Distance Min'});\nOrbitCamera.attributes.add('pitchAngleMax', {type: 'number', default: 90, title: 'Pitch Angle Max (degrees)'});\nOrbitCamera.attributes.add('pitchAngleMin', {type: 'number', default: -90, title: 'Pitch Angle Min (degrees)'});\n\nOrbitCamera.attributes.add('inertiaFactor', {\n    type: 'number',\n    default: 0,\n    title: 'Inertia Factor',\n    description: 'Higher value means that the camera will continue moving after the user has stopped dragging. 0 is fully responsive.'\n});\n\nOrbitCamera.attributes.add('focusEntity', {\n    type: 'entity',\n    title: 'Focus Entity',\n    description: 'Entity for the camera to focus on. If blank, then the camera will use the whole scene'\n});\n\nOrbitCamera.attributes.add('frameOnStart', {\n    type: 'boolean',\n    default: true,\n    title: 'Frame on Start',\n    description: 'Frames the entity or scene at the start of the application.\"'\n});\n\n\n// Property to get and set the distance between the pivot point and camera\n// Clamped between this.distanceMin and this.distanceMax\nObject.defineProperty(OrbitCamera.prototype, \"distance\", {\n    get: function() {\n        return this._targetDistance;\n    },\n\n    set: function(value) {\n        this._targetDistance = this._clampDistance(value);\n    }\n});\n\n\n// Property to get and set the pitch of the camera around the pivot point (degrees)\n// Clamped between this.pitchAngleMin and this.pitchAngleMax\n// When set at 0, the camera angle is flat, looking along the horizon\nObject.defineProperty(OrbitCamera.prototype, \"pitch\", {\n    get: function() {\n        return this._targetPitch;\n    },\n\n    set: function(value) {\n        this._targetPitch = this._clampPitchAngle(value);\n    }\n});\n\n\n// Property to get and set the yaw of the camera around the pivot point (degrees)\nObject.defineProperty(OrbitCamera.prototype, \"yaw\", {\n    get: function() {\n        return this._targetYaw;\n    },\n\n    set: function(value) {\n        this._targetYaw = value;\n\n        // Ensure that the yaw takes the shortest route by making sure that \n        // the difference between the targetYaw and the actual is 180 degrees\n        // in either direction\n        var diff = this._targetYaw - this._yaw;\n        var reminder = diff % 360;\n        if (reminder > 180) {\n            this._targetYaw = this._yaw - (360 - reminder);\n        } else if (reminder < -180) {\n            this._targetYaw = this._yaw + (360 + reminder);\n        } else {\n            this._targetYaw = this._yaw + reminder;\n        }\n    }\n});\n\n\n// Property to get and set the world position of the pivot point that the camera orbits around\nObject.defineProperty(OrbitCamera.prototype, \"pivotPoint\", {\n    get: function() {\n        return this._pivotPoint;\n    },\n\n    set: function(value) {\n        this._pivotPoint.copy(value);\n    }\n});\n\n\n// Moves the camera to look at an entity and all its children so they are all in the view\nOrbitCamera.prototype.focus = function (focusEntity) {\n    // Calculate an bounding box that encompasses all the models to frame in the camera view\n    this._buildAabb(focusEntity, 0);\n\n    var halfExtents = this._modelsAabb.halfExtents;\n\n    var distance = Math.max(halfExtents.x, Math.max(halfExtents.y, halfExtents.z));\n    distance = (distance / Math.tan(0.5 * this.entity.camera.fov * pc.math.DEG_TO_RAD));\n    distance = (distance * 2);\n\n    this.distance = distance;\n\n    this._removeInertia();\n\n    this._pivotPoint.copy(this._modelsAabb.center);\n};\n\n\nOrbitCamera.distanceBetween = new pc.Vec3();\n\n// Set the camera position to a world position and look at a world position\n// Useful if you have multiple viewing angles to swap between in a scene\nOrbitCamera.prototype.resetAndLookAtPoint = function (resetPoint, lookAtPoint) {\n    this.pivotPoint.copy(lookAtPoint);\n    this.entity.setPosition(resetPoint);\n\n    this.entity.lookAt(lookAtPoint);\n\n    var distance = OrbitCamera.distanceBetween;\n    distance.sub2(lookAtPoint, resetPoint);\n    this.distance = distance.length();\n\n    this.pivotPoint.copy(lookAtPoint);\n\n    var cameraQuat = this.entity.getRotation();\n    this.yaw = this._calcYaw(cameraQuat);\n    this.pitch = this._calcPitch(cameraQuat, this.yaw);\n\n    this._removeInertia();\n    this._updatePosition();\n};\n\n\n// Set camera position to a world position and look at an entity in the scene\n// Useful if you have multiple models to swap between in a scene\nOrbitCamera.prototype.resetAndLookAtEntity = function (resetPoint, entity) {\n    this._buildAabb(entity, 0);\n    this.resetAndLookAtPoint(resetPoint, this._modelsAabb.center);\n};\n\n\n// Set the camera at a specific, yaw, pitch and distance without inertia (instant cut)\nOrbitCamera.prototype.reset = function (yaw, pitch, distance) {\n    this.pitch = pitch;\n    this.yaw = yaw;\n    this.distance = distance;\n\n    this._removeInertia();\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////\n// Private methods\n\nOrbitCamera.prototype.initialize = function () {\n    var self = this;\n    var onWindowResize = function () {\n        self._checkAspectRatio();\n    };\n\n    window.addEventListener('resize', onWindowResize, false);\n\n    this._checkAspectRatio();\n\n    // Find all the models in the scene that are under the focused entity\n    this._modelsAabb = new pc.BoundingBox();\n    this._buildAabb(this.focusEntity || this.app.root, 0);\n\n    this.entity.lookAt(this._modelsAabb.center);\n\n    this._pivotPoint = new pc.Vec3();\n    this._pivotPoint.copy(this._modelsAabb.center);\n\n    // Calculate the camera euler angle rotation around x and y axes\n    // This allows us to place the camera at a particular rotation to begin with in the scene\n    var cameraQuat = this.entity.getRotation();\n\n    // Preset the camera\n    this._yaw = this._calcYaw(cameraQuat);\n    this._pitch = this._clampPitchAngle(this._calcPitch(cameraQuat, this._yaw));\n    this.entity.setLocalEulerAngles(this._pitch, this._yaw, 0);\n\n    this._distance = 0;\n\n    this._targetYaw = this._yaw;\n    this._targetPitch = this._pitch;\n\n    // If we have ticked focus on start, then attempt to position the camera where it frames\n    // the focused entity and move the pivot point to entity's position otherwise, set the distance\n    // to be between the camera position in the scene and the pivot point\n    if (this.frameOnStart) {\n        this.focus(this.focusEntity || this.app.root);\n    } else {\n        var distanceBetween = new pc.Vec3();\n        distanceBetween.sub2(this.entity.getPosition(), this._pivotPoint);\n        this._distance = this._clampDistance(distanceBetween.length());\n    }\n\n    this._targetDistance = this._distance;\n\n    // Reapply the clamps if they are changed in the editor\n    this.on('attr:distanceMin', function (value, prev) {\n        this._targetDistance = this._clampDistance(this._distance);\n    });\n\n    this.on('attr:distanceMax', function (value, prev) {\n        this._targetDistance = this._clampDistance(this._distance);\n    });\n\n    this.on('attr:pitchAngleMin', function (value, prev) {\n        this._targetPitch = this._clampPitchAngle(this._pitch);\n    });\n\n    this.on('attr:pitchAngleMax', function (value, prev) {\n        this._targetPitch = this._clampPitchAngle(this._pitch);\n    });\n\n    // Focus on the entity if we change the focus entity\n    this.on('attr:focusEntity', function (value, prev) {\n        if (this.frameOnStart) {\n            this.focus(value || this.app.root);\n        } else {\n            this.resetAndLookAtEntity(this.entity.getPosition(), value || this.app.root);\n        }\n    });\n\n    this.on('attr:frameOnStart', function (value, prev) {\n        if (value) {\n            this.focus(this.focusEntity || this.app.root);\n        }\n    });\n\n    this.on('destroy', function() {\n        window.removeEventListener('resize', onWindowResize, false);\n    });\n\n    this.pause = false;\n    this.app.on(\"disableOrbitCamera\",function(state) {\n        if(this.pause == state)\n            return;\n        if(state) {\n            this.pause = true;\n            this.distanceBac = this._distance;\n            this.yawBac = this._yaw;\n            this.pitchBac = this._pitch;\n        }\n        else {\n            this._targetDistance = this._distance = this.distanceBac;\n            this._targetYaw = this._yaw = this.yawBac;\n            this._targetPitch = this._pitch = this.pitchBac;\n            this.pause = false;\n        }\n    },this);\n};\n\n\nOrbitCamera.prototype.update = function(dt) {\n\n    if(this.pause)\n        return;\n\n    // Add inertia, if any\n    var t = this.inertiaFactor === 0 ? 1 : Math.min(dt / this.inertiaFactor, 1);\n    this._distance = pc.math.lerp(this._distance, this._targetDistance, t);\n    this._yaw = pc.math.lerp(this._yaw, this._targetYaw, t);\n    this._pitch = pc.math.lerp(this._pitch, this._targetPitch, t);\n\n    this._updatePosition();\n};\n\n\nOrbitCamera.prototype._updatePosition = function () {\n    // Work out the camera position based on the pivot point, pitch, yaw and distance\n    this.entity.setLocalPosition(0,0,0);\n    this.entity.setLocalEulerAngles(this._pitch, this._yaw, 0);\n\n    var position = this.entity.getPosition();\n    position.copy(this.entity.forward);\n    position.scale(-this._distance);\n    position.add(this.pivotPoint);\n    this.entity.setPosition(position);\n};\n\n\nOrbitCamera.prototype._removeInertia = function () {\n    this._yaw = this._targetYaw;\n    this._pitch = this._targetPitch;\n    this._distance = this._targetDistance;\n};\n\n\nOrbitCamera.prototype._checkAspectRatio = function () {\n    var height = this.app.graphicsDevice.height;\n    var width = this.app.graphicsDevice.width;\n\n    // Match the axis of FOV to match the aspect ratio of the canvas so\n    // the focused entities is always in frame\n    this.entity.camera.horizontalFov = height > width;\n};\n\n\nOrbitCamera.prototype._buildAabb = function (entity, modelsAdded) {\n    var i = 0;\n\n    if (entity.model) {\n        var mi = entity.model.meshInstances;\n        for (i = 0; i < mi.length; i++) {\n            if (modelsAdded === 0) {\n                this._modelsAabb.copy(mi[i].aabb);\n            } else {\n                this._modelsAabb.add(mi[i].aabb);\n            }\n\n            modelsAdded += 1;\n        }\n    }\n\n    for (i = 0; i < entity.children.length; ++i) {\n        modelsAdded += this._buildAabb(entity.children[i], modelsAdded);\n    }\n\n    return modelsAdded;\n};\n\n\nOrbitCamera.prototype._calcYaw = function (quat) {\n    var transformedForward = new pc.Vec3();\n    quat.transformVector(pc.Vec3.FORWARD, transformedForward);\n\n    return Math.atan2(-transformedForward.x, -transformedForward.z) * pc.math.RAD_TO_DEG;\n};\n\n\nOrbitCamera.prototype._clampDistance = function (distance) {\n    if (this.distanceMax > 0) {\n        return pc.math.clamp(distance, this.distanceMin, this.distanceMax);\n    } else {\n        return Math.max(distance, this.distanceMin);\n    }\n};\n\n\nOrbitCamera.prototype._clampPitchAngle = function (pitch) {\n    // Negative due as the pitch is inversed since the camera is orbiting the entity\n    return pc.math.clamp(pitch, -this.pitchAngleMax, -this.pitchAngleMin);\n};\n\n\nOrbitCamera.quatWithoutYaw = new pc.Quat();\nOrbitCamera.yawOffset = new pc.Quat();\n\nOrbitCamera.prototype._calcPitch = function(quat, yaw) {\n    var quatWithoutYaw = OrbitCamera.quatWithoutYaw;\n    var yawOffset = OrbitCamera.yawOffset;\n\n    yawOffset.setFromEulerAngles(0, -yaw, 0);\n    quatWithoutYaw.mul2(yawOffset, quat);\n\n    var transformedForward = new pc.Vec3();\n\n    quatWithoutYaw.transformVector(pc.Vec3.FORWARD, transformedForward);\n\n    return Math.atan2(transformedForward.y, -transformedForward.z) * pc.math.RAD_TO_DEG;\n};\n\n","// mouse-input.js\nvar MouseInput = pc.createScript('mouseInput');\n\nMouseInput.attributes.add('orbitSensitivity', {\n    type: 'number', \n    default: 0.3, \n    title: 'Orbit Sensitivity', \n    description: 'How fast the camera moves around the orbit. Higher is faster'\n});\n\nMouseInput.attributes.add('distanceSensitivity', {\n    type: 'number', \n    default: 0.15, \n    title: 'Distance Sensitivity', \n    description: 'How fast the camera moves in and out. Higher is faster'\n});\n\n// initialize code called once per entity\nMouseInput.prototype.initialize = function() {\n    this.orbitCamera = this.entity.script.orbitCamera;\n\n    if (this.orbitCamera) {\n        var self = this;\n\n        var onMouseOut = function (e) {\n            self.onMouseOut(e);\n        };\n\n        this.app.mouse.on(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n        this.app.mouse.on(pc.EVENT_MOUSEUP, this.onMouseUp, this);\n        this.app.mouse.on(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n        this.app.mouse.on(pc.EVENT_MOUSEWHEEL, this.onMouseWheel, this);\n\n        // Listen to when the mouse travels out of the window\n        window.addEventListener('mouseout', onMouseOut, false);\n\n        // Remove the listeners so if this entity is destroyed\n        this.on('destroy', function() {\n            this.app.mouse.off(pc.EVENT_MOUSEDOWN, this.onMouseDown, this);\n            this.app.mouse.off(pc.EVENT_MOUSEUP, this.onMouseUp, this);\n            this.app.mouse.off(pc.EVENT_MOUSEMOVE, this.onMouseMove, this);\n            this.app.mouse.off(pc.EVENT_MOUSEWHEEL, this.onMouseWheel, this);\n\n            window.removeEventListener('mouseout', onMouseOut, false);\n        });\n    }\n\n    // Disabling the context menu stops the browser displaying a menu when\n    // you right-click the page\n    this.app.mouse.disableContextMenu();\n\n    this.lookButtonDown = false;\n    this.panButtonDown = false;\n    this.lastPoint = new pc.Vec2();\n};\n\n\nMouseInput.fromWorldPoint = new pc.Vec3();\nMouseInput.toWorldPoint = new pc.Vec3();\nMouseInput.worldDiff = new pc.Vec3();\n\n\nMouseInput.prototype.pan = function(screenPoint) {\n    var fromWorldPoint = MouseInput.fromWorldPoint;\n    var toWorldPoint = MouseInput.toWorldPoint;\n    var worldDiff = MouseInput.worldDiff;\n\n    // For panning to work at any zoom level, we use screen point to world projection\n    // to work out how far we need to pan the pivotEntity in world space \n    var camera = this.entity.camera;\n    var distance = this.orbitCamera.distance;\n\n    camera.screenToWorld(screenPoint.x, screenPoint.y, distance, fromWorldPoint);\n    camera.screenToWorld(this.lastPoint.x, this.lastPoint.y, distance, toWorldPoint);\n\n    worldDiff.sub2(toWorldPoint, fromWorldPoint);\n\n    this.orbitCamera.pivotPoint.add(worldDiff);    \n};\n\n\nMouseInput.prototype.onMouseDown = function (event) {\n    switch (event.button) {\n        case pc.MOUSEBUTTON_LEFT: {\n            this.lookButtonDown = true;\n            pc.app.css3Renderer.blockEvents(true);\n        } break;\n\n        case pc.MOUSEBUTTON_MIDDLE: \n        case pc.MOUSEBUTTON_RIGHT: {\n            this.panButtonDown = true;\n            pc.app.css3Renderer.blockEvents(true);\n        } break;\n    }\n};\n\n\nMouseInput.prototype.onMouseUp = function (event) {\n    switch (event.button) {\n        case pc.MOUSEBUTTON_LEFT: {\n            this.lookButtonDown = false;\n            pc.app.css3Renderer.blockEvents(false);\n        } break;\n\n        case pc.MOUSEBUTTON_MIDDLE: \n        case pc.MOUSEBUTTON_RIGHT: {\n            this.panButtonDown = false;      \n            pc.app.css3Renderer.blockEvents(false);\n        } break;\n    }\n};\n\n\nMouseInput.prototype.onMouseMove = function (event) {    \n    var mouse = pc.app.mouse;\n    if (this.lookButtonDown) {\n        this.orbitCamera.pitch -= event.dy * this.orbitSensitivity;\n        this.orbitCamera.yaw -= event.dx * this.orbitSensitivity;\n\n    } else if (this.panButtonDown) {\n        this.pan(event);   \n    }\n\n    this.lastPoint.set(event.x, event.y);\n};\n\n\nMouseInput.prototype.onMouseWheel = function (event) {\n    this.orbitCamera.distance -= event.wheel * this.distanceSensitivity * (this.orbitCamera.distance * 0.1);\n    event.event.preventDefault();\n};\n\n\nMouseInput.prototype.onMouseOut = function (event) {\n    this.lookButtonDown = false;\n    this.panButtonDown = false;\n    pc.app.css3Renderer.blockEvents(false);\n};\n\n","// touch-input.js\nvar TouchInput = pc.createScript('touchInput');\n\nTouchInput.attributes.add('orbitSensitivity', {\n    type: 'number', \n    default: 0.4, \n    title: 'Orbit Sensitivity', \n    description: 'How fast the camera moves around the orbit. Higher is faster'\n});\n\nTouchInput.attributes.add('distanceSensitivity', {\n    type: 'number', \n    default: 0.2, \n    title: 'Distance Sensitivity', \n    description: 'How fast the camera moves in and out. Higher is faster'\n});\n\n// initialize code called once per entity\nTouchInput.prototype.initialize = function() {\n    this.orbitCamera = this.entity.script.orbitCamera;\n    \n    // Store the position of the touch so we can calculate the distance moved\n    this.lastTouchPoint = new pc.Vec2();\n    this.lastPinchMidPoint = new pc.Vec2();\n    this.lastPinchDistance = 0;\n    \n    if (this.orbitCamera && this.app.touch) {\n        // Use the same callback for the touchStart, touchEnd and touchCancel events as they \n        // all do the same thing which is to deal the possible multiple touches to the screen\n        this.app.touch.on(pc.EVENT_TOUCHSTART, this.onTouchStartEndCancel, this);\n        this.app.touch.on(pc.EVENT_TOUCHEND, this.onTouchStartEndCancel, this);\n        this.app.touch.on(pc.EVENT_TOUCHCANCEL, this.onTouchStartEndCancel, this);\n        \n        this.app.touch.on(pc.EVENT_TOUCHMOVE, this.onTouchMove, this);\n        \n        this.on('destroy', function() {\n            this.app.touch.off(pc.EVENT_TOUCHSTART, this.onTouchStartEndCancel, this);\n            this.app.touch.off(pc.EVENT_TOUCHEND, this.onTouchStartEndCancel, this);\n            this.app.touch.off(pc.EVENT_TOUCHCANCEL, this.onTouchStartEndCancel, this);\n\n            this.app.touch.off(pc.EVENT_TOUCHMOVE, this.onTouchMove, this);\n        });\n    }\n};\n\n\nTouchInput.prototype.getPinchDistance = function (pointA, pointB) {\n    // Return the distance between the two points\n    var dx = pointA.x - pointB.x;\n    var dy = pointA.y - pointB.y;    \n    \n    return Math.sqrt((dx * dx) + (dy * dy));\n};\n\n\nTouchInput.prototype.calcMidPoint = function (pointA, pointB, result) {\n    result.set(pointB.x - pointA.x, pointB.y - pointA.y);\n    result.scale(0.5);\n    result.x += pointA.x;\n    result.y += pointA.y;\n};\n\n\nTouchInput.prototype.onTouchStartEndCancel = function(event) {\n    // We only care about the first touch for camera rotation. As the user touches the screen, \n    // we stored the current touch position\n    var touches = event.touches;\n    if (touches.length == 1) {\n        this.lastTouchPoint.set(touches[0].x, touches[0].y);\n        pc.app.css3Renderer.blockEvents(true);\n    \n    } else if (touches.length == 2) {\n        // If there are 2 touches on the screen, then set the pinch distance\n        this.lastPinchDistance = this.getPinchDistance(touches[0], touches[1]);\n        this.calcMidPoint(touches[0], touches[1], this.lastPinchMidPoint);\n        pc.app.css3Renderer.blockEvents(true);\n    }\n    else {\n        pc.app.css3Renderer.blockEvents(false);\n    }\n};\n\n\nTouchInput.fromWorldPoint = new pc.Vec3();\nTouchInput.toWorldPoint = new pc.Vec3();\nTouchInput.worldDiff = new pc.Vec3();\n\n\nTouchInput.prototype.pan = function(midPoint) {\n    var fromWorldPoint = TouchInput.fromWorldPoint;\n    var toWorldPoint = TouchInput.toWorldPoint;\n    var worldDiff = TouchInput.worldDiff;\n    \n    // For panning to work at any zoom level, we use screen point to world projection\n    // to work out how far we need to pan the pivotEntity in world space \n    var camera = this.entity.camera;\n    var distance = this.orbitCamera.distance;\n    \n    camera.screenToWorld(midPoint.x, midPoint.y, distance, fromWorldPoint);\n    camera.screenToWorld(this.lastPinchMidPoint.x, this.lastPinchMidPoint.y, distance, toWorldPoint);\n    \n    worldDiff.sub2(toWorldPoint, fromWorldPoint);\n     \n    this.orbitCamera.pivotPoint.add(worldDiff);    \n};\n\n\nTouchInput.pinchMidPoint = new pc.Vec2();\n\nTouchInput.prototype.onTouchMove = function(event) {\n    var pinchMidPoint = TouchInput.pinchMidPoint;\n    \n    // We only care about the first touch for camera rotation. Work out the difference moved since the last event\n    // and use that to update the camera target position \n    var touches = event.touches;\n    if (touches.length == 1) {\n        var touch = touches[0];\n        \n        this.orbitCamera.pitch -= (touch.y - this.lastTouchPoint.y) * this.orbitSensitivity;\n        this.orbitCamera.yaw -= (touch.x - this.lastTouchPoint.x) * this.orbitSensitivity;\n        \n        this.lastTouchPoint.set(touch.x, touch.y);\n    \n    } else if (touches.length == 2) {\n        // Calculate the difference in pinch distance since the last event\n        var currentPinchDistance = this.getPinchDistance(touches[0], touches[1]);\n        var diffInPinchDistance = currentPinchDistance - this.lastPinchDistance;\n        this.lastPinchDistance = currentPinchDistance;\n                \n        this.orbitCamera.distance -= (diffInPinchDistance * this.distanceSensitivity * 0.1) * (this.orbitCamera.distance * 0.1);\n        \n        // Calculate pan difference\n        this.calcMidPoint(touches[0], touches[1], pinchMidPoint);\n        // this.pan(pinchMidPoint);\n        this.lastPinchMidPoint.copy(pinchMidPoint);\n    }\n};\n\n\n","// ui-speed.js\nvar UiSpeed = pc.createScript('uiSpeed');\n\nUiSpeed.attributes.add('car', { type: 'entity' });\n\n// update code called every frame\nUiSpeed.prototype.initialize = function() {\n    var intervalHandle = setInterval(function () {\n        if (this.car && this.car.script) {\n            var speed = this.car.script.vehicle.speed;\n            var absSpeed = Math.abs(speed);\n            var text = 'Speed: ' + Math.round(absSpeed) + 'km/h';\n            if (speed < 0) {\n                text += ' (R)';\n            } \n            this.entity.element.text = text;\n        }\n    }.bind(this), 100);\n    \n    this.on('destroy', function() {\n        clearInterval(intervalHandle);\n    }, this);\n};\n\n\n","// follow-camera.js\nvar FollowCamera = pc.createScript('followCamera');\n\nFollowCamera.attributes.add('target', {\n    type: 'entity',\n    title: 'Target',\n    description: 'The target entity to follow'\n});\nFollowCamera.attributes.add('cameraOffset', {\n    type: 'vec3',\n    default: [0, 5, -10],\n    title: 'Camera Offset',\n    description: 'The local space offset with respect to the target entity coordinate system'\n});\nFollowCamera.attributes.add('lerpAmount', {\n    type: 'number',\n    min: 0,\n    max: 1,\n    default: 0.1,\n    title: 'Lerp Amount',\n    description: 'The amount to lerp the camera towards its desired position every frame based on a 60fps frame rate. Lerping is frame rate independent though and will be correct for other frame rates.'\n});\n\n// initialize code called once per entity\nFollowCamera.prototype.initialize = function() {\n    this.targetPos = new pc.Vec3();\n    this.matrix = new pc.Mat4();\n    this.quat = new pc.Quat();\n    this.vec = new pc.Vec3();\n\n    if (this.target) {\n        this.updateTargetPosition();\n        this.currentPos = this.targetPos.clone();\n    } else {\n        this.currentPos = this.entity.getPosition().clone();\n    }\n};\n\nFollowCamera.prototype.updateTargetPosition = function () {\n    // Calculate the target's angle around the world Y axis\n    var forward = this.target.forward;\n    this.vec.set(-forward.x, 0, -forward.z).normalize();\n    var angle = Math.atan2(this.vec.x, this.vec.z) * 180 / Math.PI;\n\n    // Rebuild the world transform for the target with a rotation limited to the world y axis\n    this.quat.setFromEulerAngles(0, angle, 0);\n    this.matrix.setTRS(this.target.getPosition(), this.quat, pc.Vec3.ONE);\n\n    // Calculate the desired camera position in world space\n    this.matrix.transformPoint(this.cameraOffset, this.targetPos);\n};\n\n// update code called every frame\nFollowCamera.prototype.postUpdate = function(dt) {\n    if (this.target) {\n        // Calculate where we want the camera to be\n        this.updateTargetPosition();\n\n        // Lerp the current camera position to where we want it to be\n        // Note that the lerping is framerate independent\n        \n        // From: https://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\n        this.currentPos.lerp(this.currentPos, this.targetPos, 1 - Math.pow(1 - this.lerpAmount, dt));\n\n        // Set the camera's position\n        this.entity.setPosition(this.currentPos);\n\n        // Look at the target entity from the new position\n        this.entity.lookAt(this.target.getPosition());\n    }\n};\n\n\n","// vehicle.js\nvar Vehicle = pc.createScript('vehicle');\n\nVehicle.attributes.add('wheels', {\n    type: 'entity',\n    array: true,\n    title: 'Wheels'\n});\nVehicle.attributes.add('maxEngineForce', {\n    type: 'number',\n    default: 2000,\n    title: 'Max Engine Force'\n});\nVehicle.attributes.add('maxBrakingForce', {\n    type: 'number',\n    default: 100,\n    title: 'Max Braking Force'\n});\nVehicle.attributes.add('maxSteering', {\n    type: 'number',\n    default: 0.3,\n    title: 'Max Steering'\n});\n\nObject.defineProperty(Vehicle.prototype, 'speed', {\n    get: function () {\n        return this.vehicle ? this.vehicle.getCurrentSpeedKmHour() : 0;\n    }\n});\n\n// initialize code called once per entity\nVehicle.prototype.postInitialize = function () {\n    var body = this.entity.rigidbody.body;\n    var dynamicsWorld = this.app.systems.rigidbody.dynamicsWorld;\n\n    // Create vehicle\n    var tuning = new Ammo.btVehicleTuning();\n    var vehicleRayCaster = new Ammo.btDefaultVehicleRaycaster(dynamicsWorld);\n    var vehicle = new Ammo.btRaycastVehicle(tuning, body, vehicleRayCaster);\n    vehicle.setCoordinateSystem(0, 1, 2);\n\n    // Never deactivate the vehicle\n    var DISABLE_DEACTIVATION = 4;\n    body.setActivationState(DISABLE_DEACTIVATION);\n\n    // Add wheels to the vehicle\n    var wheelAxle = new Ammo.btVector3(-1, 0, 0);\n    var wheelDirection = new Ammo.btVector3(0, -1, 0);\n    var connectionPoint = new Ammo.btVector3(0, 0, 0);\n\n    this.wheels.forEach(function (wheelEntity) {\n        var wheelScript = wheelEntity.script.vehicleWheel;\n\n        var frictionSlip = wheelScript.frictionSlip;\n        var isFront = wheelScript.isFront;\n        var radius = wheelScript.radius;\n        var rollInfluence = wheelScript.rollInfluence;\n        var suspensionCompression = wheelScript.suspensionCompression;\n        var suspensionDamping = wheelScript.suspensionDamping;\n        var suspensionRestLength = wheelScript.suspensionRestLength;\n        var suspensionStiffness = wheelScript.suspensionStiffness;\n\n        var wheelPos = wheelEntity.getLocalPosition();\n        connectionPoint.setValue(wheelPos.x, wheelPos.y, wheelPos.z);\n        var wheelInfo = vehicle.addWheel(connectionPoint, wheelDirection, wheelAxle, suspensionRestLength, radius, tuning, isFront);\n\n        wheelInfo.set_m_suspensionStiffness(suspensionStiffness);\n        wheelInfo.set_m_wheelsDampingRelaxation(suspensionDamping);\n        wheelInfo.set_m_wheelsDampingCompression(suspensionCompression);\n        wheelInfo.set_m_frictionSlip(frictionSlip);\n        wheelInfo.set_m_rollInfluence(rollInfluence);\n    }, this);\n\n    Ammo.destroy(wheelAxle);\n    Ammo.destroy(wheelDirection);\n    Ammo.destroy(connectionPoint);\n\n    // Add the vehicle to the dynamics world\n    dynamicsWorld.addAction(vehicle);\n\n    this.vehicle = vehicle;\n\n    this.engineForce = 0;\n    this.brakingForce = 0;\n    this.steering = 0;\n\n    // Event handling\n    this.on(\"enable\", function () {\n        dynamicsWorld.addAction(vehicle);\n    });\n\n    this.on(\"disable\", function () {\n        dynamicsWorld.removeAction(vehicle);\n    });\n\n    this.on(\"destroy\", function () {\n        dynamicsWorld.removeAction(vehicle);\n\n        Ammo.destroy(vehicleRayCaster);\n        Ammo.destroy(vehicle);\n    });\n\n    this.on('vehicle:controls', function (steering, throttle) {\n        this.steering = pc.math.lerp(this.steering, steering * this.maxSteering, 0.3);\n\n        if (throttle > 0) {\n            this.brakingForce = 0;\n            this.engineForce = this.maxEngineForce;\n        } else if (throttle < 0) {\n            this.brakingForce = 0;\n            this.engineForce = -this.maxEngineForce;\n        } else {\n            this.brakingForce = this.maxBrakingForce;\n            this.engineForce = 0;\n        }\n    });\n};\n\n// update code called every frame\nVehicle.prototype.update = function (dt) {\n    var vehicle = this.vehicle;\n    var i;\n\n    // Apply steering to the front wheels\n    vehicle.setSteeringValue(this.steering, 0);\n    vehicle.setSteeringValue(this.steering, 1);\n\n    // Apply engine and braking force to the back wheels\n    vehicle.applyEngineForce(this.engineForce, 2);\n    vehicle.setBrake(this.brakingForce, 2);\n    vehicle.applyEngineForce(this.engineForce, 3);\n    vehicle.setBrake(this.brakingForce, 3);\n\n    var numWheels = vehicle.getNumWheels();\n    for (i = 0; i < numWheels; i++) {\n        // synchronize the wheels with the (interpolated) chassis worldtransform\n        vehicle.updateWheelTransform(i, true);\n        var t = this.vehicle.getWheelTransformWS(i);\n\n        var p = t.getOrigin();\n        var q = t.getRotation();\n\n        var wheel = this.wheels[i];\n        wheel.setPosition(p.x(), p.y(), p.z());\n        wheel.setRotation(q.x(), q.y(), q.z(), q.w());\n    }\n};\n\n\nvar VehicleWheel = pc.createScript('vehicleWheel');\n\nVehicleWheel.attributes.add('isFront', {\n    type: 'boolean',\n    default: true,\n    title: 'Front Wheel'\n});\nVehicleWheel.attributes.add('radius', {\n    type: 'number',\n    default: 0.4,\n    title: 'Radius'\n});\nVehicleWheel.attributes.add('width', {\n    type: 'number',\n    default: 0.4,\n    title: 'Width'\n});\nVehicleWheel.attributes.add('suspensionStiffness', {\n    type: 'number',\n    default: 10,\n    title: 'Suspension Stiffness'\n});\nVehicleWheel.attributes.add('suspensionDamping', {\n    type: 'number',\n    default: 2.3,\n    title: 'Suspension Damping'\n});\nVehicleWheel.attributes.add('suspensionCompression', {\n    type: 'number',\n    default: 4.4,\n    title: 'Suspension Compression'\n});\nVehicleWheel.attributes.add('suspensionRestLength', {\n    type: 'number',\n    default: 0.2,\n    title: 'Suspension Rest Length'\n});\nVehicleWheel.attributes.add('rollInfluence', {\n    type: 'number',\n    default: 0.2,\n    title: 'Roll Influence'\n});\nVehicleWheel.attributes.add('frictionSlip', {\n    type: 'number',\n    default: 1000,\n    title: 'Friction Slip'\n});\nVehicleWheel.attributes.add('debugRender', {\n    type: 'boolean',\n    default: false,\n    title: 'Debug Render'\n});\n\nVehicleWheel.prototype.initialize = function () {\n    var createDebugWheel = function (radius, width) {\n        var debugWheel = new pc.Entity();\n        debugWheel.addComponent('model', {\n            type: 'cylinder',\n            castShadows: true\n        });\n        debugWheel.setLocalEulerAngles(0, 0, 90);\n        debugWheel.setLocalScale(radius * 2, width, radius * 2);\n        return debugWheel;\n    };\n\n    if (this.debugRender) {\n        this.debugWheel = createDebugWheel(this.radius, this.width);\n        this.entity.addChild(this.debugWheel);\n    }\n\n    this.on('attr:debugRender', function (value, prev) {\n        if (value) {\n            this.debugWheel = createDebugWheel(this.radius, this.width);\n            this.entity.addChild(this.debugWheel);\n        } else {\n            if (this.debugWheel) {\n                this.debugWheel.destroy();\n                this.debugWheel = null;\n            }\n        }\n    });\n};\n\n\nvar VehicleControls = pc.createScript('vehicleControls');\n\nVehicleControls.attributes.add('targetVehicle', {\n    type: 'entity',\n    title: 'Target Vehicle'\n});\nVehicleControls.attributes.add('leftButton', {\n    type: 'entity',\n    title: 'Left Button'\n});\nVehicleControls.attributes.add('rightButton', {\n    type: 'entity',\n    title: 'Right Button'\n});\nVehicleControls.attributes.add('forwardButton', {\n    type: 'entity',\n    title: 'Forward Button'\n});\nVehicleControls.attributes.add('reverseButton', {\n    type: 'entity',\n    title: 'Reverse Button'\n});\n\nVehicleControls.prototype.initialize = function () {\n    this.leftButtonPressed = false;\n    this.rightButtonPressed = false;\n    this.upButtonPressed = false;\n    this.downButtonPressed = false;\n    this.leftKeyPressed = false;\n    this.rightKeyPressed = false;\n    this.upKeyPressed = false;\n    this.downKeyPressed = false;\n\n    if (this.leftButton) {\n        this.leftButton.enabled = pc.platform.mobile;\n        this.leftButton.button.on('pressedstart', function () {\n            this.leftButtonPressed = true;\n        }, this);\n        this.leftButton.button.on('pressedend', function () {\n            this.leftButtonPressed = false;\n        }, this);\n    }\n    if (this.rightButton) {\n        this.rightButton.enabled = pc.platform.mobile;\n        this.rightButton.button.on('pressedstart', function () {\n            this.rightButtonPressed = true;\n        }, this);\n        this.rightButton.button.on('pressedend', function () {\n            this.rightButtonPressed = false;\n        }, this);\n    }\n    if (this.forwardButton) {\n        this.forwardButton.enabled = pc.platform.mobile;\n        this.forwardButton.button.on('pressedstart', function () {\n            this.upButtonPressed = true;\n        }, this);\n        this.forwardButton.button.on('pressedend', function () {\n            this.upButtonPressed = false;\n        }, this);\n    }\n    if (this.reverseButton) {\n        this.reverseButton.enabled = pc.platform.mobile;\n        this.reverseButton.button.on('pressedstart', function () {\n            this.downButtonPressed = true;\n        }, this);\n        this.reverseButton.button.on('pressedend', function () {\n            this.downButtonPressed = false;\n        }, this);\n    }\n\n    this.app.keyboard.on('keydown', function (e) {\n        switch (e.key) {\n            case pc.KEY_A:\n            case pc.KEY_LEFT:\n                this.leftKeyPressed = true;\n                break;\n            case pc.KEY_D:\n            case pc.KEY_RIGHT:\n                this.rightKeyPressed = true;\n                break;\n            case pc.KEY_W:\n            case pc.KEY_UP:\n                this.upKeyPressed = true;\n                break;\n            case pc.KEY_S:\n            case pc.KEY_DOWN:\n                this.downKeyPressed = true;\n                break;\n        }\n    }, this);\n    this.app.keyboard.on('keyup', function (e) {\n        switch (e.key) {\n            case pc.KEY_A:\n            case pc.KEY_LEFT:\n                this.leftKeyPressed = false;\n                break;\n            case pc.KEY_D:\n            case pc.KEY_RIGHT:\n                this.rightKeyPressed = false;\n                break;\n            case pc.KEY_W:\n            case pc.KEY_UP:\n                this.upKeyPressed = false;\n                break;\n            case pc.KEY_S:\n            case pc.KEY_DOWN:\n                this.downKeyPressed = false;\n                break;\n        }\n    }, this);\n};\n\nVehicleControls.prototype.update = function (dt) {\n    var targetVehicle = this.targetVehicle ? this.targetVehicle : this.entity;\n\n    if (targetVehicle) {\n        var steering = 0;\n        var throttle = 0;\n\n        if (this.leftButtonPressed || this.leftKeyPressed) steering++;\n        if (this.rightButtonPressed || this.rightKeyPressed) steering--;\n        if (this.upButtonPressed || this.upKeyPressed) throttle++;\n        if (this.downButtonPressed || this.downKeyPressed) throttle--;\n\n        var msg = \"\";\n        var inputSources = this.app.xr.input.inputSources;\n        inputSources.forEach(function (inputSource) {\n            if (inputSource.handedness === pc.XRHAND_LEFT) {\n                steering = -inputSource.gamepad.axes[2];\n                throttle -= inputSource.gamepad.buttons[0].value;\n            }\n            if (inputSource.handedness === pc.XRHAND_RIGHT) {\n                throttle += inputSource.gamepad.buttons[0].value;\n            }\n        });\n\n        targetVehicle.script.vehicle.fire('vehicle:controls', steering, throttle);\n    }\n};\n\n\n","// exhaust.js\nvar Exhaust = pc.createScript('exhaust');\n\n// initialize code called once per entity\nExhaust.prototype.update = function(dt) {\n    var car = this.app.root.findByName('Car Physics');\n    if (car && car.script && car.script.vehicle) {\n        var throttle = car.script.vehicle.engineForce;\n        if (throttle > 0) {\n            this.entity.particlesystem.play();\n        } else {\n            this.entity.particlesystem.stop();\n        }\n    }\n};\n\n\n","// action-vr.js\nvar ActionVr = pc.createScript('actionVr');\n\nActionVr.attributes.add('startEvent', {\n    type: 'string',\n    title: 'Start Event',\n    description: 'Event that starts the VR session.'\n});\nActionVr.attributes.add('endEvent', {\n    type: 'string',\n    title: 'End Event',\n    description: 'Event that ends the VR session.'\n});\nActionVr.attributes.add('space', {\n    type: 'number',\n    enum: [\n        { 'Bounded Floor': 0 },\n        { 'Local': 1 },\n        { 'Local Floor': 2 },\n        { 'Unbounded': 3 },\n        { 'Viewer': 4 }\n    ],\n    default: 1,\n    title: 'Space',\n    description: 'The tracking space for the VR session.'\n});\n\nActionVr.prototype.startVr = function() {\n    var spaces = [\n        pc.XRSPACE_BOUNDEDFLOOR,\n        pc.XRSPACE_LOCAL,\n        pc.XRSPACE_LOCALFLOOR,\n        pc.XRSPACE_UNBOUNDED,\n        pc.XRSPACE_VIEWER\n    ];\n\n    if (!this.app.xr.supported) {\n        // WebXR is not supported\n        return;\n    }\n\n    if (this.app.xr.active) {\n        // session already active\n        return;\n    }\n\n    if (! this.app.xr.isAvailable(pc.XRTYPE_VR)) {\n        // this session type is not available\n        return;\n    }\n\n    // ask for motion permissions if we can\n    if (window.DeviceOrientationEvent && window.DeviceOrientationEvent.requestPermission) {\n        DeviceOrientationEvent.requestPermission().then(\n            function(response) {\n                if (response == 'granted') {\n                    window.addEventListener('deviceorientation', function (e) {\n                        // start session\n                        this.entity.camera.startXr(pc.XRTYPE_VR, spaces[this.space]);\n                    }.bind(this));\n                }\n            }.bind(this)).catch(console.error);\n    } else {\n        // start session\n        this.entity.camera.startXr(pc.XRTYPE_VR, spaces[this.space]);\n    }\n};\n\nActionVr.prototype.endVr = function() {\n    this.app.xr.end();\n};\n\n// initialize code called once per entity\nActionVr.prototype.initialize = function() {\n    if (this.startEvent && this.startEvent.length > 0) {\n        this.app.on(this.startEvent, this.startVr, this);\n    }\n    if (this.endEvent && this.endEvent.length > 0) {\n        this.app.on(this.endEvent, this.endVr, this);\n    }\n\n    this.on('attr:startEvent', function (value, prev) {\n        if (prev && prev.length > 0) {\n            app.off(prev, this.startVr, this);\n        }\n        if (value && value.length > 0) {\n            app.on(value, this.startVr, this);\n        }\n    });\n\n    this.on('attr:endEvent', function (value, prev) {\n        if (prev && prev.length > 0) {\n            app.off(prev, this.endVr, this);\n        }\n        if (value && value.length > 0) {\n            app.on(value, this.endVr, this);\n        }\n    });\n    \n    this.on('destroy', function () {\n        if (this.startEvent && this.startEvent.length > 0) {\n            this.app.off(this.startEvent, this.startVr, this);\n        }\n        if (this.endEvent && this.endEvent.length > 0) {\n            this.app.off(this.endEvent, this.endVr, this);\n        }\n    });\n};\n\n\n","// action-physics-reset.js\nvar ActionPhysicsReset = pc.createScript('actionPhysicsReset');\n\nActionPhysicsReset.attributes.add('event', {\n    type: 'string',\n    title: 'Event',\n    description: 'If the specified event is fired and this entity has a dynamic rigid body, it will be reset to its initial position and orientation. The event must be fired on the app.'\n});\n\n// initialize code called once per entity\nActionPhysicsReset.prototype.postInitialize = function () {\n    var app = this.app;\n    var entity = this.entity;\n\n    var pos = entity.getPosition().clone();\n    var rot = entity.getRotation().clone();\n\n    var reset = function () {\n        var rigidbody = entity.rigidbody;\n        if (rigidbody && rigidbody.type === 'dynamic') {\n            // Reset the body to its initial state (with zero linear and angular velocity)\n            rigidbody.teleport(pos, rot);\n            rigidbody.linearVelocity = pc.Vec3.ZERO;\n            rigidbody.angularVelocity = pc.Vec3.ZERO;\n        }\n    };\n\n    if (this.event && this.event.length > 0) {\n        app.on(this.event, reset);\n    }\n\n    this.on('attr:event', function (value, prev) {\n        if (prev && prev.length > 0) {\n            app.off(prev, reset);\n        }\n        if (value && value.length > 0) {\n            app.on(value, reset);\n        }\n    });\n\n    this.on('destroy', function () {\n        if (this.event && this.event.length > 0) {\n            app.off(this.event, reset);\n        }\n    });\n};\n\n\n","// events-button.js\nvar EventsButton = pc.createScript('eventsButton');\n\nEventsButton.attributes.add('clickEvent', { type: 'string' });\nEventsButton.attributes.add('pressedStartEvent', { type: 'string' });\nEventsButton.attributes.add('pressedEndEvent', { type: 'string' });\nEventsButton.attributes.add('hoverStartEvent', { type: 'string' });\nEventsButton.attributes.add('hoverEndEvent', { type: 'string' });\n\n// initialize code called once per entity\nEventsButton.prototype.initialize = function() {\n    this.entity.button.on('click', function () {\n        if (this.clickEvent && this.clickEvent.length > 0) {\n            this.app.fire(this.clickEvent);\n        }\n    }, this);\n    this.entity.button.on('pressedstart', function () {\n        if (this.pressedStartEvent && this.pressedStartEvent.length > 0) {\n            this.app.fire(this.pressedStartEvent);\n        }\n    }, this);\n    this.entity.button.on('pressedend', function () {\n        if (this.pressedEndEvent && this.pressedEndEvent.length > 0) {\n            this.app.fire(this.pressedEndEvent);\n        }\n    }, this);\n    this.entity.button.on('hoverstart', function () {\n        if (this.hoverStartEvent && this.hoverStartEvent.length > 0) {\n            this.app.fire(this.hoverStartEvent);\n        }\n    }, this);\n    this.entity.button.on('hoverend', function () {\n        if (this.hoverEndEvent && this.hoverEndEvent.length > 0) {\n            this.app.fire(this.hoverEndEvent);\n        }\n    }, this);\n};\n\n\n","// action-set-property.js\nvar ActionSetBoolean = pc.createScript('actionSetBoolean');\n\nActionSetBoolean.attributes.add('actions', {\n    type: 'json',\n    schema: [\n        {\n            name: 'event',\n            title: 'Event',\n            description: 'The event name that triggers this set action.',\n            type: 'string'\n        }, {\n            name: 'entity',\n            title: 'Entity',\n            description: 'The entity from where the path starts. If unset, this entity is used.',\n            type: 'entity'\n        }, {\n            name: 'path',\n            title: 'Path',\n            description: 'The path to set when the event fires.',\n            type: 'string'\n        }, {\n            name: 'value',\n            title: 'Value',\n            type: 'number',\n            enum: [\n                { 'False': 0 },\n                { 'True': 1 }\n            ],\n            description: 'The value to set the property to.',\n            default: 1\n        }\n    ],\n    array: true\n});\n\n// initialize code called once per entity\nActionSetBoolean.prototype.initialize = function() {\n    this.actions.forEach(function (action) {\n        this.app.on(action.event, function () {\n            var pathSegments = action.path.split('.');\n            var propertyOwner = action.entity ? action.entity : this.entity;\n            for (var i = 0; i < pathSegments.length - 1; i++) {\n                propertyOwner = propertyOwner[pathSegments[i]];\n            }\n\n            var propertyName = pathSegments[pathSegments.length - 1];\n            propertyOwner[propertyName] = !!action.value;\n        }, this);\n    }, this);\n};\n\n\n","// vehicle-graphics.js\nvar VehicleGraphics = pc.createScript('vehicleGraphics');\n\nVehicleGraphics.attributes.add('physicsVehicle', { type: 'entity' });\nVehicleGraphics.attributes.add('wheelNames', { type: 'string', array: true });\nVehicleGraphics.attributes.add('wheelOffsets', { type: 'vec3', array: true });\n\nVehicleGraphics.prototype.initialize = function () {\n    this.wheels = [];\n    for (var i = 0; i < this.wheelNames.length; i++) {\n        this.wheels[i] = this.entity.findByName(this.wheelNames[i]);\n    }\n};\n\nVehicleGraphics.prototype.postUpdate = function (dt) {\n    if (this.physicsVehicle) {\n        this.entity.setPosition(this.physicsVehicle.getPosition());\n        this.entity.setRotation(this.physicsVehicle.getRotation());\n        \n        for (var i = 0; i < this.wheels.length; i++) {\n            var graphicalWheel = this.wheels[i];\n            var physicalWheel = this.physicsVehicle.script.vehicle.wheels[i];\n\n            if (graphicalWheel && physicalWheel) {\n                graphicalWheel.setPosition(physicalWheel.getPosition());\n                graphicalWheel.setRotation(physicalWheel.getRotation());\n                graphicalWheel.rotateLocal(0, 180, 0);\n            }\n        }\n    }\n};\n\n\n","// posteffect-lut.js\n/*\nLookUp Table (LUT) Post Effect\n\nFor this post effect, it requires a texture with lookup data.\nlookup-original.png - is base, original lookup, which can be modified in photoshop with color filters.\nIt is a very cheap way to implement sophisticated color editing.\n\nHow to create own LUT texture:\n1. Download lookup-original.png\n2. Make a screenshot of a scene you want to modify coloring of (make sure it has no post effects on)\n3. Open that screenshot in photoshop\n4. Add layer filters, e.g. Brightness/Contrast, Hue, Color Balance, etc\n5. Edit them to make screenshot to look as desired\n6. Add lookup-original image in place of screenshot\n7. Save as new PNG-24 file\n8. Upload to project\n9. Uncheck Mipmaps and set Addressing to Clamp\n10. Specify on Camera Posteffect script new lookup texture\n\nThis script allows swapping between LUT assets on the fly, and will update in realtime\n*/\n\npc.extend(pc, function () {\n    var BrightnessContrastEffect = function (graphicsDevice) {\n        this.shader = new pc.Shader(graphicsDevice, {\n            attributes: {\n                aPosition: pc.SEMANTIC_POSITION\n            },\n            vshader: [\n                \"attribute vec2 aPosition;\",\n                \"\",\n                \"varying vec2 vUv0;\",\n                \"\",\n                \"void main(void)\",\n                \"{\",\n                \"    gl_Position = vec4(aPosition, 0.0, 1.0);\",\n                \"    vUv0 = (aPosition.xy + 1.0) * 0.5;\",\n                \"}\"\n            ].join(\"\\n\"),\n            fshader: [\n                \"precision \" + graphicsDevice.precision + \" float;\",\n                \"uniform sampler2D uColorBuffer;\",\n                \"uniform sampler2D uLut;\",\n\n                \"varying vec2 vUv0;\",\n                \n                \"vec4 lookup(in vec4 textureColor, in sampler2D lookupTable) {\",\n                    \"mediump float blueColor = textureColor.b * 63.0;\",\n                    \"mediump vec2 quad1;\",\n                    \"quad1.y = floor(floor(blueColor) / 8.0);\",\n                    \"quad1.x = floor(blueColor) - (quad1.y * 8.0);\",\n                    \"mediump vec2 quad2;\",\n                    \"quad2.y = floor(ceil(blueColor) / 8.0);\",\n                    \"quad2.x = ceil(blueColor) - (quad2.y * 8.0);\",\n                    \"highp vec2 texPos1;\",\n                    \"texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);\",\n                    \"texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g);\",\n                    \"texPos1.y = 1.0-texPos1.y;\",\n                    \"highp vec2 texPos2;\",\n                    \"texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);\",\n                    \"texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g);\",\n                    \"texPos2.y = 1.0-texPos2.y;\",\n                    \"lowp vec4 newColor1 = texture2D(lookupTable, texPos1);\",\n                    \"lowp vec4 newColor2 = texture2D(lookupTable, texPos2);\",\n                    \"lowp vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\",\n                    \"return newColor;\",\n                \"}\",\n\n                \"void main() {\",\n                    \"vec4 base = texture2D( uColorBuffer, vUv0 );\",\n                \n                    \"gl_FragColor = lookup(base, uLut);\",\n                \"}\"\n            ].join(\"\\n\")\n        });\n    };\n\n    BrightnessContrastEffect = pc.inherits(BrightnessContrastEffect, pc.PostEffect);\n\n    BrightnessContrastEffect.prototype = pc.extend(BrightnessContrastEffect.prototype, {\n        render: function (inputTarget, outputTarget, rect) {\n            var device = this.device;\n            var scope = device.scope;\n\n            scope.resolve(\"uColorBuffer\").setValue(inputTarget.colorBuffer);\n            scope.resolve(\"uLut\").setValue(this.textureLut.resource);\n            \n            pc.drawFullscreenQuad(device, outputTarget, this.vertexBuffer, this.shader, rect);\n        }\n    });\n\n    return {\n        BrightnessContrastEffect: BrightnessContrastEffect\n    };\n}());\n\n\nvar BrightnessContrast = pc.createScript('brightnessContrast');\n\nBrightnessContrast.attributes.add('textureLut', {\n    type: 'asset',\n    assetType: 'texture',\n    title: 'LUT Texture'\n});\n\nBrightnessContrast.prototype.initialize = function() {\n    this.effect = new pc.BrightnessContrastEffect(this.app.graphicsDevice);\n    this.effect.textureLut = this.textureLut;\n    \n    // update LUT asset if changed\n    this.on('attr:textureLut', function(value) {\n        this.effect.textureLut = value;\n    });\n\n    var queue = this.entity.camera.postEffects;\n\n    queue.addEffect(this.effect);\n\n    this.on('state', function (enabled) {\n        if (enabled) {\n            queue.addEffect(this.effect);\n        } else {\n            queue.removeEffect(this.effect);\n        }\n    });\n\n    this.on('destroy', function () {\n        queue.removeEffect(this.effect);\n    });\n};\n\n\n","// unload-assets-on-click.js\nvar UnloadAssetsOnClick = pc.createScript('unloadAssetsOnClick');\nUnloadAssetsOnClick.attributes.add('assetTag', {type: 'string'});\n\n// initialize code called once per entity\nUnloadAssetsOnClick.prototype.initialize = function() {\n    this.entity.button.once('click', function() {\n        var assets = this.app.assets.findByTag(this.assetTag);\n        for (var i = 0; i < assets.length; i++) {\n            assets[i].unload();\n        }\n    }, this);\n};\n\n// swap method called for script hot-reloading\n// inherit your script state here\n// UnloadAssetsOnClick.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n","// load-scene-with-assets.js\nvar LoadSceneWithAssets = pc.createScript('loadSceneWithAssets');\nLoadSceneWithAssets.attributes.add('sceneName', { type: 'string' });\nLoadSceneWithAssets.attributes.add('loadingProgressTextEntity', { type: 'entity' });\n\n// initialize code called once per entity\nLoadSceneWithAssets.prototype.initialize = function () {\n    this.entity.button.once('click', function () {\n        // Find all the assets that have been tagged with the scene name\n        var assets = this.app.assets.findByTag(this.sceneName);\n\n        var assetsLoaded = 0;\n        var assestTotal = assets.length;\n\n        // Callback when all the assets are loaded\n        var onAssetsLoaded = function () {\n            loadScene(this.sceneName, { hierarchy: true, settings: true });\n        }.bind(this);\n\n        // Callback function when an asset is loaded\n        var onAssetReady = function (asset) {\n            assetsLoaded += 1;\n\n            console.log(asset.name);\n\n            // Update the progress text\n            this.loadingProgressTextEntity.element.text = assetsLoaded.toString() + '/' + assestTotal.toString() + ' loaded';\n\n            // Once we have loaded all the assets\n            if (assetsLoaded === assestTotal) {\n                onAssetsLoaded();\n            }\n        }.bind(this);\n\n        // Start loading all the assets\n        for (var i = 0; i < assets.length; i++) {\n            assets[i].ready(onAssetReady);\n            this.app.assets.load(assets[i]);\n        }\n\n        if (assets.length === 0) {\n            onAssetsLoaded();\n        }\n    }, this);\n};\n\n\n","// custom_shader.js\nvar CustomShader = pc.createScript('customShader');\n\nCustomShader.attributes.add('vs', {\n    type: 'asset',\n    assetType: 'shader',\n    title: 'Vertex Shader'\n});\n\nCustomShader.attributes.add('fs', {\n    type: 'asset',\n    assetType: 'shader',\n    title: 'Fragment Shader'\n});\n\nCustomShader.attributes.add('diffuseMap', {\n    type: 'asset',\n    assetType: 'texture',\n    title: 'Diffuse Map'\n});\n\nCustomShader.attributes.add('heightMap', {\n    type: 'asset',\n    assetType: 'texture',\n    title: 'Height Map'\n});\n\n// initialize code called once per entity\nCustomShader.prototype.initialize = function() {\n    this.time = 0;\n    \n    var app = this.app;\n    var gd = app.graphicsDevice;\n\n    var diffuseTexture = this.diffuseMap.resource;\n    var heightTexture = this.heightMap.resource;\n\n    var vertexShader = this.vs.resource;\n    var fragmentShader = \"precision \" + gd.precision + \" float;\\n\";\n    fragmentShader = fragmentShader + this.fs.resource;\n\n    // A shader definition used to create a new shader.\n    var shaderDefinition = {\n        attributes: {\n            aPosition: pc.SEMANTIC_POSITION,\n            aUv0: pc.SEMANTIC_TEXCOORD0\n        },\n        vshader: vertexShader,\n        fshader: fragmentShader\n    };\n\n    // Create the shader from the definition\n    this.shader = new pc.Shader(gd, shaderDefinition);\n\n    // Create a new material and set the shader\n    this.material = new pc.Material();\n    this.material.shader = this.shader;\n\n    // Set the initial time parameter\n    this.material.setParameter('uTime', 0);\n\n    // Set the diffuse texture\n    this.material.setParameter('uDiffuseMap', diffuseTexture);\n\n    // Use the \"clouds\" texture as the height map property\n    this.material.setParameter('uHeightMap', heightTexture);\n\n    // Replace the material on the model with our new material\n    var renders = this.entity.findComponents('render');\n\n    for (var i = 0; i < renders.length; ++i) {\n        var meshInstances = renders[i].meshInstances;\n        for (var j = 0; j < meshInstances.length; j++) {\n            meshInstances[j].material = this.material;\n        }\n    }  \n};\n\n// update code called every frame\nCustomShader.prototype.update = function(dt) {\n    this.time += dt;\n        \n    // Bounce value of t 0->1->0\n    var t = (this.time % 2);\n    if (t > 1) {\n        t = 1 - (t - 1);\n    }\n\n    // Update the time value in the material\n    this.material.setParameter('uTime', t);\n};\n\n\n","// wireframe.js\nvar Wireframe = pc.createScript('wireframe');\n\n// initialize code called once per entity\nWireframe.prototype.initialize = function() {\nthis.entity.render.renderStyle = pc.RENDERSTYLE_WIREFRAME;\n};\n\n// update code called every frame\nWireframe.prototype.update = function(dt) {\n\n};\n\n// swap method called for script hot-reloading\n// inherit your script state here\n// Wireframe.prototype.swap = function(old) { };\n\n// to learn more about script anatomy, please read:\n// https://developer.playcanvas.com/en/user-manual/scripting/\n\n"]}